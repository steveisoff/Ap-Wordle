"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_custom-copilots_components_MultiFilePicker_tsx"],{78904:(e,t,a)=>{a.d(t,{T:()=>d});var r=a(17908),n=a(5796),i=a(46584),l=a(70404),o=a(57572),s=a(96540),c=a(46636);function d(){let{sendAnalyticsEvent:e}=(0,l.s)(),t=function(){let e=function(){let e=(0,r.t)(),t=(0,c.i)();return(0,s.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])}(),t=(0,r.t)(),a=(0,n.yH8)(n.tTz,{owner:t.ownerLogin,repo:t.name});return(0,s.useCallback)((t,r,n)=>{let i={target:t,interaction:r,context:n,...e,url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")};(0,o.lS)(a,{method:"POST",body:i})},[e,a])}(),a=(0,i.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,s.useCallback)((r,n={})=>{e("repository.click",r,n),a&&t(r,"click",n)},[e,t,a]),sendRepoKeyDownEvent:(0,s.useCallback)((r,n={})=>{e("repository.keydown",r,n),a&&t(r,"keydown",n)},[e,t,a]),sendStats:(0,s.useCallback)((r,n={})=>{e(r,"",n),a&&t(r,"stats",n)},[e,t,a]),sendMarketplaceActionEvent:(0,s.useCallback)((t,a={})=>{e("marketplace.action.click",t,a)},[e])}}},83023:(e,t,a)=>{a.d(t,{o:()=>u});var r=a(5225),n=a(17908),i=a(5796),l=a(57572),o=a(96540);async function s(e){let t=await (0,l.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,r.A)(s,{cache:c});function u(e,t,a){let r=(0,n.t)(),[l,s]=(0,o.useState)({list:[],directories:[],loading:!0}),c=(0,i.ClY)({repo:r,commitOid:e,includeDirectories:!a});return(0,o.useEffect)(()=>{let e=!1,a=async()=>{s({list:[],directories:[],loading:!0});let t=await d(c);if(e)return;let a=t?.paths||[],r=t?.directories||[];s({list:a.concat(r).sort(),directories:r,error:!t})};return t&&a(),function(){e=!0}},[c,t,a]),l}},38556:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(14194),n=a(17908),i=a(5796),l=a(94232),o=a(96540);function s(){let e=(0,n.t)(),{path:t,action:a,refInfo:s}=(0,r.eu)(),[c]=(0,l.I)(()=>!1,!0,[]);function d(e){return e?`?${e}`:""}function u(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:o.useCallback(t=>(0,i.IO9)({repo:e,commitish:s.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,s.name]),getUrl(r={}){let n=(0,i.IO9)({repo:e,commitish:r.commitish||s.name,action:r.action||a,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(n,window.location.origin).href:n},createPermalink(r={}){let n=(0,i.IO9)({repo:e,commitish:s.currentOid,action:r.action||a,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(n,window.location.origin).href:n},isCurrentPagePermalink:()=>!c&&s.name===s.currentOid&&window.location.pathname.includes(s.currentOid)}}},73412:(e,t,a)=>{function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{z:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){r(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(this.terminated)return;let t={data:this.job({data:e})};this.onmessage?.(t)}terminate(){this.terminated=!0}constructor(e){r(this,"terminated",!1),r(this,"onmessage",void 0),this.job=e}}},7911:(e,t,a)=>{a.d(t,{j:()=>l});var r=a(5225),n=a(91385);let i=(0,r.A)(n.fN);function l({data:e}){let{query:t,baseList:a,startTime:r}=e,l=t.replaceAll("\\","");return{query:t,list:a.filter(e=>""===l||(0,n.qA)(l,e)&&i(l,e)>0).sort((e,t)=>i(l,t)-i(l,e)),baseCount:a.length,startTime:r}}},70404:(e,t,a)=>{a.d(t,{S:()=>s,s:()=>o});var r=a(21728),n=a(96540),i=a(46988),l=a(50045);function o(){let e,t;let a=(0,r.c)(6),o=(0,n.useContext)(l.I);if(!o)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:s,category:c,metadata:d}=o;a[0]!==s||a[1]!==c||a[2]!==d?(e=(e,t,a)=>{let r={react:!0,app_name:s,category:c,...d};(0,i.BI)(e,{...r,...void 0===a?{}:a,target:t})},a[0]=s,a[1]=c,a[2]=d,a[3]=e):e=a[3];let u=e;return a[4]!==u?(t={sendAnalyticsEvent:u},a[4]=u,a[5]=t):t=a[5],t}function s(){let e,t;let a=(0,r.c)(4),{sendAnalyticsEvent:n}=o();a[0]!==n?(e=e=>{n("analytics.click",void 0,void 0===e?{}:e)},a[0]=n,a[1]=e):e=a[1];let i=e;return a[2]!==i?(t={sendClickAnalyticsEvent:i},a[2]=i,a[3]=t):t=a[3],t}},28448:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(96540);function n({focusRowRef:e,mouseRowRef:t}){let[a,n]=r.useState(!1);return r.useEffect(()=>{if(e.current&&t.current){let a=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&n(!0)};e.current.onfocus=()=>{a()},e.current.onblur=()=>{n(!1)},t.current.onmouseenter=()=>{a()},t.current.onmouseleave=()=>{n(!1)}}},[e,t]),a}},6262:(e,t,a)=>{a.d(t,{E:()=>i});var r=a(74848),n=a(69197);function i({children:e}){return(0,n.P)()?(0,r.jsx)(r.Fragment,{children:e}):null}try{i.displayName||(i.displayName="AllShortcutsEnabled")}catch{}},69197:(e,t,a)=>{a.d(t,{$:()=>l,P:()=>o});var r=a(74848),n=a(96540);let i=n.createContext(!0);function l({allShortcutsEnabled:e,children:t}){return(0,r.jsxs)(i.Provider,{value:e,children:[" ",t," "]})}function o(){return n.useContext(i)}try{i.displayName||(i.displayName="AllShortcutsEnabledContext")}catch{}try{l.displayName||(l.displayName="AllShortcutsEnabledProvider")}catch{}},23832:(e,t,a)=>{a.d(t,{Ck:()=>o,JS:()=>l});var r=a(74848),n=a(96540);let i=(0,n.createContext)({query:"",setQuery:()=>void 0});function l(){return(0,n.useContext)(i)}function o({children:e}){let[t,a]=(0,n.useState)(""),l=(0,n.useMemo)(()=>({query:t,setQuery:a}),[a,t]);return(0,r.jsx)(i.Provider,{value:l,children:e})}try{i.displayName||(i.displayName="FileQueryContext")}catch{}try{o.displayName||(o.displayName="FileQueryProvider")}catch{}},14194:(e,t,a)=>{a.d(t,{eu:()=>s,qV:()=>o,sq:()=>c});var r=a(74848),n=a(38359),i=a(96540);let l=i.createContext({});function o({children:e,...t}){return(0,r.jsx)(l.Provider,{value:t,children:e})}function s(){return i.useContext(l)}function c(){return(0,n.X)()}try{l.displayName||(l.displayName="FilesPageInfoContext")}catch{}try{o.displayName||(o.displayName="FilesPageInfoProvider")}catch{}},17908:(e,t,a)=>{a.d(t,{d:()=>o,t:()=>s});var r=a(74848),n=a(21728),i=a(96540);let l=i.createContext({});function o(e){let t;let a=(0,n.c)(3),{repository:i,children:o}=e;return a[0]!==o||a[1]!==i?(t=(0,r.jsxs)(l.Provider,{value:i,children:[" ",o," "]}),a[0]=o,a[1]=i,a[2]=t):t=a[2],t}function s(){return i.useContext(l)}try{l.displayName||(l.displayName="CurrentRepositoryContext")}catch{}try{o.displayName||(o.displayName="CurrentRepositoryProvider")}catch{}},46636:(e,t,a)=>{a.d(t,{Q:()=>o,i:()=>s});var r=a(74848),n=a(21728),i=a(96540);let l=i.createContext(void 0);function o(e){let t;let a=(0,n.c)(3),{user:i,children:o}=e;return a[0]!==o||a[1]!==i?(t=(0,r.jsxs)(l.Provider,{value:i,children:[" ",o," "]}),a[0]=o,a[1]=i,a[2]=t):t=a[2],t}function s(){return i.useContext(l)}try{l.displayName||(l.displayName="CurrentUserContext")}catch{}try{o.displayName||(o.displayName="CurrentUserProvider")}catch{}},89621:(e,t,a)=>{a.d(t,{Q:()=>ev});var r=a(74848),n=a(75177),i=a(87330),l=a(74144),o=a(30631),s=a(73451),c=a(55847),d=a(38621),u=a(57572),m=a(96540),h=a(83023),f=a(78904),p=a(38556),x=a(7284),y=a(28448),g=a(46928),v=a(12719),C=a(65607),w=a(63867),b=a(30729),j=a(65556);function I(e,t,a){let r=[];for(let n of t)if(n.startsWith(e)){let t=n.slice(e.length+1),i=t.indexOf("/"),l=i>0?t.slice(0,i):t,o=`${e}/${l}`;if(a&&a.some(e=>e.path===o))continue;let s={items:[],data:{contentType:o===n?"file":"directory",name:l,path:o,isClientOnly:!0}};r.push(s)}return r}let k={checkbox:"FileTreePicker-module__checkbox--xtwO6",itemContainer:"FileTreePicker-module__itemContainer--yiAEi"};function S(e,t){let a=new Set(e);switch(t.type){case"SELECT_FILE":a.add(t.path);break;case"DESELECT_FILE":a.delete(t.path);break;case"SELECT_DIRECTORY":for(let e of t.paths)a.add(e);break;case"DESELECT_DIRECTORY":for(let e of t.paths)a.delete(e)}return a}function E({isActive:e,file:t,onItemSelected:a,getItemUrl:n,selectedItemRef:i,navigate:l,onRenderRow:o,getFileTrailingVisual:s,getFileIcon:c,navigateOnClick:u,isSelected:h}){let{sendRepoClickEvent:p}=(0,f.T)(),g=m.useRef(null),w=(0,y.Z)({focusRowRef:g,mouseRowRef:g}),b="submodule"===t.data.contentType,j=s?.(t.data);(0,m.useEffect)(()=>{e&&g.current&&requestAnimationFrame(()=>{g.current?.scrollIntoView({block:"center"})})},[e]);let I=m.useCallback(e=>{b?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(n(t.data),"_blank"),e.preventDefault()):(a?.(t.data,t),p("FILES_TREE.ITEM",{item_path:t.data.path}),u&&l(n(t.data)),e.stopPropagation())},[t,n,b,l,u,a,p]);return o?.(),(0,r.jsxs)(v.G.Item,{ref:g,onSelect:I,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,r.jsx)(v.G.LeadingVisual,{children:c?c(t.data):b?(0,r.jsx)(d.FileSubmoduleIcon,{}):(0,r.jsx)(d.FileIcon,{})}),(0,r.jsxs)("div",{className:k.itemContainer,children:[(0,r.jsx)(C.A,{className:k.checkbox,checked:h||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,r.jsx)("span",{ref:i,style:{color:b?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,r.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),w&&(0,r.jsx)(x.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:g,"aria-label":t.data.name,open:!0,direction:"ne"}),!!j?.screenReaderText&&(0,r.jsx)("span",{className:"sr-only",children:j.screenReaderText}),!!j?.trailingVisual&&(0,r.jsx)(v.G.TrailingVisual,{children:j.trailingVisual})]})}let R=m.memo(E),T=m.memo(C.A);function N({clientOnlyFilePaths:e,directory:t,isActive:a,isAncestorOfActive:n,leadingPath:i,onItemSelected:l,getItemUrl:o,getFetchUrl:s,selectedItemRef:c,navigate:d,onRenderRow:h,getFileTrailingVisual:p,getFileIcon:g,navigateOnClick:C,selectedChildren:w,expandedPath:b}){let[S,E]=(0,m.useState)(n),{sendRepoClickEvent:R}=(0,f.T)(),N=m.useRef(null),A=m.useRef(null),F=(0,y.Z)({focusRowRef:A,mouseRowRef:N}),$=m.useMemo(()=>w?.filter(e=>e.startsWith(`${t.data.path}/`)),[w,t.data.path]),P=m.useMemo(()=>(function(e,t){if(!t||0===t.length)return"none";if(t.includes(e.data.path))return"all";let a=e.data.totalCount||0,r=t.filter(t=>t.startsWith(`${e.data.path}/`)).length;return 0===r?"none":r===a?"all":"partial"})(t,w),[t,w]),[_,D,V,M,W,U,G]=function(e,t,a){let[r,n]=m.useState(e.items),[i,l]=m.useState(e.data.totalCount||0),[o,s]=m.useState(!1),[c,d]=m.useState(!1),{safeSetTimeout:h}=(0,j.A)();m.useEffect(()=>{n(e.items)},[e.items]),m.useEffect(()=>{void 0!==e.data.totalCount&&l(e.data.totalCount)},[e.data.totalCount]);let f=m.useCallback(()=>{d(!1)},[]),p=m.useCallback((e,t)=>{let a=e||[...r];n(a.slice(0,100)),h(()=>{n(a),void 0!==t&&l(t)},1)},[r,h]);return[m.useCallback(async r=>{let i=new Map;if(e.data.isClientOnly){if(r){let a=I(e.data.path,r);for(let e of a)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),a.length>100?p(a,a.length):(n(a),l(a.length))}}else{let o=a(e.data);d(!1),s(!0);let c=Date.now(),m=await (0,u.lS)(`${o}?noancestors=1`);try{if(m.ok){let a=await m.json(),o=a.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===a.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,a,r){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let n=a.name.slice(0,a.name.lastIndexOf("/")),i=n.indexOf("/")>-1,l={path:a.path.slice(0,a.path.lastIndexOf("/")),contentType:a.contentType,name:n,hasSimplifiedPath:i},o={items:[t],data:l};return(r.set(l.path,o),i)?e(o,{...l},r):o}(t,e,i):t});if(r){let t=e.data.path,n=I(t,r,a.payload.tree.items);for(let e of(o.push(...n),n))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=a.payload.tree.totalCount,o.length>100?p(o,a.payload.tree.totalCount):(n(o),l(a.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}s(!1)},[a,e,t,p]),p,r,o,c,f,i]}(t,()=>{},s),q=i?`${i}/`:"",H=G-V.length;(0,m.useEffect)(()=>{a&&N.current&&requestAnimationFrame(()=>{N.current?.scrollIntoView({block:"center"})})},[a]);let z=m.useCallback(e=>{!e||S||M||W||!(t.items.length>100)||D(),e!==S&&E(e)},[S,M,W,t.items.length,D]),K=m.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&C?(window.open(o(t.data),"_blank"),e.preventDefault()):(l?.(t.data,t),R("FILES_TREE.ITEM",{item_path:t.data.path}),C&&d(o(t.data)),e.stopPropagation())},[t,o,d,C,l,R]);m.useEffect(()=>{n&&!S&&z?.(!0)},[n]),m.useEffect(()=>{0===t.items.length&&S?z?.(!1):!S&&t.autoExpand&&z?.(!0)},[t.items.length]);let Y=m.useCallback(e=>{c&&a&&c(e),N.current=e},[c,a]);if(1===t.items.length){let n=t.items[0];if(n&&"directory"===n.data.contentType)return(0,r.jsx)(O,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:q+t.data.name,inheritsActive:a,onItemSelected:l,selectedItemRef:c,getItemUrl:o,directoryNavigateOnClick:C,navigateOnClick:C,getFileTrailingVisual:p,getFileIcon:g,selectedChildren:$,expandedPath:b})}return h?.(),(0,r.jsxs)(v.G.Item,{ref:A,expanded:S,onExpandedChange:z,current:a,onSelect:K,id:`${t.data.path}-item`,containIntrinsicSize:a?void 0:"auto 2rem",children:[(0,r.jsx)(v.G.LeadingVisual,{children:(0,r.jsx)(v.G.DirectoryIcon,{})}),(0,r.jsxs)("div",{className:k.itemContainer,children:[(0,r.jsx)(T,{className:k.checkbox,checked:"all"===P,indeterminate:"partial"===P,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===P?"true":void 0}),(0,r.jsxs)("span",{ref:Y,children:[q&&(0,r.jsx)("span",{children:q}),(0,r.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),F&&(0,r.jsx)(x.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:A,"aria-label":`${q}${t.data.name}`,open:!0,direction:"ne"}),(0,r.jsx)(v.G.SubTree,{state:M?"loading":W?"error":"done",children:W?(0,r.jsx)(v.G.ErrorDialog,{onRetry:_,onDismiss:U,children:"There was an error loading the folder contents."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O,{clientOnlyFilePaths:e,directoryItems:V,onItemSelected:l,selectedItemRef:c,getItemUrl:o,directoryNavigateOnClick:C,navigateOnClick:C,getFileTrailingVisual:p,getFileIcon:g,selectedChildren:$,expandedPath:b}),H>0&&(0,r.jsx)(L,{message:`${H} entries not shown`})]})})]})}let A=m.memo(N,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function F({clientOnlyFilePaths:e,directoryItems:t,leadingPath:a,inheritsActive:n,onItemSelected:i,selectedItemRef:l,onRenderRow:o,getItemUrl:s,getFileTrailingVisual:c,getFileIcon:d,directoryNavigateOnClick:u,navigateOnClick:h,selectedChildren:f,expandedPath:x}){let y=(0,p.Z)(),v=(0,g.Z)(),C=m.useRef(v),w=m.useRef(i);m.useEffect(()=>{w.current=i,C.current=v},[i,v]);let b=m.useCallback((e,t)=>{w.current?.(e,t)},[]),j=m.useMemo(()=>t.map(t=>{let i=x===t.data.path,m=f?.includes(t.data.path),p=i||x.startsWith(`${t.data.path}/`),g=f?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,r.jsx)(A,{clientOnlyFilePaths:e,isActive:n||i,isAncestorOfActive:p,onItemSelected:b,leadingPath:a,directory:t,getItemUrl:s,getFetchUrl:y.getItemUrl,selectedItemRef:p?l:void 0,navigate:v,onRenderRow:o,navigateOnClick:u,getFileTrailingVisual:c,getFileIcon:d,itemCount:t.items.length,isSelected:m,selectedChildren:g,expandedPath:x},t.data.name):(0,r.jsx)(R,{onItemSelected:b,file:t,isActive:i,getItemUrl:s,selectedItemRef:i?l:void 0,navigate:v,navigateOnClick:h,onRenderRow:o,getFileTrailingVisual:c,getFileIcon:d,isSelected:m},t.data.name)}),[t,x,f,e,n,b,a,s,y.getItemUrl,l,v,o,u,c,d,h]);return(0,r.jsx)(r.Fragment,{children:j})}let O=m.memo(F);function $(e){let{clientOnlyFilePaths:t,rootItems:a,fetchError:i,loading:l,onRenderRow:o,getItemUrl:s,getFileTrailingVisual:c,getFileIcon:d,expandedPath:u,onSelectionChange:h}=e,[f,p]=(0,m.useReducer)(S,new Set),x=e.selectedItems||f,y=(0,m.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let a of e.items)for(let e of y(a))t.add(e);return Array.from(t)},[]),g=(0,m.useCallback)((e,t)=>{let a=t?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};h?h(S(x,a)):p(a)},[h,x]),C=(0,m.useCallback)((e,t)=>{let a=y(e),r=t?{type:"DESELECT_DIRECTORY",paths:a}:{type:"SELECT_DIRECTORY",paths:a};h?h(S(x,r)):p(r)},[y,h,x]),b=(0,m.useCallback)((e,t)=>{if("directory"===e.contentType){let e=y(t).every(e=>x.has(e));C(t,e)}else g(e.path,x.has(e.path))},[y,C,g,x]),j=(0,m.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,r.jsx)(n.A,{onMouseDown:j,sx:{...e.sx},"data-testid":"repos-file-tree-container",children:l?(0,r.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,r.jsx)(w.A,{"aria-label":"Loading file tree"})}):(0,r.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,r.jsxs)(v.G,{"aria-label":"Files",children:[i&&(0,r.jsx)(L,{message:"Some files could not be loaded."}),(0,r.jsx)(O,{clientOnlyFilePaths:t,directoryItems:a,onItemSelected:b,selectedChildren:x?Array.from(x):[],selectedItemRef:e.selectedItemRef,onRenderRow:o,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:s,getFileTrailingVisual:c,getFileIcon:d,expandedPath:u})]})})})}function L({message:e}){return(0,r.jsxs)(v.G.Item,{id:"error-tree-row",children:[(0,r.jsx)(v.G.LeadingVisual,{children:(0,r.jsx)(b.A,{icon:d.AlertFillIcon,sx:{color:"attention.fg"}})}),(0,r.jsx)(n.A,{sx:{color:"fg.muted"},children:e||"Couldn't load."})]})}try{E.displayName||(E.displayName="WrappedFileTreeRow")}catch{}try{R.displayName||(R.displayName="FileTreeRow")}catch{}try{T.displayName||(T.displayName="MemoizedCheckbox")}catch{}try{N.displayName||(N.displayName="WrappedDirectoryTreeRow")}catch{}try{A.displayName||(A.displayName="DirectoryTreeRow")}catch{}try{F.displayName||(F.displayName="WrappedDirectoryContents")}catch{}try{O.displayName||(O.displayName="DirectoryContents")}catch{}try{$.displayName||($.displayName="FileTreePicker")}catch{}try{L.displayName||(L.displayName="ErrorTreeRow")}catch{}var P=a(61818),_=a(17908),D=a(23832),V=a(14194),M=a(69197),W=a(53949),U=a(73412),G=a(7911),q=a(69252),H=a(5796),z=a(17774),K=a(61663),Y=a(69676),Q=a(82678),Z=a(65481),B=a(8338),X=a(34614),J=a(85349),ee=a(91385),et=a(70170),ea=a(6262),er=a(47584),en=a(9591);let ei=m.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:a,ariaHasPopup:i,onBlur:l,onFocus:o,onKeyDown:s,onPreload:c,onSearch:u,query:h,searchPlaceholder:p,sx:x},y)=>{let{sendRepoClickEvent:g}=(0,f.T)(),[v,C]=m.useState(h),w=m.useRef((0,et.s)(e=>u(e),250));m.useEffect(()=>{C(h)},[h]);let b=h?(0,r.jsx)(en.A.Action,{onClick:()=>{g("FILE_TREE.CANCEL_SEARCH"),u("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,r.jsx)(en.A,{autoFocus:el(),ref:y,value:v,onKeyDown:s,onChange:e=>{C(e.target.value),c(),w.current(e.target.value)},sx:{display:"flex",...x},"aria-label":p||"Go to file","aria-activedescendant":e,role:i?"combobox":void 0,"aria-controls":t,"aria-expanded":a,"aria-haspopup":i?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:p||"Go to file",leadingVisual:d.SearchIcon,trailingAction:b,trailingVisual:b?void 0:()=>(0,r.jsx)(ea.E,{children:(0,r.jsx)(n.A,{sx:{mr:"-6px"},children:(0,r.jsx)("kbd",{children:"t"})})}),onFocus:e=>{c(),e.target.select(),o?.(e)},onBlur:l,onClick:()=>g("FILE_TREE.SEARCH_BOX")})});function el(){return"1"===new URLSearchParams(er.fV.search).get("search")}ei.displayName="FilesSearchBox";let eo={excludeDirectories:!1,excludeSeeAllResults:!1};function es({actionListSx:e,additionalResults:t,commitOid:a,config:i=eo,findFileWorkerPath:l,getItemUrl:o,onRenderRow:s,onItemSelected:c,searchBoxRef:d,sx:u}){let{excludeDirectories:x,excludeSeeAllResults:y}=i,{query:v,setQuery:C}=(0,D.JS)(),w=(0,_.t)(),b=m.useRef(null),j=d??b,[I,k]=m.useState(v.length>0),[S,E]=m.useState(!!v),{list:R,directories:T,loading:N,error:A}=(0,h.o)(a,I,!!x),{path:F}=(0,V.eu)(),{getUrl:O}=(0,p.Z)(),{queryText:$,queryLine:L}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(v),{matches:P,clearMatches:M}=function(e,t,a,r){let[n,i]=m.useState(),l=m.useRef(""),o=m.useRef(),{sendStats:s}=(0,f.T)(),c=m.useRef(!1),d=m.useCallback(()=>{let e=new U.z(a,G.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),l.current=e.query,e.startTime&&s("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},o.current=e},[s,a]);return m.useEffect(()=>{if(r)return d(),function(){o.current?.terminate()}},[d,r]),m.useEffect(()=>{if(e.length&&t){c.current&&(o.current?.terminate(),d());let a=l.current&&t.startsWith(l.current);c.current=!0,o.current?.postMessage({baseList:a&&n||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:n,clearMatches:()=>i(void 0)}}((0,m.useMemo)(()=>[...R,...t??[]].sort(),[t,R]),$,l,I),{sendRepoClickEvent:W}=(0,f.T)(),z=(0,g.Z)(),[ee,et]=m.useState(0),[ea,er]=m.useState(()=>el()),en=m.useRef(null),es=m.useRef(null),ed="file-results-list",{sendRepoKeyDownEvent:eu}=(0,f.T)(),{screenSize:em}=(0,K.lm)(),ef=i.enableOverlay??em>=K.Gy.large,ep=m.useCallback(e=>{W("FILE_TREE.SEARCH_RESULT_CLICK"),c?.(e),E(!1)},[W,c]),ex=(e,t,a)=>o?o(e,t,a):O({path:e,action:t?"tree":"blob",hash:a}),{containerRef:ey}=(0,Q.G)({bindKeys:Y.z0.ArrowVertical|Y.z0.HomeAndEnd,focusInStrategy:"previous"},[N,A]);m.useEffect(()=>{v||E(!1)},[v]),m.useEffect(()=>{document.activeElement!==j.current&&ef&&E(!1)},[F,j,ef]);let eg=P?.slice(0,40)||[],ev=P&&P.length>eg.length,eC=!i.disableNavigation,ew=(0,r.jsx)(n.A,{sx:{maxHeight:ef?"60vh":"100% !important",overflowY:"auto",scrollbarGutter:"stable",maxWidth:"100vw"},children:A?(0,r.jsx)(Z.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,r.jsxs)(B.l,{ref:ey,sx:{overflow:"auto",p:ef?2:3,width:"100%",pr:ef?3:0,pt:ef?3:"2px !important",...e},role:"listbox",children:[!N&&eg.map((e,t)=>{let a=T.includes(e),n=ex(e,a,L?`L${L}`:"");return(0,r.jsx)(eh,{active:e===F,index:t,focused:ea&&ee===t,match:e,onRender:s,query:$,onClick:ep,isDirectory:a,to:n,useOverlay:ef,listRef:ey,noAnchor:i.disableNavigation,actionText:i.actionText},e)}),(0,r.jsxs)("div",{className:"m-3 text-center",children:[(0,r.jsx)(ec,{loading:N||!P,visibleResultCount:eg.length,truncated:!!ev}),ev&&!y&&(0,r.jsxs)(r.Fragment,{children:["\xa0",(0,r.jsx)(X.A,{id:"see-all-results-link",className:"focus-visible",ref:en,href:(0,H.Y8Y)({owner:w.ownerLogin,repo:w.name,searchTerm:`path:${$}`}),sx:ea&&ee===eg.length?{outline:"2px solid var(--focus-outlineColor, var(--color-accent-fg))",outlineOffset:"-2px",boxShadow:"none"}:{},children:"See all results"})]})]})]})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{ref:es,sx:{mx:2,...u},children:(0,r.jsx)(ei,{ariaActiveDescendant:(!ef&&v||ef&&S)&&ea&&ee>-1?ev&&ee===eg.length?"see-all-results-link":`file-result-${ee}`:void 0,ariaExpanded:ef?S:void 0,ariaHasPopup:ef,ariaControls:ef?ed:void 0,ref:j,query:v,onKeyDown:e=>{let{key:t,shiftKey:a,metaKey:r,altKey:n,ctrlKey:i}=e;if(!a&&!r&&!n){if("Escape"===t)v?(eu("FILE_TREE.CANCEL_SEARCH"),C(""),M()):document.activeElement&&document.activeElement.blur();else if(!v)return;else if("Enter"===t){if(!y&&ev&&ee===eg.length)eC&&z((0,H.Y8Y)({owner:w.ownerLogin,repo:w.name,searchTerm:`path:${$}`})),c?.();else if(eg[ee]){let e=eg[ee];eC&&z(ex(eg[ee],!1,L?`L${L}`:"")),E(!1),c?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!y&&ev&&ee>=eg.length-1){if(et(eg.length),en.current&&ey.current){let e=(0,q.U)(ey.current);(0,Y.Rt)(en.current,e,{behavior:"instant"})}}else et(Math.min(ee+1,eg.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){et(Math.max(ee-1,0)),e.preventDefault();return}}},onPreload:()=>k(!0),onSearch:e=>{C(e),e?E(!0):(M(),E(!1)),et(0)},onBlur:e=>{ey.current?.contains(e.relatedTarget)||(E(!1),er(!1))},onFocus:()=>{v&&E(!0),er(!0)},searchPlaceholder:i.searchPlaceholder,sx:{minWidth:"160px"}})}),ef&&(0,r.jsx)(J.T,{anchorRef:es,open:ef&&S,renderAnchor:null,onClose:()=>{E(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},width:"xlarge",align:"end",overlayProps:{id:ed,role:"dialog"},children:ew}),!ef&&v&&ew]})}function ec({visibleResultCount:e,truncated:t,loading:a}){return(0,r.jsx)("span",{role:"status",className:a||t||0===e?void 0:"sr-only","aria-label":a?"Loading":void 0,children:a?(0,r.jsx)(w.A,{size:"large"}):0===e?"No matches found":t?`First ${e} files shown.`:`Showing ${e} files.`},"results-count-status")}let ed=({active:e,focused:t,index:a,match:i,query:l,to:o,isDirectory:s,onClick:c,onRender:d,useOverlay:u,listRef:h,noAnchor:f,actionText:p})=>{let x=(0,ee.Xq)(l,i);d?.();let y=m.useRef(null);m.useEffect(()=>{if(t&&y.current&&h?.current){let e=(0,q.U)(h.current);(0,Y.Rt)(y.current,e,{behavior:"instant"})}},[t,h]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let v={id:`file-result-${a}`,active:e,onSelect:(0,m.useCallback)(()=>{c?.(i)},[i,c]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...g},role:"option","data-focus-visible-added":t||void 0,tabIndex:u?-1:0},C=(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,r.jsx)(ef,{text:i,positionsList:x,sx:{color:"fg.muted"},LeadingIcon:s?eu:em})}),t&&(0,r.jsx)(n.A,{sx:{pl:1,whiteSpace:"nowrap",color:"fg.muted"},children:f?p:`Go to ${s?"folder":"file"}`})]});return f?(0,m.createElement)(B.l.Item,{...v,key:i},C):(0,m.createElement)(B.l.Item,{...v,ref:y,as:z.N,to:o,key:i},C)},eu=()=>(0,r.jsx)(b.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,sx:{color:"var(--treeViewItem-leadingVisual-iconColor-rest, var(--color-icon-directory))",mr:2},size:"small"}),em=()=>(0,r.jsx)(b.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),eh=m.memo(ed);function ef({text:e,positionsList:t,sx:a,LeadingIcon:i}){let l=[],o=0;for(let a of t){if(Number(a)!==a||a<o||a>e.length)continue;let t=e.slice(o,a);t&&l.push(ep(t)),o=a+1,l.push((0,r.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:e[a]},a))}return l.push(ep(e.slice(o))),(0,r.jsx)(n.A,{sx:a,children:(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(i,{}),l]})})}function ep(e){return e.replaceAll("/","/\u200B")}try{es.displayName||(es.displayName="FileResultsList")}catch{}try{ec.displayName||(ec.displayName="FileResultsStatus")}catch{}try{ed.displayName||(ed.displayName="FileResultRow")}catch{}try{eu.displayName||(eu.displayName="DirectoryIcon")}catch{}try{em.displayName||(em.displayName="FileResultIcon")}catch{}try{eh.displayName||(eh.displayName="MemoizedFileResultRow")}catch{}try{ef.displayName||(ef.displayName="HighlightMatch")}catch{}var ex=a(26556);function ey({currentRepo:e,setLocalFormData:t,fetchError:a,onFileCountChange:i,processingTime:l,expandedPath:o}){let[s,c]=(0,m.useState)(new Set),[d,u]=(0,m.useState)(new Set),{list:f,directories:p,loading:x}=(0,h.o)(e.commitOID,!0),[y,g]=(0,m.useState)([]);(0,m.useEffect)(()=>{g(function e(t,a){let r=t[a];return r?r.items.map(a=>({data:a,items:"directory"===a.contentType?e(t,a.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:a}=e,r={},n=new Set(a);for(let e of(r[""]={items:[],totalCount:0},[...a].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(a),r[e]||(r[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!n.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(a)}for(let e in r){let t=r[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=r[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in r){let t=r[e];t&&(t.totalCount=i(e))}return r}({paths:f,directories:p}),"")),u(new Set(p))},[f,p,g,e.commitOID]),(0,m.useEffect)(()=>{let a=Array.from(s).filter(e=>!d.has(e));i?.(a.length),t(a.map(t=>({id:`${e.id}-${t}`,repositoryId:e.id,nwo:`${e.ownerLogin}/${e.name}`,filePath:t,type:"github_file"})))},[s,d,e,t,i]);let v=(0,m.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.A,{sx:{flexGrow:1,maxHeight:"100% !important",minHeight:"300px",overflowY:"auto",scrollbarGutter:"stable"},children:(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"react-tree-show-tree-items",children:(0,r.jsx)($,{rootItems:y,expandedPath:o,selectedItemRef:()=>{},setRootItems:g,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:s,onSelectionChange:c,processingTime:l,loading:x||!1,fetchError:!!a,getItemUrl:v,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})})})})}function eg({onClose:e}){return(0,r.jsx)(i.K,{icon:d.XIcon,"aria-label":"Close add file dialog",onClick:e,variant:"invisible"})}function ev({formData:e,onCancel:t,onSave:a,findFileWorkerPath:n,attachmentButtonRef:h,openRepoPanel:f,customCopilot:p}){let[x,y]=(0,m.useState)({}),[g,v]=(0,m.useState)(null),[C,w]=(0,m.useState)(null),[b,j]=(0,m.useState)(f),[I,k]=(0,m.useState)(e),[S]=(0,m.useState)(0),[E,R]=(0,m.useState)(!1),[T,N]=(0,m.useState)(null),[A,F]=(0,m.useState)(""),[O,$]=(0,m.useState)(0),L=(0,m.useRef)(!1),U=async e=>{let t;if(L.current=!0,x[e]){w(t=x[e]);return}try{let a=await (0,u.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!a.ok){v(`Failed to fetch repository details: ${a.status}`);return}t=await a.json(),y(a=>({...a,[e]:t})),w(t),j(!1)}catch(e){v(e instanceof Error?e.message:"An unknown error occurred")}L.current=!1},G=()=>{w(null),k([]),j(!0)},q=O>50,H=async()=>{if(R(!0),q){R(!1);return}try{await a(I)}catch(t){let e="An unknown error occurred";t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base&&(e=t.base),e.startsWith("The size of the space exceeds the current limit")&&(e="The size of the space exceeds the current limit"),N(e)}finally{R(!1)}};async function z(){let e="";p?.ownerIsOrg&&(e=`owner:${p?.owner}`);let t=await (0,u.lS)(`/_filter/repositories?q=${encodeURIComponent(e)}`);return t.ok?(await t.json()).repositories.map(e=>({name:e.nameWithOwner,enabled:!0,id:e.id})):[]}return(0,m.useEffect)(()=>{N(null)},[I]),f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.X1,{selectionVariant:"instant",open:!C&&b,onOpenChange:e=>{L.current||(j(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(k([]),await U(e))},cancelReturnFocusRef:h,submitReturnFocusRef:h,error:g??void 0,ownerDisplayLogin:p?.ownerIsOrg?p?.owner:""}),C&&(0,r.jsx)(l.l,{onClose:t,title:`Add files from ${C.ownerLogin}/${C.name}`,sx:{maxHeight:"600px","@media screen and (max-width: 768px)":{maxHeight:"unset"}},width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e})=>(0,r.jsxs)(l.l.Header,{children:[(0,r.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center px-2",children:[(0,r.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,r.jsx)(i.K,{icon:d.ArrowLeftIcon,"aria-label":"Back to repository selection",onClick:G,variant:"invisible"}),(0,r.jsx)("span",{className:"color-fg-muted",children:(0,r.jsxs)(o.A,{title:`${C.ownerLogin}/${C.name}`,children:[C.ownerLogin,"/",C.name]})}),"\xa0",(0,r.jsx)(l.l.Title,{children:"Select files"})]}),(0,r.jsx)(eg,{onClose:()=>e("close-button")})]}),(0,r.jsx)(l.l.Subtitle,{children:(0,r.jsx)(_.d,{repository:C,children:(0,r.jsx)(D.Ck,{children:(0,r.jsx)(V.qV,{refInfo:{name:C.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:C.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(M.$,{allShortcutsEnabled:!1,children:(0,r.jsx)(es,{commitOid:C.commitOID,findFileWorkerPath:n,onItemSelected:e=>{e&&F(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,r.jsxs)(l.l.Footer,{children:[(0,r.jsx)("div",{className:"d-flex flex-items-center",children:q?(0,r.jsxs)(s.A.Validation,{variant:"error",children:["Up to ",50," files can be added at a time."]}):T?(0,r.jsx)(s.A.Validation,{variant:"error",children:T}):null}),(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,r.jsx)(c.Q,{onClick:t,children:"Cancel"}),(0,r.jsx)(c.Q,{...(0,W.G)("save-resource-button"),variant:"primary",onClick:H,count:O||void 0,loading:E,children:"Add files"})]})]}),children:(0,r.jsxs)("div",{className:"d-flex flex-column",children:[g&&(0,r.jsx)("span",{children:g}),(0,r.jsx)(_.d,{repository:C,children:(0,r.jsx)(D.Ck,{children:(0,r.jsx)(V.qV,{refInfo:{name:C.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:C.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(ey,{expandedPath:A,currentRepo:C,localFormData:I,setLocalFormData:k,onFileCountChange:$,fetchError:g,processingTime:S})})})})]})})]}):(0,r.jsx)(l.l,{onClose:t,title:C?`Add files from ${C.ownerLogin}/${C.name}`:"Add files",sx:{maxHeight:"500px"},renderHeader:({onClose:e})=>(0,r.jsxs)(l.l.Header,{children:[(0,r.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center px-2",children:[(0,r.jsx)(l.l.Title,{children:C?`Add files from ${C.ownerLogin}/${C.name}`:"Add files"}),(0,r.jsx)(eg,{onClose:()=>e("close-button")})]}),(0,r.jsx)(l.l.Subtitle,{children:C&&(0,r.jsx)(_.d,{repository:C,children:(0,r.jsx)(D.Ck,{children:(0,r.jsx)(V.qV,{refInfo:{name:C.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:C.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(M.$,{allShortcutsEnabled:!1,children:(0,r.jsx)(es,{commitOid:C.commitOID,findFileWorkerPath:n,onItemSelected:e=>{e&&F(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,r.jsxs)(l.l.Footer,{children:[(0,r.jsx)("div",{className:"d-flex flex-items-center",children:q?(0,r.jsxs)(s.A.Validation,{variant:"error",children:["A maximum of ",50," files can be added."]}):T?(0,r.jsx)(s.A.Validation,{variant:"error",children:T}):null}),(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,r.jsx)(c.Q,{onClick:t,children:"Cancel"}),(0,r.jsx)(c.Q,{...(0,W.G)("save-resource-button"),variant:"primary",onClick:H,count:O||void 0,loading:E,children:"Add files"})]})]}),children:(0,r.jsxs)("div",{className:"d-flex flex-column",children:[g&&(0,r.jsx)("span",{children:g}),!C&&(0,r.jsx)("div",{children:(0,r.jsx)(ex.P,{repositoryLoader:z,selectionVariant:"single",selectAllOption:!1,currentSelection:void 0,onSelect:e=>{e&&(k([]),U(e.id))},buttonText:I[0]?.nwo||"Select repository"})}),C&&(0,r.jsx)(_.d,{repository:C,children:(0,r.jsx)(D.Ck,{children:(0,r.jsx)(V.qV,{refInfo:{name:C.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:C.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(ey,{expandedPath:A,currentRepo:C,localFormData:I,setLocalFormData:k,onFileCountChange:$,fetchError:g,processingTime:S})})})})]})})}try{ey.displayName||(ey.displayName="FilePickerForm")}catch{}try{eg.displayName||(eg.displayName="CloseButton")}catch{}try{ev.displayName||(ev.displayName="MultiFilePicker")}catch{}},26556:(e,t,a)=>{a.d(t,{P:()=>d,w:()=>u});var r=a(74848),n=a(96540),i=a(38621),l=a(30631),o=a(55847),s=a(70170),c=a(3893);function d({currentSelection:e,repositoryLoader:t,onSelect:a,selectionVariant:d,selectAllOption:u,additionalButtonProps:m,buttonText:h=""}){let[f,p]=(0,n.useState)(""),[x,y]=(0,n.useState)([]),[g,v]=(0,n.useState)(!0),C=(0,n.useCallback)((0,s.s)(async e=>{try{let a=await t(e);y(a)}catch{}v(!1)},200),[t,y,v]);(0,n.useEffect)(()=>{v(!0),C(f)},[f,C,v]);let w=(0,n.useCallback)(e=>{"single"===d?!e[0]||e[0]._all?a(void 0):a(e[0]):a(e)},[d,a]),b=(0,n.useMemo)(()=>"multiple"===d?e||[]:e?[e]:[],[d,e]),j=(0,n.useCallback)(e=>{let t;return(e.name.length>24&&(t=`${e.name.substring(0,24)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,appendOnly:!1,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,r.jsx)(i.RepoLockedIcon,{size:16}):(0,r.jsx)(i.RepoIcon,{size:16})}},[]),I=(0,n.useCallback)(e=>e.name,[]),k=(0,n.useMemo)(()=>{let e=[];e.push(...x);let t=b.filter(t=>e.every(e=>e.name!==t.name))||[];return e.push(...t),u&&e.push({name:"$all$",_all:!0}),e},[x,u,b]),S=h,E=i.RepoIcon;return S||("multiple"===d?S=b.length>0?`${b.length} repositor${b.length>1?"ies":"y"}`:"Select repositories":b.length>0&&b[0]?(S=b[0].name,E=b[0].private?i.RepoLockedIcon:i.RepoIcon):S=u?"All repositories":"Select a repository"),(0,r.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,r.jsx)(o.Q,{leadingVisual:E,trailingAction:i.TriangleDownIcon,"aria-labelledby":` ${e}`,...t,...m,children:(0,r.jsx)(l.A,{title:S,maxWidth:195,children:S})}),placeholderText:"Repos",items:k,loading:g,groups:u?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:d,initialSelectedItems:b,onSelectionChange:w,filterItems:p,getItemKey:I,convertToItemProps:j})}function u(e){return async t=>{let a=t.trim().toLowerCase();return a?e.filter(e=>e.name.toLowerCase().includes(a)||e.name.toLowerCase().includes(a)):e}}try{d.displayName||(d.displayName="ReposSelector")}catch{}}}]);
//# sourceMappingURL=ui_packages_custom-copilots_components_MultiFilePicker_tsx-21568d9b06ac.js.map