"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-immersive-v1","ui_packages_code-mirror_CodeMirror_tsx","ui_packages_code-mirror_autocomplete_theme_ts-ui_packages_code-mirror_extensions_help-panels_-d428aa","ui_packages_failbot_failbot_ts"],{56176:(e,t,n)=>{let a;function i(){if(!a)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return a}function r(){return a?.locale??"en-US"}function o(){return!!i().login}n.d(t,{JK:()=>r,M3:()=>o,_$:()=>i}),!function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{a=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},48741:(e,t,n)=>{n.d(t,{E:()=>a});let a=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},48031:(e,t,n)=>{n.d(t,{G:()=>i});var a=n(24774);function i(e=null,t="bottom"){return[a.S7.of(()=>({dom:e,top:"top"===t}))]}},42378:(e,t,n)=>{n.d(t,{BE:()=>s,Cw:()=>N,I6:()=>C,Lo:()=>d,Md:()=>f,TB:()=>j,TC:()=>_,TU:()=>m,YH:()=>g,Z3:()=>p,eO:()=>v,e_:()=>x,f9:()=>l,fV:()=>h,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>b});var a=n(15874),i=n(54528),r=n(6585),o=n(24774);let s=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let h=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let a=h(e,t);x(e,a.from,a.from,n)},g=(e,t,n)=>{let a=h(e,t);x(e,a.from,a.from+n.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},v=(e,t,n)=>e.sliceDoc(t,n),x=(e,t,n,a)=>{e.dispatch({changes:{from:t,to:n,insert:a}})},_=(e,t)=>{let n=s(e);x(e,n.from,n.to,t)},C=(e,t)=>new i.ZX(e.state.doc,t).next(),j=(e,t,n)=>{let a=new i.ZX(e.state.doc,t).next();e.dispatch({changes:{from:a.value.from,to:a.value.to,insert:n}})},b=(e,t,n,a,i)=>{if(void 0!==n)try{let s=h(e,t),l=h(e,n);if(s&&l){e.focus();let t=i?l.from+i:l.to;u(e,s.from+(a??0),t),e.dispatch({effects:[o.Lz.scrollIntoView(r.OF.range(s.from,l.to),{y:"center"})]})}}catch{}else try{let n=h(e,t);n&&(e.focus(),l(e,n.from+(a??0)),e.dispatch({effects:[o.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function N(e){return e.state.facet(a.Xt)}},54533:(e,t,n)=>{n.d(t,{LU:()=>o,SI:()=>d,by:()=>c,g:()=>u,oR:()=>m,oy:()=>r,wt:()=>l});var a=n(82610),i=n(77342);function r(e){return e.split("#")[0]}function o(e,t){let n=r(e),a=t.get(n)??[],i=a.indexOf(e);return a.length>1&&-1!==i?i+1:null}function s(e,t){return`file:${e.name}#${t}`}function l(e,t,n){switch(e.type){case"thread-scoped-file":return o(s(e,t),n)??void 0;case"thread-scoped-issue":return o(m({ref:e,messageIndex:t}).id,n)??void 0}}function c(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??i.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function d(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??i.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function u(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":return{type:"thread-scoped-issue",tag:e.tag,title:e.name,description:e.body,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:e.projects,milestone:e.milestone};default:return null}}function m({ref:e,messageIndex:t,messageId:n,timestamp:a}){switch(e.type){case"thread-scoped-file":return function(e,t,n=i.Wp,a){return{type:"file",id:s(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:a?new Date(a):new Date,isStreaming:!1,isUserEdited:n===i.Wp}}(e,t,n,a);case"thread-scoped-issue":return function({ref:e,messageId:t=i.Wp,messageIndex:n}){return{type:"new-issue",id:`new-issue:${e.tag}#${n}`,tag:e.tag,repository:e.repository,name:e.title,body:e.description,assignees:e.assignees??[],labels:e.labels??[],issueType:e.issueType,projects:e.projects??[],milestone:e.milestone,isUserEdited:t===i.Wp,messageId:t,isStreaming:!1,template:e.template}}({ref:e,messageIndex:t,messageId:n});default:return null}}},48009:(e,t,n)=>{var a,i,r,o=n(21253),s=n(56413),l=n(66144),c=n(74848);function d(e){return(0,c.jsx)(c.Fragment,{children:e.children})}try{d.displayName||(d.displayName="App")}catch{}var u=n(44848),m=n(82610),p=n(2622),h=n(65615),f=n(77097),g=n(38359),y=n(79760),v=n(61663),x=n(21728),_=n(2497),C=n(47584),j=n(38621);let b="spark",N=`${m.Jz}/spark`;function I(e){let t,n;let a=(0,x.c)(4),{onLinkClick:i}=e;a[0]!==i?(t=(e,t)=>{i?.(e,t)},a[0]=i,a[1]=t):t=a[1];let r=t;return a[2]!==r?(n=(0,c.jsx)(_.Vx,{"aria-current":C.fV.pathname===N?"page":void 0,displayName:"Spark",href:N,icon:j.SparkleFillIcon,id:b,onLinkClick:r}),a[2]=r,a[3]=n):n=a[3],n}try{I.displayName||(I.displayName="SparkNavigation")}catch{}var S=n(26443),w=n(38568),E=n(84217),T=n(19647),k=n(87330),A=n(46309),P=n(96540),L=n(13253);let D={stack:"SparkView-module__stack--uJy9d",icon:"SparkView-module__icon--a_7ZO",description:"SparkView-module__description--P3jqh",formContainer:"SparkView-module__formContainer--UuPM6",promptInputContainer:"SparkView-module__promptInputContainer--V8jwO",formContainerActions:"SparkView-module__formContainerActions--LBFu1"};function R(){let{spark:e}=(0,g.X)(),[t,n]=(0,P.useState)([]),[a,i]=(0,P.useState)(""),[r,o]=(0,P.useState)(!1),[s,l]=(0,P.useState)(!1),d=(0,P.useRef)(null),u=(0,P.useRef)(null);(0,P.useEffect)(()=>{var t;if(Array.isArray(t=e.icebreakers)&&t.every(e=>"type"in e&&"data"in e)){let t=e.icebreakers.find(e=>"functional"===e.type);t&&t.data.length>0&&n(t.data.sort(()=>.5-Math.random()).slice(0,3))}},[e.icebreakers]);let m=e=>{let t=new URL(window.location.href,window.location.origin);return t.pathname="/copilot/spark/new",t.searchParams.set("initialPrompt",e),t.toString()};(0,w.N)(()=>{let e=0;!function t(){if(!d.current||!u.current)return;let n=u.current.scrollTop;e++,0===d.current.scrollHeight&&e<10&&setTimeout(t,1),d.current.style.height="0";let a=d.current.scrollHeight,i=Math.min(Math.max(a,120),300);d.current.style.height=`${a}px`,u.current.style.height=`${i}px`,u.current.scrollTop=n}()},[a,d]);let p=e=>{if(s)return;let t=e??a;""!==t.trim()&&(l(!0),window.location.href=m(t))};return(0,c.jsx)(S.A.Container,{children:(0,c.jsxs)(A.B,{direction:"vertical",align:"center",padding:"normal",className:D.stack,children:[(0,c.jsx)(j.SparkleFillIcon,{size:40,className:D.icon}),(0,c.jsx)(E.A,{as:"h1",className:"text-center",children:"Build it. Publish it. Share it."}),(0,c.jsx)("p",{className:D.description,children:"Tell Spark what you want to build. It creates your website or app, helps you customize the look, commits directly to a repository, and publishes online. Easy to theme, easier to share."}),(0,c.jsxs)("div",{ref:u,className:D.formContainer,children:[(0,c.jsx)(T.Ay,{autoFocus:!0,className:D.promptInputContainer,placeholder:"What do you want to create?",ref:d,value:a,onChange:e=>{let t=e.target.value;i(t),o(t.trim().length>0)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||e.nativeEvent.isComposing||(e.preventDefault(),p())},resize:"none"}),(0,c.jsx)("div",{className:D.formContainerActions,children:(0,c.jsx)(k.K,{onClick:()=>p(),icon:j.PaperAirplaneIcon,"aria-label":"Submit prompt","data-testid":"submit-prompt",tooltipDirection:"n",variant:"invisible",loading:s,loadingAnnouncement:"Generating spark",disabled:!r})})]}),(0,c.jsx)(A.B,{direction:"horizontal",wrap:"wrap",gap:"condensed",align:"center",children:t&&t.map(e=>(0,c.jsx)(L.Z,{titleHtml:e.titleHtml,icon:e.icon,color:e.color,onClick:()=>p(e.message)},e.id))})]})})}try{R.displayName||(R.displayName="SparkView")}catch{}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let SparkPlugin=class SparkPlugin{constructor(){O(this,"id",b),O(this,"displayName","Spark"),O(this,"ViewComponent",R),O(this,"NavigationComponent",I)}};var M=n(18312),B=n(88104),F=n(8932),U=n(46988),$=n(10871),V=n(37827);let z={container:"ImmersiveDisabled-module__container--EDOnQ",content:"ImmersiveDisabled-module__content--dpYC9",footer:"ImmersiveDisabled-module__footer--xPpOC",bannerContainer:"ImmersiveDisabled-module__bannerContainer--Y_iqm"};function W(){return(0,c.jsxs)("div",{className:z.container,children:[(0,c.jsx)("div",{className:z.content,children:(0,c.jsx)(F.A,{})}),(0,c.jsx)("div",{className:z.footer,children:(0,c.jsx)("div",{className:z.bannerContainer,children:(0,c.jsx)(V.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,c.jsx)($.z,{as:"a",href:"https://github.com/settings/copilot",onClick:()=>(0,U.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"}),children:"Settings"})})})})]})}try{W.displayName||(W.displayName="ImmersiveDisabled")}catch{}var H=n(88117),q=n(37937),G=n(68956),K=n(97286),Q=n(57572);let Z="/github-copilot/chat",X=["copilot-chat","custom-copilots"];function J(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function Y(){let e=await (0,Q.lS)(`${Z}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${m.nN[e.status]||m.DW}`);return await e.json()}async function ee(e){let t;if(!e)return{status:500,ok:!1,error:"unexpected null custom copilot id"};let{owner:n,id:a}=e;t=n?`${Z}/custom_copilots/${n}/${a}`:`${Z}/custom_copilots/${a}`;let i=await (0,Q.lS)(t);if(!i.ok)return{status:i.status,ok:!1,error:m.nN[i.status]||m.DW};let r=await i.json();return{status:i.status,ok:!0,payload:r}}var et=n(7426);let CustomCopilotNotFoundError=class CustomCopilotNotFoundError extends Error{constructor(e="Custom Copilot not found"){super(e),this.name="CustomCopilotNotFoundError"}};function en(e){return(0,K.I)({queryKey:X,queryFn:Y,enabled:e,staleTime:3e5})}function ea(e){return(0,K.I)({queryKey:J(e),queryFn:async()=>{let t=await ee(e);if(!t.ok){if(404===t.status)throw new CustomCopilotNotFoundError;throw Error(t.error)}return t.payload},enabled:!!e})}var ei=n(34164),er=n(69425),eo=n(12152),es=n(42252),el=n(69676),ec=n(82678),ed=n(89323),eu=n(8338),em=n(71941),ep=n(34614),eh=n(68593);let ef={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--woWrK"};function eg({regionName:e}){return(0,c.jsx)("div",{className:ef.errorFallbackContainer,children:(0,c.jsxs)(eh.A,{children:[(0,c.jsx)(eh.A.Visual,{children:(0,c.jsx)(j.AlertIcon,{size:"medium"})}),(0,c.jsx)(eh.A.Heading,{children:"Something went wrong"}),(0,c.jsxs)(eh.A.Description,{children:[e," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",(0,c.jsx)(ep.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),"."]})]})})}try{eg.displayName||(eg.displayName="ErrorFallback")}catch{}let ey={container:"ContentPreview-module__container--bV98v",toolbar:"ContentPreview-module__toolbar--b58FL",actions:"ContentPreview-module__actions--AGnBu",tabsContainer:"ContentPreview-module__tabsContainer--bNywg",tabs:"ContentPreview-module__tabs--Si9sh",rightDivider:"ContentPreview-module__rightDivider--Ta3Js",leftDivider:"ContentPreview-module__leftDivider--X7WDV",content:"ContentPreview-module__content--o15no"};var ev=n(22418),ex=n(41686),e_=n(64704),eC=n(69930),ej=n(53949),eb=n(12649),eN=n(54533);let eI={anchor:"VersionSelector-module__anchor--HA1Ko"};function eS({item:e,onVersionSelect:t}){let{versionedItems:n,openItem:a}=(0,B.xx)(),i=(0,eN.oy)(e.id),r=n.get(i)??[],o=r.indexOf(e.id);return((0,P.useEffect)(()=>{t&&r.length>1&&t(`Version${o+1}`)},[o,t,r.length]),r.length<=1)?null:(0,c.jsxs)(ed.W,{children:[(0,c.jsx)(ed.W.Button,{variant:"invisible",className:eI.anchor,children:(0,c.jsx)(eb.g,{version:o+1,"data-testid":"version-selector"})}),(0,c.jsx)(ed.W.Overlay,{children:(0,c.jsx)(eu.l,{selectionVariant:"single",children:r.map((n,i)=>(0,c.jsxs)(eu.l.Item,{onSelect:()=>{a(n),t&&t(`Version${i+1}`)},selected:n===e.id,children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(eb.g,{version:i+1})}),"Version ",i+1]},n))})})]})}try{eS.displayName||(eS.displayName="VersionSelector")}catch{}var ew=n(1301),eE=n(4576),eT=n(73218),ek=n(57814),eA=n(28339),eP=n(98830),eL=n(69487),eD=n(46996);function eR(e){let{messages:t}=(0,h.Pk)();return`new-issue:${e}#${t.length}`}function eO(e){let{openItem:t,updateItem:n}=(0,B.xx)(),a=eR(e.tag);return(0,P.useCallback)((i,r=!1)=>{let o,s=!1;for(o in i)if(!(0,eD.A)(i[o],e[o])){s=!0;break}if(!s)return;let l={...e,...i};r||(l.id=a,l.isUserEdited=!0),n(l),t(l.id)},[e,a,t,n])}var eM=n(21878),eB=n(71783),eF=n(55724),eU=n(9935);function e$(e,t){return e?.toLowerCase()===t?.toLowerCase()}function eV({draftIssue:e,onCreate:t,onChange:n,onClose:a,onBeforeCreate:i}){let{name:r,body:o=""}=e,s=(0,P.useRef)(null),{repository:l}=(0,eE.u)(),[d,u]=(0,P.useState)(r),[m,p]=(0,P.useState)(o);return((0,P.useEffect)(()=>{u(r),p(o)},[o,r]),!function(e){let{repository:t,assignees:n,setAssignees:a}=(0,eE.u)(),[i,r]=(0,P.useState)(n),{isLoading:o,data:s}=function({owner:e,repo:t,assignees:n}){let a=(0,M.useRelayEnvironment)(),i=(0,eP.M)({includeAuthorableBots:!1,includeAssignableBots:!0});return(0,K.I)({queryKey:["copilot-immersive-assignees",JSON.stringify(a),i,e,t,n],queryFn:async()=>{if(!e||!t||!n)return[];let r=await (0,y.SD)({environment:a,query:eA.OE,variables:{owner:e,name:t,loginNames:n.join(",")??[],first:n.length??0,capabilities:i}}).toPromise();return(r?.repository?.suggestedActors?.nodes??[]).filter(e=>!!e).map(e=>(0,eL.readInlineData)(eA.G1,e))}})}({owner:t?.owner.login,repo:t?.name,assignees:e.assignees}),l=eO({...e,assignees:s?.map(e=>ek.vM(e.login)?ek.A9:e.login)??[]});(0,P.useEffect)(()=>{!o&&s&&(t?.viewerIssueCreationPermissions?.assignable?a(s):null!=t&&a([]))},[o,s,a,t?.viewerIssueCreationPermissions?.assignable,t]),(0,P.useEffect)(()=>{o||i===n||(l({assignees:n.map(e=>(0,ek.vM)(e.login)?ek.A9:e.login)}),r(n))},[o,i,n,l])}(e),!function(e){let{repository:t,labels:n,setLabels:a}=(0,eE.u)(),[i,r]=(0,P.useState)(n),{isLoading:o,data:s}=function({owner:e,repo:t,labels:n}){let a=(0,M.useRelayEnvironment)();return(0,K.I)({queryKey:["copilot-immersive-labels",JSON.stringify(a),e,t,n],queryFn:async()=>{if(!e||!t||!n)return[];let i=await (0,y.SD)({environment:a,query:eM.uS,variables:{owner:e,repo:t,shouldQueryByNames:!0,labelNames:n.join(","),count:n.length}}).toPromise();return(i?.repository?.labelsByNames?.nodes??[]).filter(e=>!!e).map(e=>(0,eL.readInlineData)(eM.l_,e))}})}({owner:t?.owner.login,repo:t?.name,labels:e.labels}),l=eO({...e,labels:s?.map(e=>e.name)??[]});(0,P.useEffect)(()=>{!o&&s&&(t?.viewerIssueCreationPermissions?.labelable?a(s):null!=t&&a([]))},[o,s,a,t?.viewerIssueCreationPermissions?.labelable,t]),(0,P.useEffect)(()=>{o||i===n||(l({labels:n.map(e=>e.name)}),r(n))},[o,i,n,l])}(e),!function(e){let{repository:t,issueType:n,setIssueType:a}=(0,eE.u)(),[i,r]=(0,P.useState)(n),{isLoading:o,data:s}=function({owner:e,repo:t}){let n=(0,M.useRelayEnvironment)(),[a,i]=(0,P.useState)(!0),[r,o]=(0,P.useState)(!1),[s,l]=(0,P.useState)(null);(0,P.useEffect)(()=>{(0,y.SD)({environment:n,query:eU.xS,variables:{owner:e,repo:t,issueTypesPageSize:25}}).subscribe({next:e=>{l(e.repository??null),i(!1),o(!1)},error:()=>{o(!0),i(!1)}})},[n,e,t]);let c=(0,M.useFragment)(eU.Jc,s);return{isLoading:a,isError:r,data:(0,P.useMemo)(()=>c?.issueTypes?.edges?.flatMap(e=>e?.node?[eL.readInlineData(eU.sH,e.node)]:[])||[],[c])}}({owner:t?.owner.login,repo:t?.name}),l=(0,P.useMemo)(()=>!e.issueType||o?null:s?.find(t=>e$(t.name,e.issueType)),[e.issueType,o,s]),c=eO({...e,issueType:l?.name});(0,P.useEffect)(()=>{l&&(t?.viewerIssueCreationPermissions?.typeable?a(l):null!=t&&a(null))},[l,a,t?.viewerIssueCreationPermissions?.typeable,t]),(0,P.useEffect)(()=>{o||e$(i?.name,n?.name)||(c({issueType:n?.name}),r(n))},[o,i,n,c])}(e),!function(e){let{repository:t,milestone:n,setMilestone:a}=(0,eE.u)(),[i,r]=(0,P.useState)(n),{isLoading:o,data:s}=function({owner:e,repo:t,milestone:n}){let a=(0,M.useRelayEnvironment)();return(0,K.I)({queryKey:["copilot-immersive-milestones",JSON.stringify(a),e,t,n],queryFn:async()=>{if(!e||!t||!n)return null;let i=await (0,eL.fetchQuery)(a,eB.KK,{owner:e,repo:t,query:n,count:1}).toPromise();return(i?.repository?.milestones?.nodes||[]).filter(e=>!!e).map(e=>(0,eL.readInlineData)(eB.xm,e))[0]??null}})}({owner:t?.owner.login,repo:t?.name,milestone:e.milestone}),l=eO({...e,milestone:s?.title});(0,P.useEffect)(()=>{!o&&s&&(t?.viewerIssueCreationPermissions?.milestoneable?a(s):null!=t&&a(null))},[o,s,a,t?.viewerIssueCreationPermissions?.milestoneable,t]),(0,P.useEffect)(()=>{var e,t;o||(e=i?.title,t=n?.title,e?.toLowerCase()===t?.toLowerCase())||(l({milestone:n?.title}),r(n))},[o,i,n,l])}(e),!function(e){let{repository:t,projects:n,setProjects:a}=(0,eE.u)(),[i,r]=(0,P.useState)(n),{isLoading:o,data:s}=function({owner:e,repo:t,projects:n}){let a=(0,M.useRelayEnvironment)();return(0,K.I)({queryKey:["copilot-immersive-projects",JSON.stringify(a),e,t,n],queryFn:async()=>{if(!e||!t||!n||!n.length)return[];let i=await (0,eL.fetchQuery)(a,eF.BT,{owner:e,repo:t,query:n.join(",")}).toPromise(),r=(i?.repository?.projectsV2?.nodes??[]).filter(e=>!!e).map(e=>(0,eL.readInlineData)(eF.dW,e)),o=[...[...r,...(i?.repository?.recentProjects?.edges??[]).map(e=>e?.node).filter(e=>!!e).map(e=>(0,eL.readInlineData)(eF.dW,e)),...(i?.repository?.owner?.projectsV2?.edges??[]).map(e=>e?.node).filter(e=>!!e).map(e=>(0,eL.readInlineData)(eF.dW,e)),...(i?.repository?.owner?.recentProjects?.edges??[]).map(e=>e?.node).filter(e=>!!e).map(e=>(0,eL.readInlineData)(eF.dW,e))].reduce((e,t)=>(e.set(t.id,t),e),new Map).values()],s=new Set(n.map(e=>e.toLowerCase()));return o.filter(e=>!1===e.closed).filter(e=>!1===e.hasReachedItemsLimit).filter(e=>s.has(e.title.toLowerCase()))}})}({owner:t?.owner.login,repo:t?.name,projects:e.projects}),l=eO({...e,projects:s?.map(e=>e.title)??[]});(0,P.useEffect)(()=>{!o&&s&&(t?.viewerIssueCreationPermissions?.triageable?a(s):null!=t&&a([]))},[o,s,a,t?.viewerIssueCreationPermissions?.triageable,t]),(0,P.useEffect)(()=>{o||i===n||(l({projects:n.map(e=>e.title)}),r(n))},[o,i,n,l])}(e),null==l)?(0,c.jsx)(eC.Q,{optionConfig:{useViewportQueries:!1}}):(0,c.jsx)(ew.e,{repository:l,title:d,body:m,setTitle:e=>{u(e),n?.({name:e})},setBody:e=>{p(e),n?.({body:e})},resetTitleAndBody:eT.l,clearOnCreate:a??eT.l,issueFormRef:s,onCreateSuccess:({issue:e})=>t?.(e),onCreateError:eT.l,onCancel:a??eT.l,onBeforeCreate:i})}try{eV.displayName||(eV.displayName="CreateIssueForm")}catch{}let ez={container:"CreateIssuePreview-module__container--UdBdV",toolbar:"CreateIssuePreview-module__toolbar--KnRki FilePreview-module__toolbar--toYCM",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--WCzxL FilePreview-module__toolbarLeft--FG_Fy",toolbarActions:"CreateIssuePreview-module__toolbarActions--euLmx FilePreview-module__toolbarActions--GZPSm",createIssueFooter:"CreateIssuePreview-module__createIssueFooter--csy2W",form:"CreateIssuePreview-module__form--t92hw"};var eW=n(31941),eH=n(10833),eq=n(37824);let eG={container:"RepositoryPicker-module__container--LguWf",label:"RepositoryPicker-module__label--UrLpA",ssoBanner:"RepositoryPicker-module__ssoBanner--iob3k"};function eK({draftIssue:e,resolvedDraftIssueRepo:t,loadingDraftIssueRepo:n,topReposQuery:a}){let[i,r]=(0,P.useState)(void 0),{repository:o,setRepository:s}=(0,eE.u)(),l=(0,M.useFragment)(eH.Sy,a?.viewer),d=(0,P.useMemo)(()=>{if(null!=l)return(l?.topRepositories.edges||[]).flatMap(e=>e?.node?[(0,M.readInlineData)(eH.R6,e.node)]:[])},[l]),u=o??d?.[0],m=(0,P.useCallback)(e=>{null!=e&&s(e)},[s]);!function(e,t,n,a){let{repository:i,setRepository:r}=(0,eE.u)(),[o,s]=(0,P.useState)(i),l=eO(e),c=(0,P.useMemo)(()=>!n&&t?.nameWithOwner==null||t?.nameWithOwner===i?.nameWithOwner,[n,t?.nameWithOwner,i?.nameWithOwner]);(0,P.useEffect)(()=>{n||(null!=t?r(t):null!=a&&a.length>0?r(a[0]):r(void 0))},[n,t,r,a]),(0,P.useEffect)(()=>{o?.id!==i?.id&&(l({repository:i?.nameWithOwner},c),s(i))},[l,o?.id,i,c])}(e,t,n,d),(0,P.useEffect)(()=>{n||null==o||null==d||d.find(e=>e.id===o.id)||r(o.id)},[o,n,t,d]);let{ssoOrganizations:p}=(0,h.Pk)(),f=(0,P.useMemo)(()=>p?.map(e=>e.login)??[],[p]);return n||null!=o||null!=d&&0!==d.length?(0,c.jsxs)("div",{className:eG.container,children:[(0,c.jsx)(eW.A,{className:(0,ei.$)(eG.label,"sr-only"),required:!0,children:"Repository"}),(0,c.jsx)(eH.ow,{initialRepository:u,onSelect:m,options:{hasIssuesEnabled:!0},topRepositoriesData:a?a.viewer:null,enforceAtleastOneSelected:!0,subtitle:(0,c.jsx)(eq.x,{className:eG.ssoBanner,forceWrap:!0,protectedOrgs:f,maxVisibleOrgNames:0,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${location.href}`})},i)]}):null}try{eK.displayName||(eK.displayName="RepositoryPicker")}catch{}let eQ=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r=[n,a,i,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],o=[n,a,i,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:r,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:o,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();eQ.hash="582a468668cd62a5a95ad0f91f7ea5e5";let eZ={kind:"InlineDataFragment",name:"TemplatePickerForm"};eZ.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let eX={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};eX.hash="fa6038bb9389af7bff23ba3491dd0507";var eJ=n(75632),eY=n(3893),e0=n(55847);function e1({draftIssue:e}){return(0,eJ.G7)("copilot_immersive_draft_issue_template_picker")?(0,c.jsx)(e2,{draftIssue:e}):null}function e2({draftIssue:e}){let{repository:t}=(0,eE.u)(),{data:n}=function({owner:e,repo:t}){let n=(0,M.useRelayEnvironment)();return(0,K.I)({queryKey:["copilot-immersive-templates",JSON.stringify(n),e,t],queryFn:async()=>{if(!e||!t)return[];let a=await (0,eL.fetchQuery)(n,eQ,{owner:e,repo:t}).toPromise();return[...(a?.repository?.issueTemplates||[]).map(e=>(0,eL.readInlineData)(eX,e)),...(a?.repository?.issueForms||[]).map(e=>(0,eL.readInlineData)(eZ,e))].sort((e,t)=>e.filename.localeCompare(t.filename))}})}({owner:t?.owner.login,repo:t?.name});return null==n||0===n.length?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{children:"/"}),(0,c.jsxs)("div",{className:eG.container,children:[(0,c.jsx)(eW.A,{className:(0,ei.$)(eG.label,"sr-only"),children:"Template"}),(0,c.jsx)(e5,{templates:n,draftIssue:e})]})]})}function e5({templates:e,draftIssue:t}){let[n,a]=(0,P.useState)(""),i=(0,P.useMemo)(()=>n?e?.filter(e=>e.name?.toLowerCase().includes(n.toLowerCase())):e,[e,n]),[r,o]=(0,P.useState)(void 0);(0,P.useEffect)(()=>{if(!t.template){o(void 0);return}let n=t.template.split("/").pop();o(e?.find(e=>e.filename===n))},[e,t.template]);let s=function(){let e=(0,et.b)(),t=(0,h.Pk)();return(0,P.useCallback)(async(n,a)=>{let i={type:"text",name:`timeline-event: {"type": "update-issue-template", "markdownContent": "${a?`Changing template to '${a.name}'\u{2026}`:"Removing template\u2026"}"}`,text:a?`Update the selected draft issue with the \`${a.filename}\` template. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` field.`:"Update the selected draft issue to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the `tag` field."},r=(0,eN.g)({...n,template:a?.filename});await e.sendChatMessage({thread:e.getSelectedThread(t),content:a?`Use the '${a.name}' template`:"Remove the template",references:[i,r],topic:t.currentTopic,context:t.context,customInstructions:t.customInstructions,model:t.model})},[e,t])}(),l=(0,P.useRef)(null);return(0,c.jsx)(eY.O,{items:i??[],initialSelectedItems:r?[r]:[],placeholderText:"Select template",selectionVariant:"single",filterItems:a,renderAnchor:e=>(0,c.jsx)(e0.Q,{trailingVisual:j.TriangleDownIcon,...e,ref:l,children:r?(0,c.jsx)("span",{children:r.name}):"Select template"}),getItemKey:e=>e.filename,convertToItemProps:e=>({id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}),onSelectionChange:async([e])=>{o(e),await s(t,e)},selectPanelRef:l,height:"large",width:"medium"})}try{e1.displayName||(e1.displayName="TemplatePicker")}catch{}try{e2.displayName||(e2.displayName="TemplatePickerWrapper")}catch{}try{e5.displayName||(e5.displayName="TemplatePickerInternal")}catch{}var e3=n(77342),e4=n(93589),e6=n(42742);let e7=e=>{let{messages:t}=(0,h.Pk)(),n=(0,e4.B)(t);return(0,P.useMemo)(()=>{if(null!=e)return async t=>{let a=t.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),i=new Set;for(let e of a||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&i.add(t)}if(i.size>0){let a=Array.from(i).map(async e=>{let t=await fetch(e),n=await t.blob(),a=n.type.split("/")[1],i=`copilot-image.${a}`,r=await createImageBitmap(n),o=r.width;return r.close(),{file:new File([n],i,{type:n.type}),url:e,width:o}}),r=await Promise.all(a);for(let n of(await Promise.all(r.map(async t=>{if(t)return{uploadedFile:await (0,e6.QM)(t.file,e.databaseId?.toString()),originalUrl:t.url,width:t.width}}))))if(n){let{uploadedFile:e,originalUrl:a,width:i}=n,r=e.url;if(r){let e=RegExp(`!\\[(.*?)\\]\\(${a}\\)`,"g");t=t.replace(e,`<img alt="$1" width="${i}" src="${r}" />`)}}(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:i.size,threadId:n[0]?.threadID})}return t}},[n,e])};function e9({isPreviewOpening:e,issue:t,onClose:n}){t=function(e){let{messages:t}=(0,h.Pk)(),n=(0,e4.B)(t),a=(0,P.useMemo)(()=>n.flatMap(e=>e.mediaContent||[]),[n]),i=(0,P.useMemo)(()=>(function(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let a of n){let n=/\(image(\d+)\)/,i=parseInt(a.match(n)[1],10),r=t.length-i,o=t[r]?.chatAttachmentUrl||t[r]?.url;if(o){let t=a.replace(n,`(${o})`);e=e.replace(a,t)}}return e})(e.body,a),[e.body,a]);return i===e.body?e:{...e,body:i}}(t);let[a,i]=(0,P.useState)(e);(0,P.useEffect)(()=>{if(a){let e=setTimeout(()=>i(!1),500);return()=>clearTimeout(e)}},[a]);let{isLoading:r,data:o}=function(){let e=(0,M.useRelayEnvironment)();return(0,K.I)({queryKey:["copilot-immersive-top-repos",JSON.stringify(e)],queryFn:async()=>await (0,eH.Xl)(e,10,!0).toPromise()})}(),[s,l]=t.repository?.split("/")??[],{isLoading:d,data:u}=function({owner:e,repo:t}){let n=(0,M.useRelayEnvironment)();return(0,K.I)({queryKey:["copilot-immersive-current-repo",JSON.stringify(n),e,t],queryFn:async()=>{if(!e||!t)return null;let a=await (0,eH.DW)(n,e,t).toPromise();if(a?.repository!=null)return(0,M.readInlineData)(eH.R6,a.repository)}})}({owner:s,repo:l}),m=e7(u),p=function({tag:e}){let t=(0,h.Pk)(),n=(0,et.b)(),{items:a,updateItem:i,openItem:r,closeItem:o,openPreviewPane:s}=(0,B.xx)(),l=eR(e);return(0,P.useCallback)(async e=>{(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED",mode:"immersive",threadId:n.getSelectedThread(t)?.id,repositoryId:e.repository.databaseId,issueNumber:e.number});let c=e.number,d=e.repository.owner.login,u=e.repository.name,m=e.title,p=`issue:${d}/${u}/${c}`;i({id:p,messageId:e3.Wp,name:m,owner:d,repo:u,number:c,href:e.url,type:"issue"}),o(l),r(p),s();let h=[{type:"text",name:`timeline-event: {"type": "create-issue-confirmation", "markdownContent": "Issue saved to [${d}/${u}#${c}](${e.url})"}`,text:`Fetch the issue details and return them in a code block with YAML following this example format:
\`\`\`list type="issue"
data:
- url: ${e.url}
  state: "open"
  draft: false
  title: "${m}"
  number: ${c}
  author: ${t.currentUserLogin}
  created_at: "2025-03-27T12:00:00Z"
  closed_at: "2025-03-27T12:00:00Z"
  labels:
  - name: "bug"
  - name: "good first issue"
\`\`\``}],f=a.get(l);f?.type==="new-issue"&&h.push((0,eN.g)(f)),await n.sendChatMessage({thread:n.getSelectedThread(t),content:`Saved the issue to [${d}/${u}#${c}](${e.url})`,references:h,topic:t.currentTopic,context:t.context,customInstructions:t.customInstructions,model:t.model})},[l,n,t,a,s,r,i,o])}(t),f=eO(t);return a||r?(0,c.jsx)(eC.Q,{optionConfig:{useViewportQueries:!1}}):null!=o||d||null!=u?(0,c.jsx)(e_.S,{optionConfig:(0,ex.S)({storageKeyPrefix:t.id}),preselectedData:{repository:u??void 0},...(0,ej.G)("create-issue-preview"),children:(0,c.jsxs)("div",{className:ez.container,children:[(0,c.jsxs)("div",{className:ez.toolbar,children:[(0,c.jsx)("div",{className:ez.toolbarLeft,children:(0,c.jsx)(eS,{item:t})}),(0,c.jsxs)("div",{className:ez.toolbarActions,children:[(0,c.jsx)(ep.A,{href:"https://gh.io/copilot-create-issues-feedback",className:"mr-2",children:"Give feedback"}),(0,c.jsx)(ev.l,{hideCreateMore:!0,className:ez.createIssueFooter})]})]}),(0,c.jsxs)("div",{className:ez.form,children:[(0,c.jsxs)(A.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[(0,c.jsx)(eK,{draftIssue:t,resolvedDraftIssueRepo:u,loadingDraftIssueRepo:d,topReposQuery:o}),(0,c.jsx)(e1,{draftIssue:t})]}),(0,c.jsx)(eV,{draftIssue:t,onCreate:p,onChange:f,onClose:n,onBeforeCreate:m})]})]})}):(0,c.jsx)("span",{children:"No repositories found."})}try{e9.displayName||(e9.displayName="CreateIssuePreview")}catch{}var e8=n(34225),te=n(26514),tt=n(44492),tn=n(23976),ta=n(23125),ti=n(54006);let tr=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)},to={container:"FilePreview-module__container--_pENP",previewContainer:"FilePreview-module__previewContainer--vjKjn",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--bIVZV",toolbar:"FilePreview-module__toolbar--toYCM",toolbarLeft:"FilePreview-module__toolbarLeft--FG_Fy",toolbarLoC:"FilePreview-module__toolbarLoC--cjBe0",toolbarActions:"FilePreview-module__toolbarActions--GZPSm",footer:"FilePreview-module__footer--pwLuO"};var ts=n(72334);let tl={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function tc(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let td={container:"SandboxView-module__container--_qS7F",iframe:"SandboxView-module__iframe--bgP8I"},tu={error:"ErrorMessage-module__error--EPInF",errorIcon:"ErrorMessage-module__errorIcon--qRxBg",errorHeader:"ErrorMessage-module__errorHeader--ePU6Q"};function tm(e){let t;let n=(0,x.c)(4),{error:a}=e;if(n[0]!==a){let e,i;let r=a?.split("\n")??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("span",{className:tu.errorIcon,children:(0,c.jsx)(j.StopIcon,{size:24})}),i=(0,c.jsx)("h2",{className:tu.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=i):(e=n[2],i=n[3]),t=(0,c.jsxs)("div",{className:tu.error,children:[e,i,r.length>0?(0,c.jsx)("p",{children:r.map(tp)}):(0,c.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=a,n[1]=t}else t=n[1];return t}function tp(e){return(0,c.jsxs)(c.Fragment,{children:[e,(0,c.jsx)("br",{})]},`error-line-${e}}`)}try{tm.displayName||(tm.displayName="ErrorMessage")}catch{}function th(e){let t,n,a,i;let r=(0,x.c)(11),{content:o,scripts:s,styles:l,viewscreenUrl:d}=e,u=(0,eJ.G7)("viewscreen_sandbox");r[0]!==d?(n=new URL("view/sandbox?url=client://sandbox",d).toString(),t=new URL(n,C.fV.origin),r[0]=d,r[1]=t,r[2]=n):(t=r[1],n=r[2]);let m=t.origin,p=(0,P.useRef)(null),h=(0,P.useRef)(null);r[3]!==o||r[4]!==s||r[5]!==l?(a={content:o,scripts:s,styles:l},r[3]=o,r[4]=s,r[5]=l,r[6]=a):a=r[6];let{renderState:f,errorMessage:g}=function(e,t,n,a){let i,r,o,s,l,c;let d=(0,x.c)(16),[u,m]=(0,P.useState)(tl.LOADING),[p,h]=(0,P.useState)();d[0]!==t||d[1]!==e||d[2]!==a?(i=n=>(function(e,t,n,a,i,r){let o=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!o)return;let s=o.body,l=n.current?.contentWindow;switch(s){case"hello":tc(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),tc(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":r(tl.ERROR),o.payload?.error&&i(o.payload.error);break;case"loading":r(tl.LOADING);break;case"loaded":r(tl.LOADED);break;case"ready":if(!n.current||!a.current)return;r(tl.READY)}})(n,0,e,t,h,m),d[0]=t,d[1]=e,d[2]=a,d[3]=i):i=d[3];let f=i;return d[4]!==f?(r=()=>(window.addEventListener("message",f),()=>window.removeEventListener("message",f)),o=[f],d[4]=f,d[5]=r,d[6]=o):(r=d[5],o=d[6]),(0,P.useEffect)(r,o),d[7]!==t||d[8]!==e||d[9]!==n||d[10]!==u?(s=()=>{u===tl.READY&&e.current&&t.current&&function(e,t,n){let a={type:"render:cmd",body:{cmd:"sandbox:data:ready","sandbox:data:ready":{...n}}};tc(e.contentWindow,a)}(e.current,t.current,n)},l=[t,e,n,u],d[7]=t,d[8]=e,d[9]=n,d[10]=u,d[11]=s,d[12]=l):(s=d[11],l=d[12]),(0,P.useEffect)(s,l),d[13]!==p||d[14]!==u?(c={renderState:u,errorMessage:p},d[13]=p,d[14]=u,d[15]=c):c=d[15],c}(p,h,a,m);return u?(r[7]!==g||r[8]!==f||r[9]!==n?(i=(0,c.jsx)("div",{ref:h,className:td.container,children:f===tl.ERROR?(0,c.jsx)(tm,{error:g}):(0,c.jsx)("iframe",{ref:p,className:td.iframe,sandbox:"allow-scripts",title:"Preview page for the user provided code",src:n})}),r[7]=g,r[8]=f,r[9]=n,r[10]=i):i=r[10],i):null}try{th.displayName||(th.displayName="SandboxView")}catch{}let tf={loadingContainer:"HtmlPreview-module__loadingContainer--b987j",loadingHead:"HtmlPreview-module__loadingHead--abHb3",loadingText:"HtmlPreview-module__loadingText--WYXW5"};function tg(e,t,n){let a=`file:${e}`;if(!n.has(a))return null;let i=n.get(a)??[],r=i[i.length-1];if(!r)return null;let o=t.get(r);return o&&"file"===o.type?o:null}function ty({file:e}){let{previewUrl:t}=(0,g.X)(),{items:n,versionedItems:a}=(0,B.xx)(),{scripts:i,styles:r,files:o}=function(e,t,n){let a=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>tg(e,t,n)),i=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>tg(e,t,n)),r=Array.from(e.matchAll(RegExp("<script(?![^>]*\\bsrc=).*?>(.*?)<\\/script>","gms"))).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...a.map(e=>e?.value??""),...r,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join("\n"),styles:i.map(e=>e?.value??"").join("\n"),files:a.concat(i)}}(e.value,n,a),[s,l]=(0,P.useState)(!1),d=(e.isStreaming||o.some(e=>!e||e.isStreaming))&&!s;return((0,P.useEffect)(()=>{if(d){let e=setTimeout(()=>{l(!0)},3e3);return()=>clearTimeout(e)}}),d)?(0,c.jsxs)("div",{className:tf.loadingContainer,children:[(0,c.jsx)("div",{className:tf.loadingHead,children:(0,c.jsx)(ts.N,{animationType:"thinking",loopAnimation:!0})}),(0,c.jsx)("p",{className:tf.loadingText,children:"Preparing your preview\u2026"})]}):(0,c.jsx)(th,{scripts:i,styles:r,content:e.value,viewscreenUrl:t},e.id)}try{ty.displayName||(ty.displayName="HtmlPreview")}catch{}var tv=n(24880),tx=n(44968),t_=n(63867),tC=n(74022);let tj={markdownPreview:"MarkdownPreview-module__markdownPreview--TTDgv",spinner:"MarkdownPreview-module__spinner--hV_1B",error:"MarkdownPreview-module__error--MpG_1",errorIcon:"MarkdownPreview-module__errorIcon--ZskC4",errorHeader:"MarkdownPreview-module__errorHeader--WHC6c"};function tb({file:e}){let t=function(e,t){let[n,a]=(0,P.useState)(e),i=(0,P.useMemo)(()=>(0,tC.A)(a,2e3),[2e3]);return(0,P.useEffect)(()=>i(e),[i,e]),n}(e.value,2e3),{status:n,data:a}=(0,K.I)({queryKey:["copilot-immersive","MarkdownPreview",t,e.name],queryFn:async()=>{let n=await (0,Q.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:t,filename:e.name}});if(!n.ok)throw Error(`Failed to load rendered markdown (${n.status} on ${n.url})`);return await n.json()},placeholderData:tv.rX,staleTime:1/0});return(0,c.jsx)("div",{className:(0,ei.$)("readme html-blob blob",tj.markdownPreview),children:"pending"===n?(0,c.jsx)("div",{className:tj.spinner,children:(0,c.jsx)(t_.A,{srText:"Loading Markdown preview\u2026"})}):"error"===n?(0,c.jsxs)("div",{className:tj.error,children:[(0,c.jsx)("span",{className:tj.errorIcon,children:(0,c.jsx)(j.StopIcon,{size:24})}),(0,c.jsx)("h2",{className:tj.errorHeader,children:"Markdown rendering failed"}),(0,c.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,c.jsx)(tx.mo,{className:"markdown-body",html:a.html})})}try{tb.displayName||(tb.displayName="MarkdownPreview")}catch{}function tN({isPreviewOpening:e,file:t,onClose:n}){let{updateItem:a}=(0,B.xx)(),i=(0,h.Pk)(),r=t.isStreaming?i.messages[i.messages.length-1]:i.messages.find(e=>e.id===t.messageId),{linesOfCode:o,isPreviewable:s,size:l}=(0,P.useMemo)(()=>{let e=new Blob([t.value]).size,n=new Set(["markdown","html"]);return{linesOfCode:t.value.split("\n").length,isPreviewable:n.has(t.language),size:function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(e)}},[t.language,t.value]);!function(e,t){let{reference:n}=e,a=(0,et.b)(),{isLoading:i,isError:r,data:o}=(0,K.I)({queryKey:["copilot-reference-preview","copilot","references",n?.type,n?(0,m.Vb)(n):void 0],queryFn:async()=>{if(!n||"file"!==n.type||e.value)return null;let i=await a.service.hydrateReference(n);return i.ok?(t({...e,value:i.payload.contents,isStreaming:!1}),i.payload):null},staleTime:Number.POSITIVE_INFINITY});(0,P.useEffect)(()=>{o?.contents&&e.value!==o.contents&&t({...e,value:o.contents,isStreaming:!1})},[o?.contents,e,t])}(t,a);let[d,u]=(0,P.useState)("code"),[p,f]=(0,P.useState)(void 0),g=(0,P.useCallback)(e=>{f(e)},[]);return(0,P.useEffect)(()=>{(r?.error?.type==="publicCode"||r?.error?.type==="filtered")&&n()},[r?.error,n]),(0,c.jsxs)("div",{className:to.container,children:[(0,c.jsxs)("div",{className:to.toolbar,children:[(0,c.jsxs)("div",{className:to.toolbarLeft,children:[s&&(0,c.jsxs)(tn.I,{"aria-label":"File view",onChange:e=>{let t=0===e?"preview":"code";u(t),(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:[(0,c.jsx)(tn.I.Button,{selected:"preview"===d,children:"Preview"}),(0,c.jsx)(tn.I.Button,{selected:"code"===d,children:"Code"})]}),(0,c.jsx)(eS,{item:t,onVersionSelect:g}),(0,c.jsxs)("p",{className:to.toolbarLoC,children:[o," ",1===o?"line":"lines"," \xb7 ",l]})]}),(0,c.jsxs)("div",{className:to.toolbarActions,children:[(0,c.jsx)(te.T,{textToCopy:t.value,ariaLabel:"Copy code",onCopy:()=>(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}),(0,c.jsx)(k.K,{"aria-label":"Download code",icon:j.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=t.name.lastIndexOf(".");if(e>0){let n=t.name.substring(0,e),a=t.name.substring(e);return void 0!==p?`${n}_${p}${a}`:t.name}return void 0!==p?`${t.name}_${p}`:t.name})();tr(new File([t.value],e)),(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}})]})]}),s&&"preview"===d?(0,c.jsx)(tw,{file:t}):(0,c.jsx)(tS,{file:t,isPreviewOpening:e})]})}let tI=(0,ta.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function tS({file:e,isPreviewOpening:t}){let{openItem:n,updateItem:a,versionedItems:i}=(0,B.xx)(),r=(0,P.useRef)(!1),o=function(e,t){let n=e.get((0,eN.oy)(t.id))??[];return n[n.length-1]===t.id}(i,e),s=!e.reference||"thread-scoped-file"===e.reference.type,l=s&&!e.isStreaming&&o,d=(0,P.useId)(),u=function(e){let t=(0,P.useMemo)(()=>(function({language:e,value:t}){let n=/^\t/m.test(t)?"tab":"space";return{indentUnit:function(e,t){if("space"!==t)return 8;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,n),indentWithTabs:"tab"===n,lineWrapping:function(e){let t=(0,ti.vL)(e);return t?.wrap??!1}(e)}})(e),[e]);return(0,P.useMemo)(()=>({indentUnit:t.indentUnit,indentWithTabs:t.indentWithTabs,lineWrapping:t.lineWrapping}),[t.indentUnit,t.indentWithTabs,t.lineWrapping])}(e),[m,p]=(0,P.useState)(),f=m?.id===e.id?m.value:e.value,{messages:g}=(0,h.Pk)();(0,P.useEffect)(()=>{t&&(r.current=!0)},[t]);let y=tE((0,P.useCallback)(t=>{if(l&&t!==e.value){if(e.isUserEdited)p({value:t,id:e.id}),tI(e,t,a);else{let i={...e,messageId:e3.Wp,id:`file:${e.name}#${g.length}`,timestamp:new Date,isUserEdited:!0,value:t};a(i),n(i.id),p({value:t,id:i.id})}}},[e,l,g.length,n,a]));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{id:d,className:"sr-only",children:[e.name," file contents"]}),(0,c.jsx)(e8.default,{ariaLabelledBy:d,containerClassName:to.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!l,spacing:u,value:f,onChange:y,focusNextRenderRef:r,placeholder:"Loading...",hideHelp:!0}),s&&!o&&(0,c.jsx)("div",{className:to.footer,children:"Switch to the latest version to edit this file."})]})}function tw({file:e}){return"markdown"===e.language?(0,c.jsx)("div",{className:to.previewContainer,children:(0,c.jsx)(tb,{file:e})}):"html"===e.language?(0,c.jsx)("div",{className:to.previewContainer,children:(0,c.jsx)(ty,{file:e})}):null}let tE=e=>{let t=(0,tt.M)(e);return(0,P.useCallback)((...e)=>t.current?.(...e),[t])};try{tN.displayName||(tN.displayName="FilePreview")}catch{}try{tS.displayName||(tS.displayName="CodeMirrorView")}catch{}try{tw.displayName||(tw.displayName="PreviewComponent")}catch{}let tT={container:"ImagePreview-module__container--AUrb4",imageElement:"ImagePreview-module__imageElement--DNVl1"};function tk({image:e}){return(0,c.jsx)("div",{className:tT.container,children:(0,c.jsx)("img",{className:tT.imageElement,src:e.url,alt:e.altText})})}try{tk.displayName||(tk.displayName="ImagePreview")}catch{}var tA=n(29925),tP=n(3172);let tL={container:"IssuePreview-module__container--XUu9S"},tD=(0,P.memo)(function({isPreviewOpening:e,issue:t,onClose:n}){let[a,i]=(0,P.useState)(e);(0,P.useEffect)(()=>{if(a){let e=setTimeout(()=>i(!1),500);return()=>clearTimeout(e)}},[a]);let r=(0,P.useMemo)(()=>(0,c.jsx)(k.K,{icon:j.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),o=(0,P.useMemo)(()=>({navigate:eT.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:n,additionalHeaderActions:r,showRepositoryPill:!0}),[n,r]),s=(0,P.useMemo)(()=>({owner:t.owner,repo:t.repo,number:t.number,type:"Issue"}),[t.number,t.owner,t.repo]);return a?(0,c.jsx)(eC.Q,{optionConfig:o}):(0,c.jsx)("div",{className:tL.container,children:(0,c.jsx)(tP.e,{children:(0,c.jsx)(tA.cI,{itemIdentifier:s,optionConfig:o})})})});try{tD.displayName||(tD.displayName="IssuePreview")}catch{}function tR({isOpening:e,onClose:t,previewItem:n}){let a=null;switch(n.type){case"file":a=(0,c.jsx)(tN,{isPreviewOpening:e,file:n,onClose:t});break;case"issue":a=(0,c.jsx)(tD,{isPreviewOpening:e,issue:n,onClose:t});break;case"new-issue":a=(0,c.jsx)(e9,{isPreviewOpening:e,issue:n,onClose:t});break;case"image":a=(0,c.jsx)(tk,{image:n})}return a?(0,c.jsx)(eo.t,{fallback:(0,c.jsx)(eg,{regionName:"This workbench item"}),children:a}):null}try{tR.displayName||(tR.displayName="ContentPreviewItem")}catch{}let tO={tabContainer:"ContentPreviewTab-module__tabContainer--TyGLZ",tabContent:"ContentPreviewTab-module__tabContent--zNIXv",isActive:"ContentPreviewTab-module__isActive--xbw0T",mainButton:"ContentPreviewTab-module__mainButton--Y_fZZ",icon:"ContentPreviewTab-module__icon--Ff5yz",title:"ContentPreviewTab-module__title--WZajJ",closeButton:"ContentPreviewTab-module__closeButton--DACs7"};function tM({file:e}){return e.isStreaming?(0,c.jsx)(t_.A,{size:"small"}):"markdown"===e.language?(0,c.jsx)(j.MarkdownIcon,{}):(0,c.jsx)(j.CodeIcon,{})}function tB({item:e}){switch(e.type){case"file":return(0,c.jsx)(tM,{file:e});case"image":return(0,c.jsx)(j.ImageIcon,{});case"issue":return(0,c.jsx)(j.IssueOpenedIcon,{});case"new-issue":return(0,c.jsx)(j.IssueDraftIcon,{});default:return null}}let tF=(0,P.forwardRef)(function({onClick:e,onClose:t,isActive:n,item:a,controlHintId:i,tabPanelId:r,...o},s){let l=()=>{t&&t(),(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},d=(0,P.useRef)(null),u=a.name;return(0,c.jsx)("div",{className:tO.tabContainer,children:(0,c.jsxs)("div",{className:(0,ei.$)(tO.tabContent,{[tO.isActive]:n}),children:[(0,c.jsxs)("button",{className:tO.mainButton,type:"button",role:"tab","aria-selected":n?"true":void 0,"aria-describedby":i,"aria-controls":r,onClick:t=>{e&&e(t),(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},onKeyDown:e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":l();break;case"tab":if(e.shiftKey)break;e.preventDefault(),d.current?.focus()}},onAuxClick:e=>{1===e.button&&l()},ref:s,...o,children:[(0,c.jsx)("span",{className:tO.icon,children:(0,c.jsx)(tB,{item:a})}),(0,c.jsx)("span",{className:tO.title,"data-title":u,"data-testid":`content-preview-tab-${a.id}`,children:u})]}),(0,c.jsx)("div",{className:tO.closeButton,children:(0,c.jsx)(k.K,{icon:j.XIcon,size:"small",variant:"invisible","aria-label":`Close ${u}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:l,ref:d})})]})})});try{tM.displayName||(tM.displayName="CodeTabIcon")}catch{}try{tB.displayName||(tB.displayName="TabIcon")}catch{}try{tF.displayName||(tF.displayName="ContentPreviewTab")}catch{}var tU=n(47767);function t$(){return(0,c.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})})}try{t$.displayName||(t$.displayName="DiceIcon")}catch{}let tV={container:"EmptyState-module__container--iHvWJ",icon:"EmptyState-module__icon--e1df9",heading:"EmptyState-module__heading--p3oK5",subtitle:"EmptyState-module__subtitle--oksOj"};function tz({isOpening:e}){let t=(0,et.b)(),n=(0,h.Pk)(),a=(0,tU.zy)(),i=(0,P.useRef)(null),r=t.getSelectedThread(n),o=(0,g.X)(),[s,l]=(0,P.useState)([]);return(0,P.useEffect)(()=>{var e;if(Array.isArray(e=o.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=o.icebreakers.find(e=>"interactional"===e.type);e&&e.data.length>0&&l(e.data)}},[o.icebreakers,a]),(0,P.useEffect)(()=>{e&&i.current&&window.requestAnimationFrame(()=>{i.current?.focus()})},[e]),(0,c.jsxs)("div",{className:tV.container,children:[(0,c.jsx)(j.BrowserIcon,{size:24,className:tV.icon}),(0,c.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),(0,c.jsx)("h2",{className:tV.heading,children:"View files directly within Copilot"}),(0,c.jsx)("p",{className:tV.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),(0,c.jsx)(e0.Q,{ref:i,leadingVisual:t$,onClick:()=>{if(0===s.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(s),a=0===n.messages.length?r:t.getSelectedThread(n),i=n.currentUserLogin,o=e.message;t.sendChatMessage({thread:a,content:o.replaceAll("$$USERNAME$$",i),references:n.currentReferences,topic:n.currentTopic,context:n.context,customInstructions:n.customInstructions,model:n.model}),(0,U.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:n.currentTopic?.name,mode:"immersive",suggestionId:e.id})},disabled:n.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]})}try{tz.displayName||(tz.displayName="EmptyState")}catch{}let tW={container:"LoadingState-module__container--a0Cz6"};function tH(){return(0,c.jsx)("div",{className:tW.container,children:(0,c.jsx)(t_.A,{size:"large"})})}try{tH.displayName||(tH.displayName="LoadingState")}catch{}function tq(e,t,n={}){(0,U.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function tG({returnFocusRef:e}){let{items:t,openItems:n,selectedItem:a,openItem:i,closeItem:r,closePreviewPane:o,showLoadingState:s,previewPaneOpen:l}=(0,B.xx)(),d=(0,es.S)(l),u=l&&!d,m=d&&!l,p=n.map(e=>t.get(e)).filter(e=>e?.type==="file"),h=(0,P.useId)(),f=(0,P.useId)(),g=(0,P.useId)(),y=n.map(e=>t.get(e)).filter(e=>!!e);(0,P.useEffect)(()=>{m&&e.current?.focus()},[m,e]);let v=async()=>{let e=p.map(e=>new File([e.value],e.name));tr(new File([await (0,em._6)(e).blob()],"files.zip"))},x=y.find(e=>e.id===a)??y[0],_=(0,P.useCallback)((e=!1)=>{if(x){let t=e&&1===y.length;r(x.id),t&&(o(),(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[r,o,y.length,x]),C=(0,P.useRef)([]),b=(0,P.useRef)(null);(0,ec.G)({containerRef:b,focusableElementFilter:e=>"tab"===e.role,bindKeys:el.z0.ArrowHorizontal|el.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[y]);let N=!(0,er.g)(b),I=e=>{let t=y[e];if(!t)return;let n=C.current[e+1]??C.current[e-1]??b.current;n?.focus();let a=1===y.length;r(t.id),a&&o(),tq("filePreviewTab.close",t)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:ey.toolbar,children:[(0,c.jsx)("div",{className:(0,ei.$)(ey.actions,ey.rightDivider),children:(0,c.jsx)(tK,{})}),(0,c.jsx)("div",{className:ey.tabsContainer,children:(0,c.jsxs)("div",{className:ey.tabs,role:"tablist","aria-label":"Workbench items",ref:b,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[y.map((e,t)=>(0,c.jsx)(tF,{id:e.id===a?h:void 0,tabPanelId:e.id===a?f:void 0,controlHintId:g,isActive:e.id===a,onClick:()=>{i(e.id),tq("filePreviewTab.click",e)},onClose:()=>I(t),item:e,ref:e=>{C.current[t]=e}},e.id)),(0,c.jsx)("span",{id:g,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,c.jsx)("span",{})]})}),n.length>0&&(0,c.jsx)("div",{className:(0,ei.$)(ey.actions,N&&ey.leftDivider),children:(0,c.jsxs)(ed.W,{children:[(0,c.jsx)(ed.W.Anchor,{children:(0,c.jsx)(k.K,{icon:j.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,c.jsx)(ed.W.Overlay,{children:(0,c.jsxs)(eu.l,{children:[p.length>0&&(0,c.jsxs)(eu.l.Item,{onSelect:v,children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.FileZipIcon,{})}),"Download all files"]}),(0,c.jsxs)(eu.l.Item,{onSelect:()=>{for(let e of n)r(e);(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.XIcon,{})}),"Close all tabs"]})]})})]})})," "]}),(0,c.jsx)("div",{className:ey.content,role:"tabpanel",id:f,"aria-labelledby":h,children:s?(0,c.jsx)(tH,{}):x?(0,c.jsx)(tR,{isOpening:u,previewItem:x,onClose:_}):(0,c.jsx)(tz,{isOpening:u})})]})}function tK(){let{closePreviewPane:e}=(0,B.xx)();return(0,c.jsx)(k.K,{variant:"invisible",icon:j.SidebarCollapseIcon,"aria-label":"Close workbench",onClick:()=>{e(),(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}})}function tQ(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:ey.toolbar,children:(0,c.jsx)("div",{className:(0,ei.$)(ey.actions,ey.rightDivider),children:(0,c.jsx)(tK,{})})}),(0,c.jsx)("div",{className:(0,ei.$)(ey.content),children:(0,c.jsx)(eg,{regionName:"The workbench"})})]})}function tZ(e){let t=(0,P.useId)();return(0,c.jsxs)("aside",{"aria-labelledby":t,className:ey.container,tabIndex:-1,"data-testid":"content-preview",role:"dialog",children:[(0,c.jsx)("h2",{id:t,className:"sr-only",children:"Workbench"}),(0,c.jsx)(eo.t,{fallback:(0,c.jsx)(tQ,{}),children:(0,c.jsx)(tG,{...e})})]})}try{tG.displayName||(tG.displayName="ContentPreviewInner")}catch{}try{tK.displayName||(tK.displayName="CloseContentPreviewButton")}catch{}try{tQ.displayName||(tQ.displayName="ContentPreviewFallback")}catch{}try{tZ.displayName||(tZ.displayName="ContentPreview")}catch{}var tX=n(5928),tJ=n(22678);function tY(){let e=C.fV.pathname;return(0,P.useMemo)(()=>e.includes("/share/"),[e])}function t0({messageId:e,messageIndex:t,messageTimestamp:n}){let{openPreviewPane:a,openItem:i,updateItem:r}=(0,B.xx)();return(0,P.useCallback)((o,s)=>{let l;switch(s.type){case"file":l=(0,eN.by)(s,e,n);break;case"thread-scoped-file":l=(0,eN.oR)({ref:s,messageIndex:t,messageId:e,timestamp:n});break;case"thread-scoped-issue":l=(0,eN.oR)({ref:s,messageIndex:t,messageId:e});break;case"issue":l=(0,eN.SI)(s,e);break;default:return}o.preventDefault(),r(l),i(l.id),a()},[e,t,n,a,i,r])}let t1=/\/copilot\/c\/([^/]+)/,t2=/\/copilot\/share\/([^/]+)/;function t5(){let e=C.fV.pathname;return(0,P.useMemo)(()=>{let t=e.match(t1)||e.match(t2);if(!t)return null;let[,n]=t;return n??null},[e])}var t3=n(47173);let t4={banner:"ChatInputBanners-module__banner--QlUDL"};var t6=n(18427),t7=n(64633),t9=n(87913),t8=n(91321);let ne={container:"EditorUpsellBanner-module__container--CVVb2",banner:"EditorUpsellBanner-module__banner--nLwUI",title:"EditorUpsellBanner-module__title--UkB0l",description:"EditorUpsellBanner-module__description--wNgDi",actions:"EditorUpsellBanner-module__actions--tJUAU",editorButton:"EditorUpsellBanner-module__editorButton--gkwOw",closeButton:"EditorUpsellBanner-module__closeButton--qXUPm"};function nt(){let e=(0,h.A3)("isEditorUpsellBannerDismissed"),t=(0,et.b)(),{isLicensedLimited:n}=(0,H.x)(),a=(0,P.useId)(),i="editor_upsell_banner",r=(e,t)=>{p.W.freeToPaidTelemetry?(0,t7.F)(e,i,"immersive",t):(0,U.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})};return e||!n?null:(0,c.jsx)("div",{className:ne.container,children:(0,c.jsxs)("section",{className:ne.banner,"aria-labelledby":a,children:[(0,c.jsx)("h2",{className:ne.title,id:a,children:"Install Copilot in your favorite code editor"}),(0,c.jsx)("p",{className:ne.description,children:"Copilot is available for a multitude of editors to fit your needs"}),p.W.freeToPaidSettingsUpgrade?(0,c.jsx)(t6.B,{menuLocation:i,mode:"immersive"}):(0,c.jsxs)(t8.A,{className:ne.actions,children:[(0,c.jsx)($.z,{className:ne.editorButton,href:t9.A.vscode.url,leadingVisual:(0,c.jsx)("img",{src:t9.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{r("vscode","ide_menu_primary_button_click")},children:t9.A.vscode.name}),(0,c.jsxs)(ed.W,{children:[(0,c.jsx)(ed.W.Anchor,{children:(0,c.jsx)(k.K,{"aria-label":"More editors",icon:j.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{r("menu","ide_menu_open")}})}),(0,c.jsx)(ed.W.Overlay,{align:"end",children:(0,c.jsx)(eu.l,{children:(0,c.jsx)(t7.t,{menuLocation:i,mode:"immersive"})})})]})]}),(0,c.jsx)(k.K,{variant:"invisible",className:ne.closeButton,icon:j.XIcon,"aria-label":"Dismiss banner",onClick:()=>{t.dismissEditorUpsellBanner(),(0,U.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}})]})})}try{nt.displayName||(nt.displayName="EditorUpsellBanner")}catch{}function nn({onDismiss:e,className:t}){return(0,c.jsx)("div",{className:t,children:(0,c.jsx)(V.l,{variant:"success",title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",hideTitle:!0,onDismiss:()=>{e(),(0,U.BI)("dotcom_chat.activate",{target:"PRO_PLUS_SUCCESS_BANNER_DISMISS",mode:"immersive"})}})})}try{nn.displayName||(nn.displayName="ProPlusSuccessBanner")}catch{}let na=p.W.premiumRequestQuotasEnabled?m.mF:10;function ni({onDismiss:e,className:t}){let{isLicensedLimited:n,canUpgradePlan:a,canPurchaseAdditionalQuota:i,premiumInteractionsQuotaExceeded:r,resetDate:o}=(0,H.x)(),s=n?`You have used ${100-na}% of your free requests this month.`:r?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${o}.`:`You have used ${100-na}% of your premium responses this month. ${a?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`,l=a&&!r?(0,c.jsx)($.z,{as:"a",href:m.Zs,onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade"}):i&&!r?(0,c.jsx)($.z,{as:"a",href:m.pF,onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})},children:"Enable additional requests"}):(0,c.jsx)($.z,{as:"a",href:m.MB,onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})},children:"Manage billing"}),d=a&&i&&!r?(0,c.jsx)(ep.A,{as:"a",href:m.Zs,onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Enable additional requests"}):null;return(0,c.jsx)("div",{className:t,children:(0,c.jsx)(V.l,{variant:"info",title:"Limit reached soon",description:s,hideTitle:!0,primaryAction:l,secondaryAction:d,onDismiss:()=>{e(),(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})}})})}try{ni.displayName||(ni.displayName="QuotaMeterBanner")}catch{}var nr=n(31806),no=n(10967);function ns({topic:e}){return"type"in e&&"docset"===e.type?(0,c.jsx)(nc,{docset:e}):(0,c.jsx)(nl,{repo:e})}function nl({repo:e}){let t=(0,h.pn)(e=>e.model&&!e.model.hasLimitedCapabilities),n=`${e.ownerLogin}/${e.name}`,[a,i]=(0,no.vn)(n),r=(0,P.useRef)(!1),o=a.code===no.W5.Unindexed||a.docs===no.W5.Unindexed;(0,P.useEffect)(function(){!r.current&&o&&t&&(r.current=!0,i())},[t,o,i]);let s=(0,P.useRef)(null);return(0,c.jsx)(nr.Z,{icon:(0,c.jsx)(j.RepoIcon,{}),topic:e,removeButtonRef:s})}function nc({docset:e}){let t=(0,et.b)(),n=(0,h.pn)(t=>t.currentReferences.find(t=>"docset"===t.type&&t.id===e.id)),a=(0,P.useCallback)(()=>t.removeReference(n),[t,n]),{status:i,data:r}=(0,K.I)({queryKey:["copilot-immersive-v1","docsets"],queryFn:async()=>{let e=await t.fetchKnowledgeBases();if(!e.ok)throw Error(e.error);return e.payload},select:t=>t.find(t=>t.id===e.id)});(0,P.useEffect)(function(){"success"===i&&void 0===r&&a()},[i,r,a]);let o=(0,P.useRef)(null);return r?(0,c.jsx)(nr.Z,{icon:(0,c.jsx)(j.BookIcon,{}),topic:r,removeButtonRef:o}):null}try{ns.displayName||(ns.displayName="TopicIndicator")}catch{}try{nl.displayName||(nl.displayName="RepoTopicIndicator")}catch{}try{nc.displayName||(nc.displayName="KbTopicIndicator")}catch{}function nd({onDismiss:e,className:t}){return(0,c.jsx)("div",{className:t,children:(0,c.jsx)(V.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{e(),(0,U.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}})})}try{nd.displayName||(nd.displayName="TrialSuccessBanner")}catch{}function nu(){let e=(0,h.pn)(e=>null!==e.selectedThreadID),{ambientError:t}=(0,h.Pk)(),n=(0,H.x)().licenseType,a=function(){let{isLicensedLimited:e,chatQuotaRemaining:t,premiumChatQuotaRemaining:n,premiumInteractionsQuotaExceeded:a,overagesEnabled:i}=(0,H.x)(),[r,o]=(0,P.useState)(()=>q.J.getMeterBannerFlag()??!1);return(0,P.useEffect)(()=>{if((e||p.W.premiumRequestQuotasEnabled)&&void 0!==t){let r=q.J.getMeterBannerFlag();t>0&&t<=na||!e&&n>0&&n<=na||!e&&a&&i?null===r?(q.J.setMeterBannerFlag(!0),o(!0)):o(r):(q.J.removeMeterBannerFlag(),o(!1))}},[e,t,n,i,a]),{visible:r&&void 0!==t&&(e||p.W.premiumRequestQuotasEnabled),onDismiss:()=>{q.J.setMeterBannerFlag(!1),o(!1)}}}(),i=function(){let[e,t]=(0,P.useState)(()=>(q.J.getTrialSuccessBannerFlag()&&!q.J.getProPlusSuccessBannerFlag())??!1);return{visible:e,onDismiss:()=>{q.J.removeTrialSuccessBannerFlag(),t(!1)}}}(),r=function(){let[e,t]=(0,P.useState)(()=>q.J.getProPlusSuccessBannerFlag()??!1);return{visible:e,onDismiss:()=>{q.J.removeProPlusSuccessBannerFlag(),q.J.removeTrialSuccessBannerFlag(),t(!1)}}}(),o=function(){let e=(0,h.pn)(e=>(0,m.Z6)(e.currentTopic)?e.currentTopic:void 0),t=(0,h.pn)(e=>e.currentReferences.find(e=>"docset"===e.type));return p.W.topicsAsReferences?null:e??t}();return(0,c.jsxs)(c.Fragment,{children:[!a.visible&&!t&&!i.visible&&!o&&!e&&(0,c.jsx)(nt,{}),a.visible&&(0,c.jsx)(ni,{className:t4.banner,onDismiss:a.onDismiss}),t&&(0,c.jsx)(t3.P,{ambientError:t,useLargerBorderRadius:!0}),i.visible&&n===e3.mF.LicensedFull&&(0,c.jsx)(nd,{className:t4.banner,onDismiss:i.onDismiss}),r.visible&&(0,c.jsx)(nn,{className:t4.banner,onDismiss:r.onDismiss}),o&&(0,c.jsx)(ns,{topic:o})]})}try{nu.displayName||(nu.displayName="ChatInputBanners")}catch{}var nm=n(14987),np=n(80938),nh=n(25408),nf=n(57393),ng=n(2640),ny=n(57516),nv=n(47139),nx=n(87335),n_=n(32837),nC=n(4460);function nj(){let e=(0,et.b)();return(0,P.useCallback)(async t=>{window.location.pathname!==m.Jz&&((0,nC.kd)(m.Jz),e.dispatch({type:"SELECT_PLUGIN",plugin:null}),await e.selectThread(null,t))},[e])}var nb=n(53526),nN=n(73451),nI=n(9591),nS=n(74144);let nw={hideOnDesktop:"ConversationActions-module__hideOnDesktop--zHNNV"};var nE=n(37404),nT=n(76797),nk=n(52464);let nA={container:"ConversationSharingDialog-module__container--AYIbb",innerContainer:"ConversationSharingDialog-module__innerContainer--aF_PO",infoIcon:"ConversationSharingDialog-module__infoIcon--rNWFs",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--ccuni",textInputContainer:"ConversationSharingDialog-module__textInputContainer--IoJB6",textInput:"ConversationSharingDialog-module__textInput--hqfoz",success:"ConversationSharingDialog-module__success--IlwFA",spinner:"ConversationSharingDialog-module__spinner--yV4lB",successIcon:"ConversationSharingDialog-module__successIcon--tw4y6",mutedText:"ConversationSharingDialog-module__mutedText--VVQZ_",warningText:"ConversationSharingDialog-module__warningText--Pp3s_",snapshotText:"ConversationSharingDialog-module__snapshotText--Rrl0m",buttonStack:"ConversationSharingDialog-module__buttonStack--uAtQJ",lockIcon:"ConversationSharingDialog-module__lockIcon--zZ_aM",cancelButton:"ConversationSharingDialog-module__cancelButton--TjQ9X",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--FrM1T"},nP=({closeDialog:e,threadId:t})=>{let n=(0,h.Pk)(),a=(0,et.b)(),[i,r]=(0,P.useState)(!1),[o,s]=(0,P.useState)(!1),[l,d]=(0,P.useState)(!1),[u,m]=(0,P.useState)(!1),{selectedThreadID:f,ssoOrganizations:g,apiUrl:y,threads:v}=n,x=v.get(t||f),[_,b]=(0,P.useState)(()=>x?.sharedID||""),[N,I]=(0,P.useState)(()=>x?.sharedMessageID?x.sharedMessageID:""),S=C.fV.origin,w=`${S}/copilot/share/${_}`;(0,P.useEffect)(()=>{if(i){let e=setTimeout(()=>r(!1),1500);return()=>clearTimeout(e)}},[i]),(0,P.useEffect)(()=>{if(l){let e=setTimeout(()=>d(!1),1500);return()=>clearTimeout(e)}},[l]);let E=(0,P.useCallback)(async()=>{try{await (0,nT.D)(w),r(!0),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},[w]);(0,P.useEffect)(()=>{(t||f)&&b(x?.sharedID||"")},[x?.sharedID,f,t]);let T=(0,P.useCallback)(async()=>{s(!0);let e=t||f,n=new nE.k(y,g),i=await n.shareThread(e,p.W.copilotShareActiveSubthread&&e===f?a.FindLastMessageID():"");if(i.ok){s(!1);let{sharedAt:t,sharedID:n,sharedMessageID:r}=i.payload;b(n),d(!0),I(r),a.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:n,sharedAt:t,sharedMessageID:r}}),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive"})}else s(!1)},[y,a,f,g,t]),k=(0,P.useCallback)(async()=>{if(!u){m(!0);return}m(!1),s(!0);let e=t||f,n=new nE.k(y,g),i=await n.unshareThread(e);if(i.ok){s(!1),I("");let{sharedID:t,sharedAt:n,sharedMessageID:r}=i.payload;a.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:n,sharedMessageID:r}}),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive"})}else s(!1)},[y,a,f,u,g,t]);return(0,c.jsx)(nS.l,{title:_?"Conversation shared":"Share conversation",onClose:e,width:"large",children:(0,c.jsxs)("div",{className:nA.container,children:[(0,c.jsxs)(A.B,{direction:"vertical",gap:"condensed",children:[(0,c.jsx)(A.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:N?(0,c.jsxs)("span",{children:[(0,c.jsx)("span",{className:nA.snapshotText,children:"This shared conversation is a snapshot"}),", accessible to anyone with the link. It will not update with new messages."]}):_?(0,c.jsx)("span",{children:"This conversation and future messages are visible to anyone with the link. If private repository content is included, repository access is required to view."}):(0,c.jsx)("span",{children:"When shared, this conversation and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view."})}),(0,c.jsx)("div",{className:nA.innerContainer,children:(0,c.jsx)("div",{className:nA.sharedLinkContainer,children:(0,c.jsx)("div",{className:nA.textInputContainer,children:(0,c.jsx)(nI.A,{"aria-label":"Shared link",size:"large",readOnly:!0,value:_&&w,placeholder:_?void 0:"https://github.com/copilot/share/\u2026",className:nA.textInput,trailingAction:_?(0,c.jsx)(nI.A.Action,{onClick:()=>void E(),icon:j.CopyIcon,"aria-label":"Copy link"}):void 0})})})})]}),(0,c.jsxs)(A.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:nA.buttonStack,children:[o?(0,c.jsxs)("div",{className:nA.quickFadeUp,children:[(0,c.jsx)(t_.A,{size:"small",className:nA.spinner}),_?"Unsharing conversation...":"Sharing conversation..."]}):u?(0,c.jsxs)("div",{className:nA.quickFadeUp,children:[(0,c.jsx)(nk.A,{size:"medium",className:nA.warningText,children:"Confirm unsharing this conversation?"}),(0,c.jsx)(e0.Q,{variant:"default",onClick:()=>m(!1),className:nA.cancelButton,children:"Cancel"})]}):i?(0,c.jsxs)("div",{className:nA.quickFadeUp,children:[(0,c.jsx)(j.CheckIcon,{className:nA.successIcon}),(0,c.jsx)(nk.A,{size:"medium",className:nA.success,children:"Copied to clipboard"})]}):l?(0,c.jsxs)("div",{className:nA.quickFadeUp,children:[(0,c.jsx)(j.CheckIcon,{className:nA.successIcon}),(0,c.jsx)(nk.A,{size:"medium",className:nA.success,children:"Conversation shared"})]}):_?(0,c.jsxs)("div",{children:[(0,c.jsx)(j.UnlockIcon,{className:nA.lockIcon}),(0,c.jsx)(nk.A,{size:"medium",className:nA.mutedText,children:"Visible to anyone with the link"})]}):(0,c.jsx)("div",{}),(()=>{if(!_)return(0,c.jsx)(e0.Q,{variant:"primary",disabled:o,onClick:T,children:"Share"})})(),(()=>{if(_)return(0,c.jsx)(e0.Q,{variant:"danger",disabled:o,onClick:k,children:"Unshare"})})()]})]})})};try{nP.displayName||(nP.displayName="ConversationSharingDialog")}catch{}function nL({onOpenDialog:e,showShare:t=!0,hideShareOnDesktop:n=!1,isShared:a=!1}){let{canShareThread:i}=(0,g.X)(),{isWaitingOnCopilot:r,messages:o}=(0,h.Pk)(),s=(0,m.Q7)(o).length>0||r;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eu.l.Item,{onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),e("rename")},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.PencilIcon,{})}),"Rename"]}),t&&i&&(0,c.jsxs)(eu.l.Item,{className:n?nw.hideOnDesktop:void 0,disabled:s,onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),e("share")},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:a?(0,c.jsx)(j.UnlockIcon,{}):(0,c.jsx)(j.LockIcon,{})}),"Share"]}),(0,c.jsxs)(eu.l.Item,{variant:"danger",onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),e("delete")},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.TrashIcon,{})}),"Delete"]})]})}function nD({visibleDialog:e,onClose:t,threadName:n,threadId:a,selectedThreadId:i,onStartLoading:r,onFinishLoading:o}){let{threads:s}=(0,h.Pk)(),l=(0,et.b)(),d=nj(),u=(0,P.useCallback)(async()=>{t(),(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),r();let e=s.get(a);e&&(a===i&&await d({clearTopic:!0,includeThreads:!1}),await l.deleteThread(e)),o()},[s,a,i,d,l,o,r,t]),m=(0,P.useCallback)(async e=>{t(),(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),r();let n=s.get(a);n&&await l.renameThread(n,e),o()},[s,a,l,r,o,t]);return(0,c.jsx)(c.Fragment,{children:"delete"===e?(0,c.jsx)(nR,{onCancel:t,onConfirm:u}):"rename"===e?(0,c.jsx)(nO,{currentName:n,onCancel:t,onSubmit:m}):"share"===e?(0,c.jsx)(nP,{closeDialog:()=>{t(),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},threadId:a}):null})}let nR=({onConfirm:e,onCancel:t})=>(0,c.jsx)(nb.K,{title:"Delete conversation",onClose:n=>{"confirm"===n?((0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"}),e()):((0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),t())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),nO=({currentName:e,onCancel:t,onSubmit:n})=>{let[a,i]=(0,P.useState)(void 0),r=(0,P.useRef)(null),o=(0,P.useId)(),s=(0,P.useId)(),l=()=>{(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),t()};return(0,c.jsx)(nS.l,{title:(0,c.jsx)("span",{id:s,children:"Rename conversation"}),onClose:l,width:"small",footerButtons:[{content:"Cancel",onClick:l},{content:"Update",buttonType:"primary",type:"submit",form:o,onClick:()=>(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}],initialFocusRef:r,children:(0,c.jsx)("form",{id:o,onSubmit:e=>{e.preventDefault();let t=r.current?.value?.trim()??"";t?t.length>100?i("max_length"):n(t):i("required")},children:(0,c.jsxs)(nN.A,{required:!0,children:[(0,c.jsx)(nN.A.Label,{visuallyHidden:!0,children:"Rename conversation"}),(0,c.jsx)(nI.A,{"aria-labelledby":s,ref:r,defaultValue:e,maxLength:100,block:!0}),"required"===a&&(0,c.jsx)(nN.A.Validation,{variant:"error",children:"Enter a name"}),"max_length"===a&&(0,c.jsx)(nN.A.Validation,{variant:"error",children:"Name cannot exceed 100 characters"})]})})})};try{nL.displayName||(nL.displayName="ConversationActions")}catch{}try{nD.displayName||(nD.displayName="ConversationActionDialogs")}catch{}try{nR.displayName||(nR.displayName="DeleteDialog")}catch{}try{nO.displayName||(nO.displayName="RenameDialog")}catch{}var nM=n(42522);let nB={shareButton:"ManageSharedConversationButton-module__shareButton--A4cNu",menuButton:"ManageSharedConversationButton-module__menuButton--BAXN7",successState:"ManageSharedConversationButton-module__successState--o6D7d",hideOnMobile:"ManageSharedConversationButton-module__hideOnMobile--HzeSN"},nF={container:"UnshareConversationDialog-module__container--vV3vj",buttonStack:"UnshareConversationDialog-module__buttonStack--IQJqH",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--iNgZ2",threadTitle:"UnshareConversationDialog-module__threadTitle--aYFcp",threadDescription:"UnshareConversationDialog-module__threadDescription--Cpoli"},nU=({closeDialog:e,threadId:t})=>{let n=(0,h.Pk)(),a=(0,et.b)(),{selectedThreadID:i,ssoOrganizations:r,apiUrl:o,threads:s}=n,[l,d]=(0,P.useState)(n.messages),[u,m]=(0,P.useState)(()=>{let e=s.get(t);return e?.sharedID||""}),p=(0,P.useRef)(""!==u);(0,P.useEffect)(()=>{let e=async()=>{if(0===l.filter(e=>e.threadID===t).length){let e=new nE.k(n.apiUrl,n.ssoOrganizations),t=await e.listSharedThreadMessages(u);t.ok&&d(t.payload.messages)}};u&&e()},[u,t]);let f=s.get(t||i),g=l[l.length-1],y=g?.content||"";(0,P.useEffect)(()=>{let e=t||i;if(e){let t=s.get(e);m(t?.sharedID||"")}},[a,m,i,s,t]);let v=(0,P.useCallback)(async()=>{let n=t||i,s=new nE.k(o,r),l=await s.unshareThread(n);if(l.ok){let{sharedID:t,sharedAt:i,sharedMessageID:r}=l.payload;a.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:n,sharedID:t,sharedAt:i,sharedMessageID:r}}),p.current=!1,e(),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive"})}},[o,e,a,i,r,t]),x=(0,P.useCallback)(()=>{e()},[e]);return(0,c.jsx)(nS.l,{title:"Unshare conversation",onClose:x,width:"large",children:(0,c.jsxs)("div",{className:nF.container,children:[(0,c.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),(0,c.jsxs)(A.B,{direction:"vertical",className:nF.threadInfoStack,"aria-label":"Thread information",children:[(0,c.jsx)("span",{className:nF.threadTitle,children:f?.name||""}),(0,c.jsx)("span",{className:nF.threadDescription,children:y})]}),(0,c.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),(0,c.jsxs)(A.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:nF.buttonStack,children:[(0,c.jsx)(e0.Q,{onClick:e,children:"Cancel"}),(()=>{if(u)return(0,c.jsx)(e0.Q,{onClick:v,variant:"danger",children:"Unshare"})})()]})]})})};try{nU.displayName||(nU.displayName="UnshareConversationDialog")}catch{}let n$=({openDialog:e})=>{let{selectedThreadID:t,threads:n}=(0,h.Pk)(),[a,i]=(0,P.useState)(!1),[r,o]=(0,P.useState)(!1),[s,l]=(0,P.useState)(!1),[d,u]=(0,P.useState)("Copy link"),p=n.get(t)?.sharedID,f=`${C.fV.origin}/copilot/share/${p||"\u2026"}`,{messages:g}=(0,h.Pk)(),y=(0,m.Q7)(g).length>0,v=(0,P.useCallback)(async e=>{"preventDefault"in e&&(e.preventDefault(),e.stopPropagation());try{await (0,nT.D)(f),o(!0),u("Copied!"),setTimeout(()=>{o(!1),u("Copy link")},2e3),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},[f]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(t8.A,{"data-testid":"manage-shared-conversations",className:`${nB.shareButton} ${nB.hideOnMobile}`,children:[(0,c.jsx)(nM.m,{text:y?"Disabled for Copilot extensions":"Anyone with the link can view this conversation",direction:"n",type:"label",children:(0,c.jsx)(e0.Q,{leadingVisual:j.UnlockIcon,onClick:()=>{y||e()},inactive:y,children:"Share"})}),(0,c.jsxs)(ed.W,{open:s,onOpenChange:l,children:[(0,c.jsx)(ed.W.Button,{"aria-label":"Additional share options",icon:j.TriangleDownIcon,className:nB.menuButton}),(0,c.jsx)(ed.W.Overlay,{width:"small",children:(0,c.jsx)(eu.l,{children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eu.l.Item,{onSelect:v,children:[(0,c.jsx)(eu.l.LeadingVisual,{children:r?(0,c.jsx)(j.CheckIcon,{className:nB.successState}):(0,c.jsx)(j.CopyIcon,{})}),(0,c.jsx)("span",{className:r?nB.successState:void 0,children:d})]},"copy-link"),(0,c.jsxs)(eu.l.Item,{variant:"danger",onSelect:()=>{i(!0),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_OPEN",mode:"immersive"})},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.UnlinkIcon,{})}),"Unshare"]},"Unshare-link")]})})})]})]}),a&&(0,c.jsx)(nU,{threadId:t,closeDialog:()=>{i(!1),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_CLOSE",mode:"immersive"})}})]})};try{n$.displayName||(n$.displayName="ManageSharedConversationButton")}catch{}let nV={shareButton:"ShareConversationButton-module__shareButton--_CML9",hideOnMobile:"ShareConversationButton-module__hideOnMobile--AYVjz"},nz=({openDialog:e})=>{let{messages:t}=(0,h.Pk)(),n=(0,m.Q7)(t).length>0;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(nM.m,{text:n?"Disabled for Copilot extensions":"This conversation has not yet been shared",direction:"n",type:"label",children:(0,c.jsx)(e0.Q,{leadingVisual:j.LockIcon,inactive:n,onClick:()=>{n||e()},className:`${nV.shareButton} ${nV.hideOnMobile}`,children:"Share"})})})};try{nz.displayName||(nz.displayName="ShareConversationButton")}catch{}let nW=()=>{let{selectedThreadID:e,threads:t}=(0,h.Pk)(),n=!!(e&&t.get(e)?.sharedID),[a,i]=(0,P.useState)(!1),r=()=>{i(!0),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_OPEN",mode:"immersive"})};return(0,c.jsxs)(c.Fragment,{children:[n?(0,c.jsx)(n$,{openDialog:r}):(0,c.jsx)(nz,{openDialog:r}),a&&(0,c.jsx)(nP,{closeDialog:()=>{i(!1),(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})}})]})};try{nW.displayName||(nW.displayName="ConversationSharingButton")}catch{}let nH={header:"Header-module__header--ufLgW",centerControls:"Header-module__centerControls--R1eiB",rightControls:"Header-module__rightControls--Ce65x",editedPromptIndicator:"Header-module__editedPromptIndicator--k1vcE",leadingVisual:"Header-module__leadingVisual--O6MuP"};var nq=n(8386),nG=n(56221);let nK={dialog:"ManageSharedConversationsDialog-module__dialog--kEiyu",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--JL7Md",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--vcDiF",footer:"ManageSharedConversationsDialog-module__footer--qEM5d",mutedText:"ManageSharedConversationsDialog-module__mutedText--ZU5NV",footerContent:"ManageSharedConversationsDialog-module__footerContent--x0AC3",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--hfY2Z",footerRight:"ManageSharedConversationsDialog-module__footerRight--bhyxU",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--h4QXT",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--L_rid",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--kiSX1"},nQ=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},nZ=({closeDialog:e})=>{let t=(0,et.b)(),n=(0,h.Pk)(),[a,i]=(0,P.useState)(0),[r,o]=(0,P.useState)([]),[s,l]=(0,P.useState)(!0),[d,u]=(0,P.useState)(!1),[m,p]=(0,P.useState)(null),[f,g]=(0,P.useState)(!1),[y,v]=(0,P.useState)(5>r.length),x=5*a,_=r.slice(x,x+5);(0,P.useEffect)(()=>{(async()=>{let e=await t.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:nQ(e.updatedAt),sharedUrl:`${C.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${C.fV.origin}/copilot/c/${e.id}`}))),l(!1)})()},[t]),(0,P.useEffect)(()=>{y&&a>0&&r.length<=5*a&&i(0),v(5<r.length)},[r,a,5]);let b=(0,P.useCallback)(()=>{e()},[e]),N=(0,P.useCallback)(async()=>{if(!f){g(!0);return}g(!1),l(!0);try{(await t.unshareAllThreads()).ok&&(o([]),await t.fetchThreads())}finally{l(!1)}},[f,t]),I=e=>{p(e),u(!0)},S=async()=>{u(!1),p(null),l(!0);let e=await t.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:nQ(e.updatedAt),sharedUrl:`${C.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${C.fV.origin}/copilot/c/${e.id}`}))),l(!1)},w=s||"error"===n.sharedThreadsLoading.state||0===r.length,E=(0,P.useMemo)(()=>{if(!r.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{f?N():g(!0)}};return f?[{buttonType:"default",content:"Cancel",onClick:()=>g(!1)},e]:[e]},[r.length,f,N]),T=e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`,L=(0,P.useMemo)(()=>s?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===n.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[s,n.sharedThreadsLoading.state]);return(0,c.jsxs)(nS.l,{title:"Manage shared conversations",width:"xlarge",className:nK.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:b,renderFooter:()=>E?.length?(0,c.jsx)(nS.l.Footer,{className:nK.footer,children:(0,c.jsxs)("div",{className:nK.footerContent,children:[(0,c.jsx)("div",{className:nK.footerLeft,children:f&&(0,c.jsx)("div",{className:`${nK.confirmationText} ${nK.quickFadeUp}`,children:T(r.length)})}),(0,c.jsx)("div",{className:nK.footerRight,children:(0,c.jsx)(nS.l.Buttons,{buttons:E})})]})}):null,children:[w?(0,c.jsxs)(eh.A,{children:[(0,c.jsx)(eh.A.Visual,{children:L.isSpinner?(0,c.jsx)(A.B,{direction:"horizontal",align:"center",children:(0,c.jsx)(t_.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,c.jsx)("div",{className:nK.mutedText,children:"error"===L.result?(0,c.jsx)(j.AlertIcon,{size:"medium",className:nK.alertIcon,"aria-label":"Error loading shared conversations"}):(0,c.jsx)(j.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,c.jsx)(eh.A.Heading,{children:L.heading}),(0,c.jsx)(eh.A.Description,{children:L.description})]}):(0,c.jsxs)(nq.X.Container,{children:[(0,c.jsx)(nG.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,c.jsx)(ep.A,{href:e.threadUrl,className:nK.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,c.jsx)("span",{className:nK.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,c.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:nK.actionButtons,children:[(0,c.jsx)(te.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,c.jsx)(k.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:j.UnlinkIcon,variant:"invisible",onClick:()=>I(e)})]})})}],data:_}),r.length>5&&(0,c.jsx)(nq.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,defaultPageIndex:a,totalCount:r.length,onChange:e=>{i(e.pageIndex)},showPages:!1})]}),d&&m&&(0,c.jsx)(nU,{threadId:m.id,closeDialog:S})]})};try{nZ.displayName||(nZ.displayName="ManageSharedConversationsDialog")}catch{}let nX={content:"PreviewModelCapabilityWarning-module__content--oyFl0",header:"PreviewModelCapabilityWarning-module__header--r2ydd",row:"PreviewModelCapabilityWarning-module__row--u6n_X",rowIcon:"PreviewModelCapabilityWarning-module__rowIcon--dTgPI"};function nJ(){let e=(0,h.A3)("model"),[t,n]=(0,P.useState)(!1),a=(0,P.useRef)(null);return e&&e.hasLimitedCapabilities?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(k.K,{className:"fgColor-accent",variant:"invisible","aria-label":"Model capabilities",icon:()=>(0,c.jsx)(j.InfoIcon,{className:"fgColor-accent"}),ref:a,onClick:()=>{n(!0),(0,U.BI)("dotcom_chat.activate",{target:"PREVIEW_MODEL_INFO_OPEN",mode:"immersive"})}}),t&&(0,c.jsx)(nS.l,{title:`Limited capabilities (${e.displayName})`,width:"large",onClose:()=>{n(!1),(0,U.BI)("dotcom_chat.activate",{target:"PREVIEW_MODEL_INFO_CLOSE",mode:"immersive"})},returnFocusRef:a,children:(0,c.jsxs)("div",{className:nX.content,children:[(0,c.jsxs)("p",{children:["This model has limited capabilities in retrieving external data. Learn more about selecting the right model"," ",(0,c.jsx)("a",{href:"https://docs.github.com/en/copilot/using-github-copilot/ai-models/choosing-the-right-ai-model-for-your-task",target:"_blank",rel:"noopener noreferrer",children:"here"}),". Here are a few of the common actions that are not supported:"]}),(0,c.jsxs)("ul",{className:"border rounded-2",children:[(0,c.jsx)("h3",{className:nX.header,children:"Not supported"}),(0,c.jsxs)("li",{className:nX.row,children:[(0,c.jsx)(j.BookIcon,{className:nX.rowIcon})," Using knowledge bases"]}),(0,c.jsxs)("li",{className:nX.row,children:[(0,c.jsx)(j.IssueOpenedIcon,{className:nX.rowIcon})," Retrieving issues"]}),(0,c.jsxs)("li",{className:nX.row,children:[(0,c.jsx)(j.GitPullRequestIcon,{className:nX.rowIcon})," Retrieving pull requests"]}),(0,c.jsxs)("li",{className:nX.row,children:[(0,c.jsx)(j.CommentDiscussionIcon,{className:nX.rowIcon})," Retrieving discussions"]})]})]})})]}):null}try{nJ.displayName||(nJ.displayName="PreviewModelCapabilityWarning")}catch{}var nY=n(67416);let n0=()=>{let e=(0,h.Pk)(),t=(0,tJ.d)(),n=(0,G.JB)(e.customCopilots,t),a=(0,G.hH)()||n,i=!(0,G.k1)()&&n;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];a&&e.push({label:"Spaces",href:m.VR}),i&&n&&e.push({label:n.name,href:(0,G.Cb)(n)}),(0,nY.FC)(e)}}},n1={dialog:"SystemPromptDialog-module__dialog--DZtq2",content:"SystemPromptDialog-module__content--OeMCM",description:"SystemPromptDialog-module__description--eb7_P",textareaContainer:"SystemPromptDialog-module__textareaContainer--MN8c4",textarea:"SystemPromptDialog-module__textarea--MK1JE"},n2=(0,P.forwardRef)(function(e,t){let n=(0,et.b)(),[a,i]=(0,P.useState)(!1),[r,o]=(0,P.useState)(void 0);return(0,P.useImperativeHandle)(t,()=>({openDialog:()=>i(!0)})),(0,P.useEffect)(()=>{(async()=>{o(await n.getSystemPrompt())})()},[n]),(0,c.jsx)(c.Fragment,{children:a&&(0,c.jsx)(nS.l,{onClose:()=>{i(!1),(0,U.BI)("dotcom_chat.activate",{target:"SYSTEM_PROMPT_DIALOG_CLOSE",mode:"immersive"})},title:"System prompt",renderBody:()=>(0,c.jsxs)("div",{className:n1.content,children:[(0,c.jsxs)("p",{className:n1.description,children:["The system prompt for"," ",(0,c.jsx)(ep.A,{muted:!0,inline:!0,href:"https://github.com/copilot",children:"GitHub Copilot"})," ","is a set of instructions that guides the LLM to provide enhanced functionality and output quality based on user input."]}),(0,c.jsx)("div",{className:n1.textareaContainer,children:(0,c.jsx)("textarea",{className:n1.textarea,readOnly:!0,children:r})})]}),className:n1.dialog})})});try{n2.displayName||(n2.displayName="SystemPromptDialog")}catch{}function n5({showModelPicker:e=!0,showPreviewPaneButton:t=!0,conversationSpecificItems:n}){let a=(0,et.b)(),i=(0,h.Pk)(),{currentTopic:r,repoCustomInstructionsEnabled:o,selectedThreadID:s,threads:l,messagesLoading:d,currentReferences:u}=i,f=(0,h.pn)(e=>(0,m.CB)(a.getSelectedThread(e))),y=tY(),v=(0,tJ.d)(),x=(0,G.JB)(i.customCopilots,v);x?(0,ng.D)(`${f} \xb7 GitHub Copilot Spaces \xb7 ${x.name}`):y?(0,ng.D)(`Shared conversation \xb7 GitHub Copilot`):(0,ng.D)(`${f} \xb7 GitHub Copilot`);let{updateGlobalNavigationBreadcrumbs:_}=n0();(0,P.useEffect)(()=>{_()},[_,v]);let b=(0,P.useRef)(null),N=(0,P.useRef)(null),I=nj(),S=(0,P.useMemo)(()=>(0,ny.X)(),[]),w=(0,eJ.G7)("copilot_staff_prompt_dialog")&&S,[E,T]=(0,P.useState)(!1),[A,L]=(0,P.useState)(!1),D=(0,P.useRef)(null),R=!!q.J.settings?.instructionPrompt,{isLicensedLimited:O}=(0,H.x)(),M=p.W.repoCustomInstructions||p.W.repoCustomInstructionsPreview,{previewPaneOpen:F,openPreviewPane:$}=(0,B.xx)(),V=(0,P.useRef)(null),[z,W]=(0,P.useState)(null),K=r?.customInstructions||[];p.W.topicsAsReferences&&(K=(0,m.NJ)(u));let Q=M&&K.length>0,[Z,X,J]=(0,n_.B)(!1),{canShareThread:Y}=(0,g.X)(),ee="loaded"===d.state,en=v&&C.fV?.pathname!==m.VR,[ea,er]=(0,P.useState)(!1),eo=Y&&!y&&s&&!v&&ee;return(0,c.jsxs)("div",{className:nH.header,children:[(0,c.jsx)("div",{className:nH.centerControls,children:e&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(np.Yb,{onNewThreadSelected:I,limited:O}),(0,c.jsx)(nJ,{})]})}),(0,c.jsxs)("div",{className:nH.rightControls,children:[eo&&(0,c.jsx)(nW,{}),(0,c.jsxs)(ed.W,{anchorRef:V,children:[(0,c.jsx)(ed.W.Anchor,{children:(0,c.jsx)(k.K,{icon:j.KebabHorizontalIcon,"aria-label":"Menu",onClick:()=>(0,U.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"}),className:(0,ei.$)(R&&nH.editedPromptIndicator),loading:Z})}),(0,c.jsx)(ed.W.Overlay,{width:"small",children:(0,c.jsxs)(eu.l,{children:[n,s&&!y&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eu.l.Group,{children:[(0,c.jsx)(eu.l.GroupHeading,{children:"Conversation"}),(0,c.jsx)(nL,{onOpenDialog:W,isShared:!!l.get(s)?.sharedID,showShare:!v,hideShareOnDesktop:!0})]}),(0,c.jsx)(eu.l.Divider,{})]}),(0,c.jsxs)(eu.l.Group,{children:[(0,c.jsx)(eu.l.GroupHeading,{children:"Prompt"}),Q&&(0,c.jsxs)(eu.l.Item,{onSelect:()=>{a.toggleRepoCustomInstructions(!o)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.RepoIcon,{})}),o?"Disable custom instructions":"Enable custom instructions"]}),(0,c.jsxs)(eu.l.Item,{onSelect:()=>{L(!0),(0,U.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.NoteIcon,{})}),"Personal instructions"]}),(0,c.jsxs)(eu.l.Item,{onSelect:()=>{N.current?.openDialog(),(0,U.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SYSTEM_PROMPT",mode:"immersive"})},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.CpuIcon,{})}),"System prompt"]}),w&&(0,c.jsxs)(eu.l.Item,{onSelect:()=>T(!0),children:[(0,c.jsx)(eu.l.LeadingVisual,{children:R?(0,c.jsx)("span",{className:(0,ei.$)(nH.editedPromptIndicator,nH.leadingVisual),children:(0,c.jsx)(j.BeakerIcon,{})}):(0,c.jsx)(j.BeakerIcon,{})}),"Edit prompt",(0,c.jsx)(eu.l.TrailingVisual,{children:(0,c.jsx)(nv.A,{variant:"attention",children:"Staff"})})]})]}),(0,c.jsx)(eu.l.Divider,{}),(0,c.jsxs)(eu.l.Group,{children:[(0,c.jsxs)(eu.l.Item,{onSelect:()=>{er(!0)},children:["Manage shared conversations",(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.ListUnorderedIcon,{})})]}),(0,c.jsxs)(eu.l.Item,{onSelect:()=>{b.current?.openDialog(),(0,U.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:["Give feedback",(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.CommentIcon,{})})]}),O&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(eu.l.LinkItem,{href:"/github-copilot/signup/copilot_individual",onClick:()=>(0,U.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_UPGRADE_PRO",mode:"immersive"}),children:["Upgrade to Pro",(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.CopilotIcon,{})})]})}),(0,c.jsxs)(eu.l.LinkItem,{href:"/settings/copilot",onClick:()=>(0,U.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"}),children:["Settings",(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.GearIcon,{})})]})]})]})})]}),t&&!F&&!en&&(0,c.jsx)(k.K,{icon:j.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),$()}}),(0,c.jsx)(n2,{ref:N}),(0,c.jsx)(nm.l,{ref:b,mode:"immersive",returnFocusRef:V}),s&&(0,c.jsx)(nD,{visibleDialog:z,onClose:()=>{(0,nx.flushSync)(()=>W(null)),V.current?.focus()},threadName:f,threadId:s,selectedThreadId:s,onStartLoading:X,onFinishLoading:J})]}),E&&(0,c.jsx)(nf.X,{promptDialogRef:D,onDismiss:()=>T(!1)}),A&&(0,c.jsx)(nh.Y,{onDismiss:()=>L(!1),returnFocusRef:V}),ea&&(0,c.jsx)(nZ,{closeDialog:()=>{er(!1)}})]})}try{n5.displayName||(n5.displayName="Header")}catch{}var n3=n(56056),n4=n(26871),n6=n(89401),n7=n(2120),n9=n(39363),n8=n(72659),ae=n(66349),at=n(72160),an=n(67264),aa=n(61982),ai=n(47920),ar=n(32132);let ao=({functionCall:e,manager:t,panelWidth:n,messageInterrupted:a})=>{let{functionMetadata:i,functionRenderer:r,parsedArgs:o}=(0,ar.BO)(e),s=(0,P.useMemo)(()=>a&&"started"===e.status?{...e,status:"error"}:e,[e,a]);return(0,c.jsx)(c.Fragment,{children:i&&r&&o&&r(s,i,t,n,o,!1)})};try{ao.displayName||(ao.displayName="FunctionCallBadge")}catch{}var as=n(79887),al=n(82005),ac=n(73786),ad=n(4181),au=n(50260),am=n(40650),ap=n(53914),ah=n(34407),af=n(11499),ag=n(1088);let ay={imageAttachment:"ChatImageAttachment-module__imageAttachment--YlPWs"},av=({messageId:e,src:t,alt:n,name:a,mode:i})=>{let{openPreviewPane:r,openItem:o,updateItem:s}=(0,B.xx)(),l=`image:${t}`,d=(0,P.useCallback)(e=>{e.metaKey||e.ctrlKey||((0,U.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),o(l),r(),e.preventDefault())},[l,r,o]);return(0,P.useEffect)(()=>{s({altText:n,id:l,messageId:e,name:a,type:"image",url:t})},[l,n,e,a,t,s]),(0,c.jsx)("div",{className:ay.imageAttachment,children:(0,c.jsx)(ag.o,{src:t,alt:n,onClick:d,mode:i,useOverlay:!0})})},ax=(0,P.memo)(av);try{av.displayName||(av.displayName="ChatImageAttachmentUnmemoized")}catch{}try{ax.displayName||(ax.displayName="ChatImageAttachment")}catch{}let a_={chatMessage:"ChatMessage-module__chatMessage--rtt38",user:"ChatMessage-module__user--UoWHh",editing:"ChatMessage-module__editing--BMp49",content:"ChatMessage-module__content--MYneF",references:"ChatMessage-module__references--Kunt2",messageArea:"ChatMessage-module__messageArea--CoOmf",userMessage:"ChatMessage-module__userMessage--xvIFp",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--DJyyk",actions:"ChatMessage-module__actions--Jllb6",ai:"ChatMessage-module__ai--WrCO3",latest:"ChatMessage-module__latest--IZwZP",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--MCwTL",avatar:"ChatMessage-module__avatar--KYI8V",sharedThreadActions:"ChatMessage-module__sharedThreadActions--Z9ffu ChatMessage-module__actions--Jllb6",skillExecutionText:"ChatMessage-module__skillExecutionText--pIBPI",errorFallback:"ChatMessage-module__errorFallback--d0bNW",blinkingCursor:"ChatMessage-module__blinkingCursor--M3kDA"};function aC({className:e,messageId:t,messageIndex:n,messageTimestamp:a,references:i,size:r}){let o=t0({messageId:t,messageIndex:n,messageTimestamp:a}),{updateItem:s,versionedItems:l}=(0,B.xx)();return(0,P.useEffect)(()=>{for(let e of i){let i=(0,eN.oR)({ref:e,messageIndex:n,messageId:t,timestamp:a});null!=i&&s(i)}},[t,n,a,i,s]),(0,c.jsx)(ae.t,{references:i,onClickReference:o,size:r,className:e,getReferenceVersion:e=>(0,eN.wt)(e,n,l)})}try{aC.displayName||(aC.displayName="ChatMessageReferences")}catch{}let aj={container:"ChatPagingComponent-module__container--nH9hp",disabledButton:"ChatPagingComponent-module__disabledButton--hCGPC",pageIndicator:"ChatPagingComponent-module__pageIndicator--HoVKG"};function ab({currentPage:e,totalPages:t,onPrev:n,onNext:a,isUserMessage:i,disabled:r=!1}){if(e<1)throw Error("currentPage must be greater than or equal to 1");if(t<1)throw Error("totalPages must be greater than or equal to 1");if(e>t)throw Error("currentPage must be less than or equal to totalPages");let o=1===e||r,s=e===t||r,l=o?aj.disabledButton:"",d=s?aj.disabledButton:"";return(0,c.jsxs)("div",{className:aj.container,"data-testid":"chat-paging-component",children:[(0,c.jsx)(k.K,{variant:"invisible","aria-label":"Previous response",onClick:()=>{o||((0,U.BI)("dotcom_chat.activate",{target:i?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE",mode:"immersive"}),n(e-1))},icon:j.ChevronLeftIcon,className:l}),(0,c.jsxs)("span",{className:aj.pageIndicator,children:[e,"/",t]}),(0,c.jsx)(k.K,{variant:"invisible","aria-label":"Next response",onClick:()=>{s||((0,U.BI)("dotcom_chat.activate",{target:i?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE",mode:"immersive"}),a(e+1))},icon:j.ChevronRightIcon,className:d})]})}try{ab.displayName||(ab.displayName="ChatPagingComponent")}catch{}var aN=n(58011);let aI=(0,P.createContext)(null),aS=()=>{let e=(0,P.useContext)(aI);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{aI.displayName||(aI.displayName="ContentPreviewBlockContext")}catch{}var aw=n(19919),aE=n(47970),aT=n(66211),ak=n(53110);function aA({className:e}){return(0,c.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:e,children:[(0,c.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,c.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,c.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})})]})}try{aA.displayName||(aA.displayName="ExpandIcon")}catch{}let aP={container:"FileBlock-module__container--zWu5c",header:"FileBlock-module__header--X7DLN",language:"FileBlock-module__language--fbEB2",name:"FileBlock-module__name--rkkGx",previewCode:"FileBlock-module__previewCode--EieE9",isClipped:"FileBlock-module__isClipped--Z6AMg",expandIconContainer:"FileBlock-module__expandIconContainer--JwHHA",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--BRMgP"};function aL({language:e,name:t,code:n,line:a,children:i,isClipped:r,isStreaming:o,index:s,startOffset:l,endOffset:d}){let{message:u}=(0,n8.V)(),{updateItem:m,openItem:p,openPreviewPane:h,versionedItems:f,openItems:g}=(0,B.xx)(),{messageIndex:y,messageId:v,messageTimestamp:x,autoOpenPreviewPane:_,markdown:C,hasAutoOpenedPreviewPaneRef:b}=aS(),{name:N}=(0,ti.vL)(e),I=`file:${t}`,S=`${I}#${y}.${a}`,w=!!n,E=f.get(I)??[],T=E.indexOf(S),A=E.length>1&&-1!==T?T+1:null,L=(0,P.useCallback)((e,t=!0)=>{(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive"}),p(S,t||g.length<1||0===s),e&&h()},[p,S,g.length,s,h]);(0,P.useEffect)(()=>{let a=n?.trimEnd();w&&v!==e3.Wp&&-1!==C.indexOf(a)&&m({messageId:v,id:S,language:e,name:t,value:n,type:"file",timestamp:new Date(x),isStreaming:o,isUserEdited:!1})},[n,e,v,t,m,S,w,x,o,C]),(0,P.useEffect)(()=>{o&&w&&v!==e3.Wp&&(L(_&&!b.current,!1),b.current=!0)},[o,w,L,_,v,b]);let[D,R]=(0,P.useState)(!1),{publicCodeReferences:O,codeVulnerabilities:M}=(0,aT.R)(u.copilotAnnotations,l,d);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"position-relative",children:[(0,c.jsxs)("button",{className:aP.container,onClick:()=>L(!0),"aria-label":`View file: ${t}`,"data-testid":`chat-message-view-file-${t}`,children:[(0,c.jsxs)("div",{className:aP.header,children:[(0,c.jsxs)("div",{className:aP.language,children:[o?(0,c.jsx)(t_.A,{size:"small",className:aN.sX}):ti.Yr.has(N)?(0,c.jsx)(j.MarkdownIcon,{className:aN.sX}):(0,c.jsx)(j.CodeIcon,{className:aN.sX}),(0,c.jsx)("span",{className:aP.name,children:t}),null!==A&&(0,c.jsx)(eb.g,{version:A})]}),(0,c.jsx)("div",{className:aP.expandIconContainer,children:(0,c.jsx)(aA,{})})]}),(0,c.jsx)("pre",{className:(0,ei.$)(aP.previewCode,r&&aP.isClipped),"aria-hidden":!0,children:(0,c.jsx)("code",{children:i})})]}),(O.length>0||M.length>0)&&(0,c.jsx)("div",{className:aP.insightsButtonContainer,children:(0,c.jsx)(k.K,{variant:"invisible",size:"small",icon:j.ShieldIcon,"aria-label":"Code insights",onClick:()=>R(!0)})})]}),D&&(0,c.jsx)(ak.t,{publicCodeReferences:O,codeVulnerabilities:M,onClose:()=>R(!1)})]})}try{aL.displayName||(aL.displayName="FileBlock")}catch{}let aD="data-fileblock-props",aR=(0,aw.F)(aD),aO=RegExp("^name=(?<name>[^\\s]+)"),aM=RegExp("^name=(?<name>[^\\s]+)\\n?"),aB={code:(e,t)=>{let n=(0,aw.k)(e,aD);return n?(0,c.jsx)(aL,{...n,children:e.children}):t}},aF=(RegExp("^(?<lang>[^\\s]+)\\s+type=(?<type>[^\\s]+)"),RegExp("^(?:`{3,}|~{3,})+(?<lang>[^\\s]+)\\ntype=(?<type>[^\\s]+)"),RegExp("^type=(?<type>[^\\s]+)\\n?")),aU=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;var a$=n(57210);let aV={container:"DraftIssueBlock-module__container--xuyX4",icon:"DraftIssueBlock-module__icon--unPEF",previewText:"DraftIssueBlock-module__previewText--G_AS3"},az="data-draft-issue-block",aW={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"type"in e&&"string"==typeof e.type&&(t.issueType=e.type),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),t}},aH=e=>{try{let t=(0,a$.load)(e);return aW.fromUnknown(t)}catch{return null}};function aq({yaml:e,isStreaming:t}){let[n,a]=(0,P.useState)(t);(0,P.useEffect)(()=>{t&&a(!0)},[t]);let{updateItem:i,openItem:r,openPreviewPane:o,versionedItems:s}=(0,B.xx)(),{messageId:l,messageIndex:d,autoOpenPreviewPane:u,hasAutoOpenedPreviewPaneRef:m}=aS(),p=(0,P.useRef)({}),h=(0,P.useMemo)(()=>{let t=aH(e);return null!=t?(p.current=t,t):p.current},[e]);(0,P.useEffect)(()=>(0,U.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"}),[]);let f=null!=h.tag?`new-issue:${h.tag}#${d}`:void 0,g=null!=f?(0,eN.LU)(f,s):null,y=(0,P.useCallback)(({userInitiated:e})=>{null!=f&&(r(f,e),(e||u&&!m.current)&&(o(),m.current=!0),(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[f,r,o,u,m]);(0,P.useEffect)(()=>{null!=f&&i({messageId:l,name:h.title??"",body:h.body,repository:h.repository,id:f,type:"new-issue",tag:h.tag??"",isStreaming:t,template:h.template,issueType:h.issueType,milestone:h.milestone,assignees:h.assignees?.sort()??[],labels:h.labels?.sort()??[],projects:h.projects?.sort()??[],isUserEdited:!1})},[f,t,h.assignees,h.body,h.tag,h.title,h.labels,h.template,h.issueType,h.projects,h.milestone,l,h.repository,i]),(0,P.useEffect)(()=>{null!=f&&n&&y({userInitiated:!1})},[f,y,n]);let v=(0,P.useCallback)(()=>y({userInitiated:!0}),[y]);return(0,c.jsxs)("div",{className:aV.container,role:"button",onClick:v,onKeyDown:e=>{("Enter"===e.code||"Space"===e.code)&&v()},tabIndex:0,children:[t?(0,c.jsx)(t_.A,{size:"small",className:aN.sX}):(0,c.jsx)(j.IssueDraftIcon,{className:aV.icon}),(0,c.jsx)("span",{className:aV.previewText,children:h.title}),null!=g&&(0,c.jsx)(eb.g,{version:g})]})}try{aq.displayName||(aq.displayName="DraftIssueBlock")}catch{}let aG=(0,aw.F)(az),aK={div:(e,t)=>{let n=(0,aw.k)(e,az);return n?(0,c.jsx)(aq,{...n}):t}};var aQ=n(72534);function aZ({owner:e,repo:t,issueNumber:n,href:a,children:i}){let{updateItem:r,openItem:o,openPreviewPane:s}=(0,B.xx)(),{messageId:l}=aS(),d=Number(n),u=function(e,t,n,a,i){let r=`Issue #${i}`;if(!n||!a||!i||isNaN(i))return r;let o=e.find(e=>e.id===t),s=o?.references,l=s?.find(e=>"issue"===e.type&&e.number===i&&e.repository.name===a&&e.repository.owner===n),c=l?.title;if(c)return c;let d=s?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${a}`&&e.data.number===i),u=d?.data;return u?.title??r}((0,h.A3)("messages"),l,e,t,d),m=`issue:${e}/${t}/${d}`;return(0,P.useEffect)(()=>{e&&t&&r({messageId:l,name:u,number:d,owner:e,repo:t,id:m,href:a,type:"issue"})},[m,l,a,d,e,t,u,r]),(0,c.jsx)(ep.A,{href:a,onClick:e=>{e.metaKey||e.ctrlKey||(o(m),s(),(0,U.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},target:"_blank",rel:"noreferrer",children:i})}try{aZ.displayName||(aZ.displayName="IssueLinkBlock")}catch{}let aX="data-issuelink-props",aJ=(0,aw.F)(aX),aY=RegExp("\\/(?<owner>[^/]+)\\/(?<repo>[^/]+)\\/issues\\/(?<number>\\d+)"),a0={span:(e,t)=>{let n=(0,aw.k)(e,aX);return n?(0,c.jsx)(aZ,{...n}):t}};var a1=n(62456),a2=n(89169),a5=n(46008);let a3={list:"IssueListBlock-module__list--GM7vt",streaming:"IssueListBlock-module__streaming--HSaKx",item:"IssueListBlock-module__item--Z3Nv7",link:"IssueListBlock-module__link--xHV6N",content:"IssueListBlock-module__content--kXyl1",metadata:"IssueListBlock-module__metadata--fIv1v",header:"IssueListBlock-module__header--tb2Am",title:"IssueListBlock-module__title--KvqP1",unknownTitle:"IssueListBlock-module__unknownTitle--tj7iM",number:"IssueListBlock-module__number--FIbRR",labels:"IssueListBlock-module__labels--ergn3",labelIcon:"IssueListBlock-module__labelIcon--AdciQ",description:"IssueListBlock-module__description--FVdIE",icon:"IssueListBlock-module__icon--KVpem",open:"IssueListBlock-module__open--yTQ0j",draft:"IssueListBlock-module__draft--FrF8w",done:"IssueListBlock-module__done--SRM4P",closed:"IssueListBlock-module__closed--jfPZH",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--SawNd"},a4={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function a6({item:e,isStreaming:t}){let n,a;let i=e.author;e.merged_at?(n=e.merged_at,a="Merged"):e.closed_at?(n=e.closed_at,a="Closed"):e.created_at&&(n=e.created_at,a="Opened");let r=n?new Date(n):null;return r&&isNaN(r.getTime())&&(r=null),i&&r||!t?(0,c.jsxs)("span",{className:a3.description,children:[i," ",i?a?.toLowerCase():a," ",r&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a2.A,{date:r,format:"micro"})," ago"]})]}):null}let a7=e=>{try{let t=(0,a$.load)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(a4.fromUnknown);return null}catch{return null}};function a9({data:e,type:t,isStreaming:n}){let[a,i]=(0,P.useState)(()=>a7(e)??[]),{updateItem:r,openItem:o,openPreviewPane:s}=(0,B.xx)(),{messageId:l}=aS();return(0,P.useEffect)(()=>i(t=>a7(e)??t),[e]),(0,P.useEffect)(()=>{"issue"===t?(0,U.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,U.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},[t]),(0,c.jsx)("ul",{className:(0,ei.$)(a3.list,n&&a3.streaming),children:a.map((e,i)=>{let d={...e,type:t},u=n&&i===a.length-1,{icon:m,colorClass:p}=function(e){let t,n=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(n=(0,c.jsx)(j.IssueDraftIcon,{"aria-label":"Draft issue"}),t=a3.draft):"closed"===e.state&&e.draft&&(n=(0,c.jsx)(j.SkipIcon,{"aria-label":"Closed draft issue"}),t=a3.draft):(n=(0,c.jsx)(j.IssueClosedIcon,{"aria-label":"Closed issue"}),t=a3.done):(n=(0,c.jsx)(j.IssueOpenedIcon,{"aria-label":"Open issue"}),t=a3.open);else if("pr"===e.type){let a="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!a&&e.draft?(n=(0,c.jsx)(j.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=a3.draft):"open"!==e.state||a||e.draft?"closed"!==e.state||a?"closed"===e.state&&a&&(n=(0,c.jsx)(j.GitMergeIcon,{"aria-label":"Merged pull request"}),t=a3.done):(n=(0,c.jsx)(j.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=a3.closed):(n=(0,c.jsx)(j.GitPullRequestIcon,{"aria-label":"Pull request"}),t=a3.open)}return{icon:n,colorClass:t}}(d);return(0,c.jsx)("li",{className:a3.item,children:(0,c.jsxs)("div",{className:a3.content,children:[(0,c.jsx)("div",{className:(0,ei.$)(p,a3.icon),children:m}),(0,c.jsxs)("div",{className:a3.header,children:[u&&!d.title?null:(0,c.jsx)("a",{...(0,ej.G)("issue-list-item-link"),href:d.url??"#",className:a3.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),d.url)){if("issue"===d.type){(0,U.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:n}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(d.url);if(e&&t&&n){let a=`issue:${e}/${t}/${n}`;r({messageId:l,name:d.title??`Issue #${n}`,number:n,owner:e,repo:t,id:a,href:d.url,type:"issue"}),o(a),s()}}else(0,U.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(d.url,"_self")}},target:"_blank",rel:"noreferrer",children:d.title||void 0===d.number?(0,c.jsxs)(c.Fragment,{children:[d.title?(0,c.jsx)("span",{className:a3.title,children:d.title}):(0,c.jsx)("span",{className:(0,ei.$)(a3.title,a3.unknownTitle),children:"Unknown issue"}),void 0!==d.number&&(0,c.jsxs)("span",{className:a3.number,children:["#",d.number]})]}):(0,c.jsxs)("span",{className:a3.title,children:["#",d.number]})}),(0,c.jsxs)("div",{className:a3.labels,children:[d.labels?.length?d.labels.map(e=>(0,c.jsx)(nv.A,{size:"small",variant:"secondary",children:e},e)):null,0!==d.comments&&void 0!==d.comments&&(0,c.jsxs)(nv.A,{size:"small",variant:"secondary",children:[(0,c.jsx)(j.CommentIcon,{className:a3.labelIcon,size:12}),d.comments]})]})]}),(0,c.jsx)(a6,{item:d,isStreaming:u}),(0,c.jsx)("div",{className:a3.metadata,children:void 0===d.assignees_avatar_urls?null:0===d.assignees_avatar_urls.length?(0,c.jsx)("div",{className:a3.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,c.jsx)(j.PersonIcon,{size:12})}):(0,c.jsx)("div",{role:"img","aria-label":`${d.assignees_avatar_urls.length} ${1===d.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,c.jsx)(a5.A,{disableExpand:!0,children:d.assignees_avatar_urls.map(e=>(0,c.jsx)(a1.r,{src:e,alt:"Assignee avatar"},e))})})})]})},i)})})}try{a6.displayName||(a6.displayName="Description")}catch{}try{a9.displayName||(a9.displayName="ListBlock")}catch{}let a8="data-issues-list-block",ie=(0,aw.F)(a8),it={div:(e,t)=>{let n=(0,aw.k)(e,a8);return n?(0,c.jsx)(a9,{...n}):t}},ia=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:a,markdown:i,...r})=>{let o=(0,P.useRef)(!1),s=(0,P.useMemo)(()=>{let e=[...r.extensions??[],function(e){return{transformMarkdown:t=>(0,aE.YR)(t,"code",t=>{let n=t.lang??"",{name:a,code:i}=function(e,t){let n=e&&aO.exec(e);if(n)return{name:n.groups?.name,code:t};let a=aM.exec(t);return a?{name:a.groups?.name,code:t.replace(aM,"")}:{code:t}}(t.meta??void 0,t.value);if(!a)return;e.includes(a)||e.push(a);let r=i.split("\n",6),o=6===r.length,s=o?r.join("\n"):`${r.join("\n")}
`,l=t.position?.start.line??0;t.value=s,t.data={...t.data,hName:"code",hProperties:{[aR]:JSON.stringify({language:n,name:a,code:i,line:l,isStreaming:t.isStreaming??!1,isClipped:o,index:e.indexOf(a),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,aE.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&aR in a.properties&&n.children.splice(t,1,a)}),reactComponents:aB}}([])];return p.W.immersiveIssuePreview&&(e=[...e,{transformMarkdown:e=>(0,aE.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=aY.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:a="",number:i=""}=t.groups;e.data={hName:"span",hProperties:{[aJ]:JSON.stringify({owner:n,repo:a,issueNumber:i,href:e.url,children:(0,aQ.d)(e)})}}}),reactComponents:a0},{transformMarkdown:e=>(0,aE.YR)(e,"code",e=>{if("list"!==e.lang)return;let t=aU(aF.exec(e.meta??"")?.groups?.type??"");("issue"===t||"pr"===t)&&(e.data={hName:"div",hProperties:{[ie]:JSON.stringify({data:e.value,type:t,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,aE.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&ie in a.properties&&n.children.splice(t,1,a)}),reactComponents:it}]),p.W.draftIssueUI&&(e=[...e,{transformMarkdown:e=>(0,aE.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue"===aU(aF.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[aG]:JSON.stringify({yaml:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,aE.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&aG in a.properties&&n.children.splice(t,1,a)}),reactComponents:aK}]),e},[r.extensions]);return(0,c.jsx)(aI.Provider,{value:(0,P.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:a,markdown:i,hasAutoOpenedPreviewPaneRef:o}),[e,t,n,a,i,o]),children:(0,c.jsx)(aN.To,{...r,markdown:i,extensions:s,chatMode:"immersive"})})};try{ia.displayName||(ia.displayName="MarkdownViewer")}catch{}let ii={timelineEvent:"TimelineEvents-module__timelineEvent--Piv5d",icon:"TimelineEvents-module__icon--IYNGr",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--vlwlp TimelineEvents-module__timelineEvent--Piv5d",references:"TimelineEvents-module__references--r1iWF ChatMessage-module__references--Kunt2"};function ir(e){return e.references?.some(e=>"text"===e.type&&e.name&&e.name.startsWith("timeline-event"))??!1}function io({message:e,messageIndex:t,isViewingSharedThread:n,isSharedMessage:a,isLatestMessage:i}){return(0,c.jsxs)(c.Fragment,{children:[ir(e)&&(0,c.jsx)(is,{message:e,messageIndex:t}),(0,c.jsx)(il,{isViewingSharedThread:n,isSharedMessage:a,isLatestMessage:i})]})}function is({message:e,messageIndex:t}){let{updateItem:n}=(0,B.xx)();(0,P.useEffect)(()=>{if(e.references)for(let a of e.references){let i=(0,eN.oR)({ref:a,messageIndex:t,messageId:e.id,timestamp:e.createdAt});null!=i&&n(i)}},[e.references,e.id,t,e.createdAt,n]);let a=e.references?.filter(e=>"text"===e.type&&e.name&&e.name.startsWith("timeline-event"));if(!a)return;let i=[];for(let e of a)i.push(JSON.parse(e.name.replace("timeline-event: ","")));return(0,c.jsxs)(c.Fragment,{children:[e.references&&e.references.length>0&&(0,c.jsx)(aC,{className:ii.references,messageId:e.id,messageTimestamp:e.createdAt,messageIndex:t,references:e.references,size:"medium"}),i.map(n=>(0,c.jsxs)("div",{className:ii.timelineEvent,children:[(0,c.jsx)(j.CheckIcon,{className:ii.icon}),(0,c.jsx)(ia,{autoOpenPreviewPane:!1,markdown:n.markdownContent,messageId:e.id,messageIndex:t,messageTimestamp:e.createdAt,accessibleHeader:(0,m.hV)("Timeline",e.content??"")})]},n.type))]})}function il({isSharedMessage:e,isViewingSharedThread:t,isLatestMessage:n}){return(0,c.jsxs)(c.Fragment,{children:[e&&!t&&(0,c.jsxs)("div",{className:ii.situationalTimelineEvent,children:[(0,c.jsx)(j.LinkIcon,{className:ii.icon})," Messages up to this point are included in shared link"]}),n&&p.W.copilotDuplicateThread&&t&&(0,c.jsxs)("div",{className:ii.situationalTimelineEvent,children:[(0,c.jsx)(j.RepoForkedIcon,{className:ii.icon})," Messages beyond this point will start a new private conversation"]})]})}try{io.displayName||(io.displayName="TimelineEvents")}catch{}try{is.displayName||(is.displayName="UserMessageTimelineEvent")}catch{}try{il.displayName||(il.displayName="SituationalTimelineEvents")}catch{}let ic={container:"UserMessageEdit-module__container--rqkMG",input:"UserMessageEdit-module__input--LbiZ1",inputContainer:"UserMessageEdit-module__inputContainer--tewB2",actions:"UserMessageEdit-module__actions--_YMp2"},id=({messageContent:e,onSubmit:t,onCancel:n,disableSubmit:a=!1})=>{let[i,r]=(0,P.useState)(e),o=(0,P.useRef)(null);return(0,P.useEffect)(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${o.current.scrollHeight}px`)},[i]),(0,c.jsxs)(af.tL,{commands:{"copilot-chat:send-message":a?void 0:()=>{(0,U.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),t(i)},"github:cancel":()=>{n(),r(e),(0,U.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})}},className:ic.container,...(0,ej.G)("user-message-edit-box"),children:[(0,c.jsx)("div",{className:ic.inputContainer,children:(0,c.jsx)("textarea",{ref:o,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:i,onChange:e=>r(e.target.value),className:ic.input,autoFocus:!0,onInput:()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${o.current.scrollHeight}px`)},onFocus:e=>e.target.setSelectionRange(0,e.target.value.length)})}),(0,c.jsxs)("div",{className:ic.actions,children:[(0,c.jsx)(af.cQ,{commandId:"github:cancel",children:"Cancel"}),(0,c.jsx)(af.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...(0,ej.G)("user-message-edit-submit"),disabled:a,children:"Send"})]})]})};try{id.displayName||(id.displayName="UserMessageEdit")}catch{}let iu=({excludeFeedback:e,inputRef:t,isLatestMessage:n,isFirstReply:a,isLoading:i,isStreaming:r,panelWidth:o,messageIndex:s,autoOpenPreviewPane:l})=>{let{message:d}=(0,n8.V)(),u=(0,et.b)(),f=(0,h.Pk)(),{items:g,versionedItems:y,openItem:v,removeItems:x,updateItem:_,openItems:C,openItemsBeforeSubthreadChange:b,setOpenItemsBeforeSubthreadChange:N,enableLoadingState:I,disableLoadingState:S,previewPaneOpen:w}=(0,B.xx)();(0,P.useEffect)(()=>{let e=f.currentReferences.find(e=>"figma"===e.type);if(p.W.immersiveFigmaIntegration&&e){let t={altText:e.title,type:"image",url:e.fullImageUrl,id:`image:${e.fullImageUrl}`,messageId:d.id,name:e.title};g.has(`image:${e.fullImageUrl}`)||_(t)}},[g,d.id,d.references,w,f.currentReferences,_]);let E=(0,P.useCallback)(()=>{let e=[],t=d;for(;null!=t;)e.push(t.id),t=void 0!==t.selectedChildIndex?f.messages[t.selectedChildIndex]:void 0;let n=new Map;for(let[e,t]of g){let a=n.get(t.messageId)||[];a.push(e),n.set(t.messageId,a)}let a=[];for(let t of e){let e=n.get(t);if(e)for(let t of e)a.push(t)}for(let[e,t]of g)t.messageId===e3.Wp&&a.push(e);N([...C]),a.some(e=>C.includes(e))&&I(),x(a)},[g,I,d,C,x,N,f.messages]),{handleConfirmationAction:T,handleRetryErrorMessage:A,handleRetryCopilotResponse:L,handleEditUserMessage:D,hasClientConfirmations:R,isAgentError:O,isAI:M,isCopilot:F,isError:$,isInterrupted:V,isLoading:z,isUser:W,myRef:H,onFeedbackSubmitted:q,rendererConfig:K,renderFeedback:Q,shouldShowMessageActions:Z,skillExecutionToUseForRespondingText:X,showRetryButton:J}=(0,am.p)({excludeFeedback:e,inputRef:t,isLatestMessage:n,isLoading:i,isStreaming:r,removeOutdatedContentPreviewItems:E}),Y=tY(),ee=f.editingMessage===d.id,en=r&&!$&&!d.confirmations&&!Z&&n&&(!e||M),ea=(0,e4.CX)(f.messages,d),er=(ea?.childMessageIndexes?.findIndex(e=>e===s)||0)+1||1,eo=ea?.childMessageIndexes?.length||1,es=eo>=ap.L9,el=u.maxMessagesReached(),ec=eo>1,ed=(0,P.useMemo)(()=>d.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[d.mediaContent]),eu=(0,P.useMemo)(()=>p.W.attachImagesImmersive&&void 0!==ed&&ed.length>0||!1,[ed]),em=Z&&Y&&(F||ec),ep=(0,P.useRef)(null),eh=(0,tt.M)(e=>{let t=y.get(eN.oy(e))?.at(-1);t&&v(t,!1)});(0,P.useEffect)(()=>{if(ep.current!==d.id&&n&&b.length>0){let e=setTimeout(()=>{for(let e of b)eh.current(e);S(),N([])});return()=>clearTimeout(e)}ep.current=d.id},[S,d.id,b,n,N,eh]);let ef=(0,P.useCallback)(()=>{let e=er-1;u.setSelectedMessage(f.messages[ea.childMessageIndexes[e-1]]),E()},[er,u,ea,E,f.messages]),eg=(0,P.useCallback)(()=>{let e=er-1;u.setSelectedMessage(f.messages[ea.childMessageIndexes[e+1]]),E()},[er,u,ea,E,f.messages]),ey=nj(),{model:ev,availableModels:ex}=(0,h.bP)("model","availableModels"),e_=ev;d.model&&(e_=(ex??[e_]).find(e=>e.id===d.model)||e_);let eC=W&&f.messages.findLast(e=>"user"===e.role)?.id===d.id,eb=()=>u.startEditingMessage(d.id),eI=(0,tJ.d)(),eS=!!(0,G.JB)(f.customCopilots,eI),ew=es||el||!!eI&&!eS,eE=F&&z&&n&&!d.content,eT=(0,P.useCallback)(e=>{u.setWrapCodeLines(e)},[u]);return(0,c.jsxs)("div",{className:(0,ei.$)("message-container",a_.chatMessage,W&&a_.user,M&&a_.ai,ee?a_.editing:"",n&&a_.latest),ref:H,...(0,ej.G)(`message-${$?"error":r?"streaming":d.id}`),children:[M?(0,c.jsx)(an.W,{isLoading:z&&n,isLoadingSkills:(d.skillExecutions??[]).length>0&&z&&""===d.content&&n,isError:$&&d.error?.type!=="agentUnauthorized",className:a_.avatar,mode:f.mode,isFirstMessage:a,message:d.content||"",createdAt:d.createdAt}):null,W&&eu&&(0,c.jsx)("div",{children:ed?.map(e=>c.jsx(ax,{name:e?.name||"Uploaded image",messageId:d.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:f.mode},e?.url||""))}),W&&d.references&&d.references.length>0&&(0,c.jsx)(aC,{className:a_.references,messageId:d.id,messageTimestamp:d.createdAt,messageIndex:s,references:d.references,size:"medium"}),!ee&&(0,c.jsx)("div",{className:a_.content,children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:(0,ei.$)("js-snippet-clipboard-copy-unpositioned",a_.messageArea),children:[W?(0,c.jsx)(ad.R,{accessibleHeader:(0,m.hV)("You",d.content??""),className:a_.userMessage,children:d.content??""}):(0,c.jsxs)(c.Fragment,{children:[!p.W.newImmersiveReferencesUI&&F&&d.skillExecutions?.map((e,t)=>c.jsx(ao,{functionCall:e,manager:u,panelWidth:o,messageInterrupted:d.interrupted},t)),eE&&(p.W.newImmersiveReferencesUI?(0,c.jsx)(au.b,{className:(0,ei.$)(a_.skillExecutionText,"mb-2"),children:`${(0,ar.WA)(X)}...`}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:a_.blinkingCursor,children:"\u258B"}),(0,c.jsx)("span",{className:"sr-only",children:"Waiting for reply\u2026"})]})),p.W.newImmersiveReferencesUI&&d.references&&d.references.length>0&&d.content&&(0,c.jsx)(ae.s,{className:"mb-2",references:d.references,isImmersive:!0}),F&&i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ah.O,{variant:"rounded",height:"12px",width:"random"}),(0,c.jsx)(ah.O,{variant:"rounded",height:"12px",width:"random"}),(0,c.jsx)(ah.O,{variant:"rounded",height:"12px",width:"random"})]}):!R&&d.content&&(0,c.jsx)(im,{children:(0,c.jsx)(ia,{autoOpenPreviewPane:l,markdown:d.content,messageId:d.id,messageIndex:s,messageTimestamp:d.createdAt,accessibleHeader:(0,m.hV)("Copilot",d.content??""),copilotAnnotations:d.copilotAnnotations,wrapCodeLines:f.wrapCodeLines,onWrapCodeLinesChange:eT,...K})}),$?(0,c.jsx)(aa.K,{manager:u}):null,O&&d.agentErrors&&(0,c.jsx)(aa.h,{errors:d.agentErrors}),V?(0,c.jsx)(as.h,{messageHasContent:!!d.content||!!d.skillExecutions?.length}):null,M&&!eE&&(0,m.Ye)(d.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,c.jsx)(at.m,{confirmation:e,handleConfirmation:T,isLatestMessage:n},t))]}),ec&&!n&&(0,c.jsxs)("div",{className:a_.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[er,"/",eo]})]}),en&&(0,c.jsx)("div",{className:a_.actionsPlaceholder}),!Z&&J&&(0,c.jsx)(al.$,{handleRetryMessage:A,disabled:ew}),Z&&!Y&&(0,c.jsxs)(ac.M,{"aria-label":"Message tools",className:a_.actions,"data-testid":"nonshared-toolbar",children:[W&&(eC?(0,c.jsx)(af.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:eb,icon:j.PencilIcon,disabled:ew,...(0,ej.G)("edit-message-button")}):(0,c.jsx)(k.K,{variant:"invisible","aria-label":"Edit message",onClick:eb,icon:j.PencilIcon,disabled:ew,...(0,ej.G)("edit-message-button")})),F&&(0,c.jsxs)(c.Fragment,{children:[Q&&(0,c.jsx)(ai.G,{iconSize:"medium",onFeedbackSubmitted:q}),!!d.content&&!r&&(0,c.jsx)(te.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,U.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),J&&$?(0,c.jsx)(al.$,{handleRetryMessage:A,disabled:ew}):M&&!$&&!d.clientSide&&(0,c.jsx)(al.$,{handleRetryMessage:L,disabled:ew,showModelPicker:!!ex&&ex.length>1,model:e_,navigateToNewThread:ey}),ec&&(0,c.jsx)(ab,{currentPage:er,totalPages:eo,onPrev:ef,onNext:eg,isUserMessage:W,disabled:f.isWaitingOnCopilot})]}),em&&(0,c.jsxs)(ac.M,{"aria-label":"Message tools",className:a_.sharedThreadActions,"data-testid":"shared-toolbar",children:[F&&(0,c.jsx)(c.Fragment,{children:!!d.content&&!r&&(0,c.jsx)(te.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,U.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),ec&&(0,c.jsx)(ab,{currentPage:er,totalPages:eo,onPrev:ef,onNext:eg,isUserMessage:W,disabled:f.isWaitingOnCopilot})]})]})}),ee&&(0,c.jsx)(id,{messageContent:d.content||"",onSubmit:D,onCancel:()=>u.cancelEditingMessage(),disableSubmit:f.isWaitingOnCopilot})]})},im=({children:e})=>(0,c.jsx)(eo.t,{fallback:(0,c.jsx)(V.l,{className:a_.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),children:e}),ip=({message:e,messageIndex:t,isSharedMessage:n,isLatestMessage:a,...i})=>{let r=tY();return(0,c.jsxs)(n8.$,{message:e,children:[!ir(e)&&(0,c.jsx)(iu,{...i,messageIndex:t,isSharedMessage:n,isLatestMessage:a,isViewingSharedThread:r}),(0,c.jsx)(io,{message:e,messageIndex:t,isViewingSharedThread:r,isSharedMessage:n,isLatestMessage:a})]})},ih=(0,P.memo)(function(e){return(0,c.jsx)(im,{children:(0,c.jsx)(ip,{...e})})});try{iu.displayName||(iu.displayName="InnerChatMessage")}catch{}try{im.displayName||(im.displayName="MessageErrorBoundary")}catch{}try{ip.displayName||(ip.displayName="ChatMessageUnmemoized")}catch{}try{ih.displayName||(ih.displayName="ChatMessage")}catch{}let ig={ConversationLoader:"ConversationLoader-module__ConversationLoader--iaHbr",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--PYCmE",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--rnmbz",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--jPmNg"};function iy(){return(0,c.jsxs)("div",{className:ig.ConversationLoader,"data-testid":"conversation-loader",children:[(0,c.jsx)("div",{className:ig.ConversationLoader__userGroup,children:(0,c.jsx)(ah.O,{variant:"rounded",height:"20px",width:"random"})}),(0,c.jsxs)("div",{className:ig.ConversationLoader__assistantGroup,children:[(0,c.jsx)(ah.O,{className:ig.ConversationLoader__assistantAvatar,variant:"elliptical",sx:{position:"absolute",height:24}}),Array.from({length:Math.floor(4*Math.random())+2}).map((e,t)=>(0,c.jsx)(ah.O,{variant:"rounded",height:"20px",width:"random"},t))]})]})}try{iy.displayName||(iy.displayName="ConversationLoader")}catch{}var iv=n(39046);let ix=(0,P.createContext)(void 0);function i_({children:e,model:t,state:n,manager:a}){let[i,r]=(0,P.useState)(!1),o=(0,P.useCallback)((e,i)=>{if(!e)return;let r=Array.from(e).filter(e=>iv.s.isTypeAllowed(e.type,t));r.length>0&&new iv.s(n,a).addImageAttachments(r,i)},[t,n,a]);(0,P.useEffect)(()=>{if(t.capabilities.supports.vision){let e=e=>{e.preventDefault(),r(!1),o(e.dataTransfer?.files||null,"drag")},t=e=>{e.preventDefault()},n=()=>r(!0),a=()=>r(!1);return window.addEventListener("dragover",t),window.addEventListener("drop",e),window.addEventListener("dragenter",n),window.addEventListener("dragleave",a),()=>{window.removeEventListener("dragover",t),window.removeEventListener("drop",e),window.removeEventListener("dragenter",n),window.removeEventListener("dragleave",a)}}},[o,t.capabilities.supports.vision]);let s=(0,P.useMemo)(()=>({isDragging:i}),[i]);return(0,c.jsx)(ix.Provider,{value:s,children:e})}try{ix.displayName||(ix.displayName="DragDropContext")}catch{}try{i_.displayName||(i_.displayName="DragDropProvider")}catch{}var iC=n(97891),ij=n(46584),ib=n(65556);function iN({className:e}){let[t,n]=(0,P.useState)(ts.L.Static),[a,i]=(0,P.useState)(!0),{safeSetTimeout:r}=(0,ib.A)();return(0,P.useEffect)(()=>{let e=r(()=>{q.J.getProPlusAnimationFlag()?(n(ts.L.Activate),i(!1)):(n(ts.L.Idle),i(!0))},1e3);return()=>clearTimeout(e)},[r]),(0,c.jsx)("div",{className:e,children:(0,c.jsx)(ts.N,{animationType:t,onAnimationEnd:()=>{t===ts.L.Activate&&(n(ts.L.Idle),i(!0),q.J.removeProPlusAnimationFlag())},loopAnimation:a,size:48})})}try{iN.displayName||(iN.displayName="CopilotEmptyStateAnimation")}catch{}let iI={container:"EmptyState-module__container--sRHBh",suggestions:"EmptyState-module__suggestions--fdxbq",suggestionButton:"EmptyState-module__suggestionButton--q8BQV",legalText:"EmptyState-module__legalText--cyh3t"},iS={suggestionButton:"SuggestionCard-module__suggestionButton--WLQeS",icon:"SuggestionCard-module__icon--NSxpP"},iw=e=>e in j;function iE({titleHtml:e,icon:t,color:n,onClick:a}){let i=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return iw(t)?j[t]:void 0}(t);return(0,c.jsxs)("button",{className:iS.suggestionButton,onClick:a,children:[i&&(0,c.jsx)("div",{className:iS.icon,style:{color:n},children:(0,c.jsx)(i,{})}),(0,c.jsx)(tx.mo,{html:e})]})}try{iE.displayName||(iE.displayName="SuggestionCard")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}function iT({showSuggestions:e}){let t=(0,et.b)(),n=(0,h.Pk)(),a=t.getSelectedThread(n),i=(0,g.X)(),r=(0,P.useMemo)(()=>{var e;if(Array.isArray(e=i.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=i.icebreakers.find(e=>"functional"===e.type);if(e&&e.data.length>0)return e.data.sort(()=>.5-Math.random()).slice(0,6)}return[]},[i.icebreakers]);return(0,c.jsxs)("div",{className:iI.container,children:[(0,ij.u)("copilot_pro_plus_animation")?(0,c.jsx)(iN,{}):(0,c.jsx)(F.A,{hidden:!0}),e&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,c.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),(0,c.jsx)("ul",{className:`${iI.suggestions} list-style-none`,children:r.map(e=>(0,c.jsx)("li",{className:iI.suggestionButton,children:(0,c.jsx)(iE,{titleHtml:e.titleHtml,icon:e.icon,color:e.color,onClick:()=>{let i=0===n.messages.length?a:t.getSelectedThread(n),r=n.currentUserLogin,o=e.message;t.sendChatMessage({thread:i,content:o.replaceAll("$$USERNAME$$",r),references:n.currentReferences,topic:n.currentTopic,context:n.context,customInstructions:n.customInstructions,model:n.model}),(0,U.BI)("dotcom_chat.activate",{target:"EMPTY_STATE_SUGGESTION_CARD",topic:n.currentTopic?.name,mode:"immersive",suggestionId:e.id})}},e.id)},e.id))})]}),(0,c.jsx)("div",{className:iI.legalText,children:(0,c.jsx)(iC.h,{})})]})}try{iT.displayName||(iT.displayName="EmptyState")}catch{}let ik={container:"ErrorState-module__container--DKNLc",icon:"ErrorState-module__icon--Grz_W",description:"ErrorState-module__description--uIC8b",sso:"ErrorState-module__sso--b2klG"};function iA({title:e,description:t,ssoOrgs:n}){let a=n&&n.length>0;return(0,c.jsxs)("div",{className:ik.container,children:[(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,c.jsxs)(eh.A,{border:!1,children:[(0,c.jsx)(eh.A.Visual,{children:(0,c.jsx)(j.AlertIcon,{size:"medium",className:ik.icon})}),(0,c.jsx)(eh.A.Heading,{as:"h2",children:e}),(void 0!==t||a)&&(0,c.jsxs)("div",{className:ik.description,children:[(0,c.jsx)(eh.A.Description,{children:(0,c.jsx)("span",{children:t})}),(0,c.jsx)("div",{className:ik.sso,children:a&&(0,c.jsx)(eq.x,{protectedOrgs:n})})]})]})]})}function iP(){let{helpUrl:e}=(0,g.X)();return(0,c.jsxs)("div",{className:ik.container,children:[(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,c.jsxs)(eh.A,{border:!1,children:[(0,c.jsx)(eh.A.Visual,{children:(0,c.jsx)(j.LockIcon,{size:"medium",className:ik.icon})}),(0,c.jsx)(eh.A.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),(0,c.jsxs)("div",{className:ik.description,children:[(0,c.jsx)(eh.A.Description,{children:(0,c.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),(0,c.jsx)(ep.A,{inline:!0,href:`${e}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`,children:"Learn more"})]})]})]})}try{iA.displayName||(iA.displayName="ErrorState")}catch{}try{iP.displayName||(iP.displayName="SharedThreadForbidden")}catch{}let iL={container:"ImmersiveChat-module__container--Q4j2R",emptyContent:"ImmersiveChat-module__emptyContent--IQfnX",messageContent:"ImmersiveChat-module__messageContent--fpzTL",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--MQEF2",hidden:"ImmersiveChat-module__hidden--K3ci9"};var iD=n(30631);let iR={container:"SpaceNotFoundComponent-module__container--hltG9",description:"SpaceNotFoundComponent-module__description--b8Rdv",banner:"SpaceNotFoundComponent-module__banner--ntKjI",icon:"SpaceNotFoundComponent-module__icon--hM9CP"},iO=({protectedOrganizations:e})=>(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:iR.container,children:[(0,c.jsx)(j.AlertIcon,{className:iR.icon}),(0,c.jsx)("h3",{children:"Space not found"}),(0,c.jsx)("p",{className:iR.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),(0,c.jsx)("div",{className:iR.banner,children:e&&(0,c.jsx)(eq.x,{protectedOrgs:e,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`})})]})});try{iO.displayName||(iO.displayName="SpaceNotFoundComponent")}catch{}var iM=n(97665),iB=n(94747);let iF=e=>{let t=(0,et.b)(),n=(0,iM.jE)(),{mutateAsync:a,...i}=(0,iB.n)({onSuccess:async()=>(e&&await n.invalidateQueries({queryKey:J(e)}),n.invalidateQueries({queryKey:X})),mutationFn:async n=>{let a=e?(0,G.fn)(e):"/custom_copilots",i={custom_copilot:{owner_id:n.ownerId,owner_type:n.ownerType,name:n.name,icon_type:n.iconType,icon_color:n.iconColor,description:n.description,general_instructions:n.generalInstructions,resources_attributes:n.resources?.map(e=>({id:e.databaseId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:function(e){switch(e.type){case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath};case"free_text":return{text:e.text,name:e.name};default:throw Error("Unsupported resource")}}(e)}))}},r=await (0,Q.lS)(a,{method:e?"PUT":"POST",body:i}),o=await r.json();if(!r.ok)throw o.errorMessages;return t.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:o}),o}});return{upsertCopilotSpace:a,...i}};function iU({onClose:e,copilotSpace:t}){let[n,a]=(0,P.useState)(t.generalInstructions??""),[i,r]=(0,P.useState)(void 0),{upsertCopilotSpace:o,isPending:s}=iF(t),l=async t=>{if(t?.preventDefault(),!(n.length>2e3)&&!s)try{await o({generalInstructions:n}),e()}catch(t){let e="An error occurred while saving the instructions.";t&&"object"==typeof t&&"general_instructions"in t&&(e=t.general_instructions),r(e)}};return(0,c.jsx)(nS.l,{width:"large",title:"Edit instructions",subtitle:"Describe the main responsibilities, limitations, and expertise areas of the Copilot. Include what tasks it should handle and which ones to avoid.",onClose:e,footerButtons:[{buttonType:"default",content:"Cancel",onClick:e},{buttonType:"primary",content:"Save",onClick:()=>void l(),loading:s,loadingAnnouncement:"Saving instructions"}],children:(0,c.jsx)(af.tL,{commands:{"github:submit-form":void 0},children:(0,c.jsx)("form",{onSubmit:l,children:(0,c.jsxs)(nN.A,{children:[(0,c.jsx)(nN.A.Label,{visuallyHidden:!0,children:"General Instructions"}),(0,c.jsx)(T.Ay,{block:!0,resize:"vertical",rows:7,name:"generalInstructions",value:n,placeholder:"General instructions",validationStatus:i||n.length>2e3?"error":void 0,...(0,ej.G)("instructions-input"),onChange:e=>{a(e.target.value),r(void 0)}}),i?(0,c.jsx)(nN.A.Validation,{variant:"error",children:(0,c.jsx)("span",{...(0,ej.G)("error-message"),children:i})}):(0,c.jsx)(i$,{text:n,promptCharLimit:2e3})]})})})})}function i$({text:e,promptCharLimit:t}){let n=e.length>t,a=(0,c.jsxs)(c.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return n?(0,c.jsx)(nN.A.Validation,{variant:"error",children:a}):(0,c.jsx)(nN.A.Caption,{children:a})}try{iU.displayName||(iU.displayName="EditInstructionsDialog")}catch{}try{i$.displayName||(i$.displayName="CharacterCount")}catch{}var iV=n(46928),iz=n(8601);let iW=(0,n(80688).A)("sessionStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),iH="THREAD_TIME_PATCH";function iq(){let e=iW.getItem(iH);return e?JSON.parse(e):null}function iG(){iW.removeItem(iH)}var iK=n(89621);function iQ({onClose:e,copilotSpace:t,resource:n}){let[a,i]=(0,P.useState)(n?.name??""),[r,o]=(0,P.useState)(n?.text??""),[s,l]=(0,P.useState)(!1),d=n?.text??"",u=(0,P.useRef)(t.sizePercentage).current,[m,p]=(0,P.useState)({}),h=m.base&&m.base.startsWith("The size of the space exceeds the current limit"),{upsertCopilotSpace:f,isPending:g}=iF(t),y=async t=>{if(t?.preventDefault(),!g)try{await f({resources:[{id:Date.now().toString(),type:"free_text",name:a,text:r,markedForDestroy:!1,...n&&{id:n.id,databaseId:n.databaseId}}]}),e()}catch(e){p(e)}},v=!!n;return(0,c.jsx)(nS.l,{width:"large",title:v?"Edit a text file":"Add a text file",onClose:e,renderFooter:()=>(0,c.jsxs)(nS.l.Footer,{children:[(0,c.jsx)("div",{className:"d-flex flex-items-center",children:h?(0,c.jsx)(nN.A.Validation,{variant:"error",children:"The size of the space exceeds the current limit"}):null}),(0,c.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,c.jsx)(e0.Q,{onClick:e,children:"Cancel"}),(0,c.jsx)(e0.Q,{variant:"primary",inactive:s,onClick:s?void 0:()=>void y(),loading:g,loadingAnnouncement:"Saving resource",children:v?"Save":"Add"})]})]}),children:(0,c.jsx)(af.tL,{commands:{"github:submit-form":void 0},children:(0,c.jsx)("form",{onSubmit:y,children:(0,c.jsxs)(A.B,{children:[(0,c.jsxs)(nN.A,{required:!0,children:[(0,c.jsx)(nN.A.Label,{children:"Name"}),(0,c.jsx)(nI.A,{block:!0,placeholder:"Give the file a title",value:a,onChange:e=>{i(e.target.value),p(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:m["resources.name"]?"error":void 0}),m["resources.name"]&&(0,c.jsx)(nN.A.Validation,{variant:"error",children:m["resources.name"]})]}),(0,c.jsxs)(nN.A,{required:!0,children:[(0,c.jsx)(nN.A.Label,{children:"Content"}),(0,c.jsx)(T.Ay,{block:!0,rows:7,name:"content",value:r,placeholder:"Enter content here",onChange:e=>{o(e.target.value),p(e=>({...e,"resources.text":""}))}}),m["resources.text"]?(0,c.jsx)(nN.A.Validation,{variant:"error",children:m["resources.text"]}):(0,c.jsx)(iZ,{text:r,percentage:u,resourceContent:d,setOverSpaceLimit:l})]})]})})})})}function iZ({text:e,percentage:t,resourceContent:n,setOverSpaceLimit:a}){let i=t/100*144e3+(e.length>n.length?Math.abs(e.length-n.length):-Math.abs(e.length-n.length)),r=Math.round(i/144e3*100);return i>144e3?(a(!0),(0,c.jsx)(nN.A.Validation,{variant:"error",children:`Total percent used: ${r}%`})):(a(!1),(0,c.jsx)(nN.A.Caption,{children:`Total percent used: ${r}%`}))}try{iQ.displayName||(iQ.displayName="TextFileDialog")}catch{}try{iZ.displayName||(iZ.displayName="CharacterCount")}catch{}let iX=({children:e,copilotSpace:t,findFileWorkerPath:n})=>{let[a,i]=(0,P.useState)(!1),[r,o]=(0,P.useState)(!1),{upsertCopilotSpace:s}=iF(t),l=async e=>{await s({resources:e.map(e=>({...e,fileExists:!0,markedForDestroy:!1}))}),o(!1)},d=(0,P.useRef)(null);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ed.W,{anchorRef:d,children:[(0,c.jsx)(ed.W.Anchor,{children:e}),(0,c.jsx)(ed.W.Overlay,{width:"small",children:(0,c.jsxs)(eu.l,{children:[(0,c.jsxs)(eu.l.Item,{onSelect:()=>{o(!0)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.FileCodeIcon,{})}),"Add files, folders..."]}),(0,c.jsx)(eu.l.Divider,{}),(0,c.jsxs)(eu.l.Item,{onSelect:()=>{i(!0)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.PlusIcon,{})}),"Add a text file"]})]})})]}),a&&(0,c.jsx)(iQ,{copilotSpace:t,onClose:()=>i(!1)}),r&&(0,c.jsx)(iK.Q,{formData:[],onCancel:()=>{o(!1)},onSave:l,findFileWorkerPath:n,attachmentButtonRef:d,openRepoPanel:!0,customCopilot:t})]})};try{iX.displayName||(iX.displayName="AddReferenceMenu")}catch{}var iJ=n(5796),iY=n(6020);let i0={warningIcon:"ReferencesTable-module__warningIcon--aAwMb",referenceTitle:"ReferencesTable-module__referenceTitle--RAQOR"};function i1({copilotSpace:e}){let{upsertCopilotSpace:t}=iF(e),n=!p.W.customCopilotOrgOwned||e.editable;async function a(e){await t({resources:[{...e,markedForDestroy:!0}]})}let i=(0,P.useMemo)(()=>Object.values(e.resources.reduce((e,t)=>{let n=i5(t);return{...e,[n]:t}},{})),[e.resources]);return(0,c.jsx)(nq.X.Container,{children:(0,c.jsx)(nG.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:i,columns:[{id:"id",header:"Name",rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let t=e.filePath.split("/"),n=t.pop(),a=[e.nwo,...t].join("/"),i=e.nwo.split("/"),r=e.fileExists&&e.commitish?(0,iJ.IO9)({repo:{ownerLogin:i[0],name:i[1]},commitish:e.commitish,action:"blob",path:e.filePath}):void 0;return(0,c.jsxs)(A.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)("span",{className:"fgColor-muted",children:(0,c.jsx)(j.FileIcon,{size:16})}),(0,c.jsxs)(A.B,{gap:"none",children:[(0,c.jsx)("div",{children:e.fileExists?(0,c.jsx)(iD.A,{title:n,className:(0,ei.$)(i0.referenceTitle,"f5 text-normal"),children:(0,c.jsx)(ep.A,{rel:"noopener",target:"_blank",href:r,children:n})}):(0,c.jsx)(iD.A,{title:n,className:(0,ei.$)(i0.referenceTitle,"f5 text-normal"),children:n})}),(0,c.jsx)("div",{children:(0,c.jsx)(iD.A,{title:a,className:(0,ei.$)(i0.referenceTitle,"fgColor-muted"),children:a})})]})]})}case"free_text":return(0,c.jsxs)(A.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)("span",{className:"fgColor-muted",children:(0,c.jsx)(j.FileIcon,{size:16})}),(0,c.jsx)("div",{children:(0,c.jsx)(iD.A,{title:e.name,maxWidth:300,className:(0,ei.$)(i0.referenceTitle,"f5 text-normal"),children:e.name})})]});default:return null}}},{id:"size",header:"Size",align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,c.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`})},{id:"actions",header:()=>(0,c.jsx)(iY.s,{children:"Actions"}),maxWidth:"auto",align:"end",renderCell:t=>{let i="github_file"===t.type&&!t.fileExists;return(0,c.jsxs)(c.Fragment,{children:[i&&(0,c.jsx)(k.K,{className:i0.warningIcon,icon:j.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),n&&(0,c.jsx)(i2,{copilotSpace:e,row:t,onEdit:()=>{},onDelete:a})]})}}]})})}let i2=({copilotSpace:e,row:t,onDelete:n})=>{let[a,i]=(0,P.useState)(null);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ed.W,{children:[(0,c.jsx)(ed.W.Anchor,{children:(0,c.jsx)(k.K,{"aria-label":"Resource actions",title:"Resource actions",icon:j.KebabHorizontalIcon,variant:"invisible"})}),(0,c.jsx)(ed.W.Overlay,{children:(0,c.jsxs)(eu.l,{children:["free_text"===t.type&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(eu.l.Item,{onSelect:()=>i(t),children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.PencilIcon,{})}),"Edit"]})}),(0,c.jsxs)(eu.l.Item,{variant:"danger",onSelect:()=>{n(t)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.TrashIcon,{})}),"Delete"]})]})})]}),a&&(0,c.jsx)(iQ,{copilotSpace:e,resource:a,onClose:()=>{i(null)}})]})},i5=e=>"github_file"===e.type?`${e.repositoryId}@${e.filePath}`:e.id;try{i1.displayName||(i1.displayName="ReferencesTable")}catch{}try{i2.displayName||(i2.displayName="RowActions")}catch{}function i3(){return(0,c.jsx)(V.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0})}function i4({customCopilot:e}){let t=(0,tU.Zp)();return e&&(0,c.jsx)(V.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,c.jsx)($.z,{as:"a",href:(0,G.Cb)(e),onClick:n=>{n.preventDefault(),t((0,G.Cb)(e))},children:"Edit"})})}function i6(){return(0,c.jsx)(V.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"})}try{i3.displayName||(i3.displayName="SpaceDeletedBanner")}catch{}try{i4.displayName||(i4.displayName="SpaceSizeExceededBanner")}catch{}try{i6.displayName||(i6.displayName="ReferenceSizeExceededBanner")}catch{}let i7={details:"SpaceHomePageDetails-module__details--HzLa5",left:"SpaceHomePageDetails-module__left--rKaKZ",right:"SpaceHomePageDetails-module__right--JjPv5",emptyText:"SpaceHomePageDetails-module__emptyText--M2tmQ",instructions:"SpaceHomePageDetails-module__instructions--hChUu",references:"SpaceHomePageDetails-module__references--YHEv1",instructionsLockup:"SpaceHomePageDetails-module__instructionsLockup--wnzoa",referencesLockup:"SpaceHomePageDetails-module__referencesLockup--cXs2l",conversationsLockup:"SpaceHomePageDetails-module__conversationsLockup--_Kl0j",instructionsTitle:"SpaceHomePageDetails-module__instructionsTitle--cK6Qu",referencesTitle:"SpaceHomePageDetails-module__referencesTitle--d2cWi",conversationsTitle:"SpaceHomePageDetails-module__conversationsTitle--vbBGh",instructionsText:"SpaceHomePageDetails-module__instructionsText--Q2xUD",conversationsText:"SpaceHomePageDetails-module__conversationsText--bSR7l",referencesText:"SpaceHomePageDetails-module__referencesText--LDg6x",referencesSizeProgressBar:"SpaceHomePageDetails-module__referencesSizeProgressBar--LN0LZ",referencesSizeText:"SpaceHomePageDetails-module__referencesSizeText--jYyml",conversations:"SpaceHomePageDetails-module__conversations--xVIB6"},i9=({currentSpace:e,state:t,manager:n,customCopilotId:a,setShowEditInstructionsDialog:i,referenceSizeExceeded:r})=>{let{threads:o,findFileWorkerPath:s}=t,l=(0,iV.Z)(),d=!p.W.customCopilotOrgOwned||e.editable,u=(0,P.useMemo)(()=>{!function(e){let t=iq();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():iG())}}(o);let t=new Map(Array.from(o.entries()).filter(([,t])=>t.customCopilotOwner?t.customCopilotOwner===a.owner&&t.customCopilotID===a.id:t.customCopilotID===e.oldId));return n.sortThreads(t).map(e=>({id:e.id,text:(0,m.CB)(e),href:`${m.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))},[o,a,n,e.oldId]);return(0,c.jsxs)("div",{className:i7.details,children:[(0,c.jsxs)("div",{className:i7.left,children:[(0,c.jsxs)("div",{className:i7.instructions,children:[(0,c.jsxs)("div",{className:i7.instructionsLockup,children:[(0,c.jsx)("h2",{className:i7.instructionsTitle,children:"Instructions"}),d&&(0,c.jsx)(e0.Q,{size:"medium",onClick:()=>i(!0),children:"Edit"})]}),e.generalInstructions?(0,c.jsx)("p",{className:i7.instructionsText,children:e.generalInstructions}):(0,c.jsx)("p",{className:i7.emptyText,children:"No instructions added"})]}),(0,c.jsxs)("div",{className:i7.references,children:[(0,c.jsx)("div",{id:"references-title",children:(0,c.jsxs)("div",{className:i7.referencesLockup,children:[(0,c.jsx)("h2",{className:i7.referencesTitle,children:"References"}),e.sizePercentage>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(iz.z,{inline:!0,barSize:"small",progress:e.sizePercentage,className:i7.referencesSizeProgressBar}),(0,c.jsxs)("span",{className:i7.referencesSizeText,children:[e.sizePercentage<1?"<1":Math.round(e.sizePercentage),"%"]})]}),d&&(0,c.jsx)(iX,{copilotSpace:e,findFileWorkerPath:s,children:(0,c.jsx)(e0.Q,{size:"medium",children:"Add"})})]})}),e.resources?.length>0?(0,c.jsxs)(c.Fragment,{children:[r&&(0,c.jsx)(i6,{}),(0,c.jsx)(i1,{copilotSpace:e})]}):(0,c.jsx)("p",{className:i7.referencesText,children:"No references added"})]})]}),(0,c.jsx)("div",{className:i7.right,children:(0,c.jsx)("div",{className:i7.conversations,children:(0,c.jsxs)("div",{className:i7.conversationsLockup,children:[(0,c.jsx)("h2",{className:i7.conversationsTitle,children:"Conversations"}),u.length>0?(0,c.jsx)(eu.l,{variant:"full",children:u.map(e=>(0,c.jsxs)(eu.l.LinkItem,{href:e.href,onClick:t=>{t.preventDefault(),l(e.href)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.CommentIcon,{})}),e.text]},e.id))}):(0,c.jsx)("p",{className:i7.conversationsText,children:"No conversations yet"})]})})})]})};try{i9.displayName||(i9.displayName="SpaceHomePageDetails")}catch{}let i8={container:"SpaceHomePageState-module__container--U1I3l",title:"SpaceHomePageState-module__title--j3DVO",description:"SpaceHomePageState-module__description--DU0xQ"},re="DependabotIcon",rt="blue",rn={BeakerIcon:j.BeakerIcon,BookIcon:j.BookIcon,BroadcastIcon:j.BroadcastIcon,CloudIcon:j.CloudIcon,CodeIcon:j.CodeIcon,DatabaseIcon:j.DatabaseIcon,DependabotIcon:j.DependabotIcon,HubotIcon:j.HubotIcon,OrganizationIcon:j.OrganizationIcon,PlusIcon:j.PlusIcon,ProjectRoadmapIcon:j.ProjectRoadmapIcon,TelescopeIcon:j.TelescopeIcon,TerminalIcon:j.TerminalIcon},ra=Object.keys(rn);function ri(e){return e&&e in rn!=!1?rn[e]:rn[re]}let rr=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"],ro=e=>rr.find(t=>t===e)??rt,rs={container:"SpacesAvatar-module__container--zJJUl",auburn:"SpacesAvatar-module__auburn--CIKFA",blue:"SpacesAvatar-module__blue--csQQ0",brown:"SpacesAvatar-module__brown--n04yP",coral:"SpacesAvatar-module__coral--_ML4p",cyan:"SpacesAvatar-module__cyan--o0MwN",gray:"SpacesAvatar-module__gray--vvb1W",green:"SpacesAvatar-module__green--Ro4IV",indigo:"SpacesAvatar-module__indigo--_0T4q",lemon:"SpacesAvatar-module__lemon--gsHE8",lime:"SpacesAvatar-module__lime--vRdDX",olive:"SpacesAvatar-module__olive--G1neu",orange:"SpacesAvatar-module__orange--FmpCu",pine:"SpacesAvatar-module__pine--jFhFP",pink:"SpacesAvatar-module__pink--vHHwu",plum:"SpacesAvatar-module__plum--M6SF6",purple:"SpacesAvatar-module__purple--_4Sak",red:"SpacesAvatar-module__red--IUpfe",teal:"SpacesAvatar-module__teal--q0AMo",yellow:"SpacesAvatar-module__yellow--DdvtA"},rl={auburn:rs.auburn,blue:rs.blue,brown:rs.brown,coral:rs.coral,cyan:rs.cyan,gray:rs.gray,green:rs.green,indigo:rs.indigo,lemon:rs.lemon,lime:rs.lime,olive:rs.olive,orange:rs.orange,pine:rs.pine,pink:rs.pink,plum:rs.plum,purple:rs.purple,red:rs.red,teal:rs.teal,yellow:rs.yellow};function rc({icon:e,color:t,size:n=16}){let{SpaceIcon:a,spaceColor:i}=(0,P.useMemo)(()=>({SpaceIcon:ri(e),spaceColor:ro(t)}),[e,t]);return(0,c.jsx)("div",{style:{"--custom-size":`var(--base-size-${2*n})`},className:(0,ei.$)(rs.container,rl[i]),children:(0,c.jsx)(a,{size:n})})}try{rc.displayName||(rc.displayName="SpacesAvatar")}catch{}function rd(e){return void 0!==e.id}let ru=e=>{let{selectedThreadID:t,textAreaRef:n,onSubmit:a,customCopilotId:i}=e,r=(0,et.b)(),o=(0,h.Pk)(),{isPending:s,data:l,error:d}=ea(i);(0,P.useEffect)(()=>{l&&rd(l)&&r.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:l}),r.clearCurrentReferences()},[l,r]);let[u,m]=(0,P.useState)(!1);if(d instanceof CustomCopilotNotFoundError)return(0,c.jsx)(iO,{});if(s||!l)return(0,c.jsx)(iy,{});let p=!!rd(l)&&(0,G.Hh)(l);return(0,c.jsx)(c.Fragment,{children:rd(l)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:i8.container,children:[(0,c.jsx)(rc,{icon:l.iconType,color:l.iconColor}),(0,c.jsx)("h1",{className:i8.title,children:(0,c.jsx)(iD.A,{title:l.name,maxWidth:"100%",children:l.name})}),l.description&&(0,c.jsx)("p",{className:i8.description,children:l.description}),(0,c.jsx)("div",{className:"width-full",children:(0,c.jsx)(tX.V,{textAreaRef:n,onSubmit:a,isStreaming:!!o.streamingMessage,size:"small",hideAttachmentButton:!0,disabled:p},t)}),(0,c.jsx)(i9,{currentSpace:l,state:o,manager:r,customCopilotId:i,setShowEditInstructionsDialog:m,referenceSizeExceeded:p})]}),u&&(0,c.jsx)(iU,{copilotSpace:l,onClose:()=>m(!1)})]}):(0,c.jsx)(iO,{protectedOrganizations:l.protectedOrganizations})})};try{ru.displayName||(ru.displayName="SpaceHomePageState")}catch{}let rm=({inputRef:e,panelWidth:t,isMobile:n})=>{let{scrollToBottom:a}=(0,n4.b)(),i=(0,h.Pk)(),{streamingMessage:r,messages:o}=i,s=(0,et.b)().getSelectedThread(i),l=(0,m.CB)(s),d=s?.sharedMessageID,{messages:u,groupedMessages:p}=(0,n9.a)(i),f=u.find(e=>"assistant"===e.role)?.id;return(0,w.N)(()=>a("instant"),[a]),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"sr-only",children:[(0,c.jsx)("h1",{children:"Copilot Chat"}),(0,c.jsx)("h2",{children:l})]}),p.map((a,i)=>(0,c.jsx)(n3.i,{isLastGroup:i===p.length-1,children:a.map((s,l)=>{let u=-1===s.messageIndex?o.length:s.messageIndex;return(0,c.jsx)(ih,{isLatestMessage:i===p.length-1&&l===a.length-1,isSharedMessage:s.id===d,isFirstReply:s.id===f,message:s,messageIndex:u,inputRef:e,panelWidth:t,isStreaming:s.id===r?.id,autoOpenPreviewPane:!n},l)})},i))]})},rp=()=>(0,c.jsx)(iA,{title:"Conversation failed to load",description:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ep.A,{href:"",onClick:e=>{e.preventDefault(),window.location.reload()},inline:!0,children:"Reload the page"})," ","to try again."]})}),rh=()=>{let{messagesLoading:e,ssoOrganizations:t}=(0,h.Pk)(),n=e.missingOrgIds?.map(e=>String(e)).map(e=>t?.find(t=>t.id===e)?.login).filter(e=>!!e),a=n&&n.length>0?"This URL may be incorrect, you're signed out of your organization or the conversation may have been deleted.":"This URL may be incorrect or the conversation may have been deleted.";return(0,c.jsx)(iA,{title:"Conversation not found",description:a,ssoOrgs:n})},rf=()=>(0,c.jsx)(iA,{title:"Shared conversation not found",description:"This URL may be incorrect or the conversation may have been deleted."}),rg=({inputRef:e,panelWidth:t,isMobile:n,onSubmit:a})=>{let i=(0,h.Pk)(),r=(0,et.b)(),{currentReferences:o,messagesLoading:s,threadsLoading:l,messages:d,showTopicPicker:u,selectedThreadID:m}=i,f=r.getSelectedThread(i),{textAreaRef:g}=(0,n7.Y)(e),y=tY(),v=(0,G.iI)(),x=(0,P.useMemo)(()=>!i.selectedThreadID&&q.J.getEntrypointMessage(),[i.selectedThreadID]),_=null,C=null;(0,e4.B)(d).length&&"loaded"===s.state?_=(0,c.jsx)(rm,{inputRef:g,panelWidth:t,isMobile:n}):("loading"===s.state||"pending"===s.state)&&i.selectedThreadID&&!u?_=(0,c.jsx)(iy,{}):"error"===s.state&&i.selectedThreadID&&(null===f||s.notFound)?p.W.copilotSharedForbiddenError?p.W.copilotSharedForbiddenError&&(C=y&&i.fetchSharedThreads?.ok===!1?403===i.fetchSharedThreads.status?(0,c.jsx)(iP,{}):(0,c.jsx)(rf,{}):(0,c.jsx)(rh,{})):C=y?(0,c.jsx)(rf,{}):(0,c.jsx)(rh,{}):"error"===s.state||"error"===l.state?C=(0,c.jsx)(rp,{}):"loading"===s.state||x||(C=v?(0,c.jsx)(eo.t,{fallback:(0,c.jsx)(eg,{regionName:"This space"}),children:(0,c.jsx)(ru,{selectedThreadID:m,textAreaRef:g,onSubmit:a,customCopilotId:v})}):(0,c.jsx)(iT,{showSuggestions:0===o.length&&!i.currentTopic}));let{model:j}=(0,h.bP)("model"),b=p.W.attachImagesImmersive&&p.W.wholeAreaDragDrop,N=(0,c.jsxs)(n4.$,{className:iL.container,children:[C&&(0,c.jsx)("div",{className:iL.emptyContent,children:C}),_&&(0,c.jsxs)("div",{className:iL.messageContent,children:[_,(0,c.jsx)(ry,{}),(0,c.jsx)(n6.Cb,{})]}),(0,c.jsx)(n6.zc,{})]});return b?(0,c.jsx)(i_,{model:j,state:i,manager:r,children:N}):N},ry=()=>{let{isScrolledUp:e,scrollToBottom:t}=(0,n4.b)();return(0,c.jsx)(k.K,{"aria-label":"Scroll to bottom",className:(0,ei.$)(iL.scrollToBottomButton,!e&&iL.hidden),onClick:()=>t("smooth"),icon:j.ArrowDownIcon,tooltipDirection:"n",tabIndex:-1,"aria-hidden":!0})};try{rm.displayName||(rm.displayName="Messages")}catch{}try{rp.displayName||(rp.displayName="FailedToLoadThreadError")}catch{}try{rh.displayName||(rh.displayName="NotFoundError")}catch{}try{rf.displayName||(rf.displayName="SharedThreadNotFound")}catch{}try{rg.displayName||(rg.displayName="ImmersiveChat")}catch{}try{ry.displayName||(ry.displayName="ScrollToBottomButton")}catch{}let rv={container:"Layout-module__container--ON_wj",left:"Layout-module__left--LHTG3",main:"Layout-module__main--JKQM5",content:"Layout-module__content--s7QoY",footer:"Layout-module__footer--raJHn",chatInputContainer:"Layout-module__chatInputContainer--DXrKy",previewPane:"Layout-module__previewPane--vF1ZO",active:"Layout-module__active--nDCtU",viewer:"Layout-module__viewer--M_UyD",fullscreenPreviewPane:"Layout-module__fullscreenPreviewPane--i4oKD",fullscreenPluginPane:"Layout-module__fullscreenPluginPane--nfB0s"},rx={container:"QuotaExceededBanner-module__container--BbiER"};function r_(){let{isLicensedLimited:e,canUpgradePlan:t,canPurchaseAdditionalQuota:n,resetDate:a}=(0,H.x)(),i=e?`You have reached your free plan limit. Limit resets on ${a}.`:`You have reached your monthly limit for premium requests. ${t?`Select an upgrade option or switch to the default model. Limit resets on ${a}.`:`Enable additional requests or switch to the default model. Limit resets on ${a}.`}`,r=t?(0,c.jsx)($.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade"}):n?(0,c.jsx)($.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Enable additional requests"}):null,o=t&&n?(0,c.jsx)(ep.A,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Enable additional requests"}):null;return(0,c.jsx)("div",{className:rx.container,children:(0,c.jsx)(V.l,{variant:"upsell",title:"Limit reached",description:i,hideTitle:!0,primaryAction:r,secondaryAction:o})})}try{r_.displayName||(r_.displayName="QuotaExceededBanner")}catch{}let rC={container:"QuotaExceededEmptyState-module__container--IH35J",main:"QuotaExceededEmptyState-module__main--UOew3",hero:"QuotaExceededEmptyState-module__hero--GYoHc",copy:"QuotaExceededEmptyState-module__copy--FI8o_",heading:"QuotaExceededEmptyState-module__heading--RHZjC",description:"QuotaExceededEmptyState-module__description--m4Qvb",footer:"QuotaExceededEmptyState-module__footer--xLpJU"};function rj(){let{resetDate:e}=(0,H.x)();return(0,c.jsxs)("div",{className:rC.container,children:[(0,c.jsxs)("div",{className:rC.main,children:[(0,c.jsx)("img",{className:rC.hero,src:"/images/modules/copilot-immersive-v1/hero.png",alt:"Hero"}),(0,c.jsxs)("div",{className:rC.copy,children:[(0,c.jsx)("h2",{className:rC.heading,children:"You\u2019ve reached your free plan limit"}),(0,c.jsxs)("p",{className:rC.description,children:["Your limits will reset on ",e,"."]}),(0,c.jsx)($.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,U.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade to Pro"})]})]}),(0,c.jsxs)("div",{className:rC.footer,children:[(0,c.jsx)("strong",{children:"Part of an organization?"}),(0,c.jsxs)("span",{children:["Upgrade to"," ",(0,c.jsx)(ep.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]})]})}try{rj.displayName||(rj.displayName="QuotaExceededEmptyState")}catch{}let rb={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function rN({variant:e,customCopilot:t}){switch(e){case rb.customCopilotDisabled:return(0,c.jsx)(i3,{});case rb.customCopilotSizeExceeded:return(0,c.jsx)(i4,{customCopilot:t});case rb.spaceHomepage:return(0,c.jsx)(c.Fragment,{});default:return null}}try{rN.displayName||(rN.displayName="SpaceConversationBanner")}catch{}function rI(e){let{closeDialog:t}=e,[n,a]=(0,P.useState)({});return(0,c.jsxs)(nS.l,{renderFooter:()=>(0,c.jsx)(rT,{...e}),title:"Share space",onClose:t,width:"large",children:[n.base||n.visibility?(0,c.jsx)(V.l,{hideTitle:!0,title:"Unable to update space visibility",description:n.visibility||n.base,"aria-label":"Critical",variant:"critical"}):null,(0,c.jsxs)(A.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[(0,c.jsx)(A.B,{direction:"horizontal",gap:"condensed",align:"start",children:"This space may contain private content. Viewers must have have access to all referenced content."}),(0,c.jsxs)(A.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,c.jsx)("p",{className:"text-bold mt-2 mb-0",children:"Who has access"}),(0,c.jsx)(rS,{onError:a,...e})]})]})]})}function rS({customCopilotId:e,onError:t}){let{customCopilots:n}=(0,h.Pk)(),a=n?.find(t=>G.UG(t,e));return a?(0,c.jsx)("div",{className:"border rounded-2 width-full",children:(0,c.jsx)(eu.l,{role:"list",showDividers:!0,className:"py-1",children:(0,c.jsxs)(eu.l.Item,{role:"listitem",children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(a1.r,{src:a.ownerAvatar})}),(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsxs)("div",{className:"flex-auto",children:[(0,c.jsx)("b",{className:"mr-2",children:a.ownerDisplayName}),(0,c.jsx)("span",{className:"text-light text-small",children:"Owner"})]}),(0,c.jsx)(rE,{onError:t,copilotSpace:a,visibility:a.visibility})]})]})})}):null}let rw=[{text:"Only you can access",value:"private"},{text:"The entire organization can access",value:"org_public"}];function rE({copilotSpace:e,visibility:t,onError:n}){let a=(0,et.b)(),[i,r]=(0,P.useState)(!1),[o,s]=(0,P.useState)(!1),l=(0,P.useRef)(null),d=rw.find(e=>e.value===t);async function u(t){if(!o){s(!0);try{let i=(0,G.fn)(e),r=await (0,Q.lS)(i,{method:"PUT",body:{custom_copilot:{visibility:t}}});if(r.ok){let e=await r.json();a.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}else{let e=await r.json();e.errorMessages?n(e.errorMessages):n({base:e.error})}}catch{n({base:"An error occurred while creating your space"})}finally{s(!1),r(!1)}}}return e.editable?(0,c.jsxs)(ed.W,{onOpenChange:r,anchorRef:l,open:i,children:[(0,c.jsxs)(ep.A,{muted:!0,className:"text-small text-light",ref:l,onClick:()=>r(!0),children:[(0,c.jsx)(iD.A,{title:d?.text||"",inline:!0,className:"mr-1",children:d?.text}),(0,c.jsx)(j.TriangleDownIcon,{size:15})]}),(0,c.jsx)(ed.W.Overlay,{width:"medium",children:(0,c.jsx)(eu.l,{selectionVariant:"single",children:rw.map(e=>(0,c.jsx)(eu.l.Item,{selected:e.value===d?.value,onSelect:()=>u(e.value),children:(0,c.jsx)("span",{className:"text-small",children:e.text})},e.value))})})]}):(0,c.jsx)("div",{children:(0,c.jsx)(iD.A,{title:d?.text||"",className:"text-small text-light",children:d?.text})})}function rT({customCopilotId:e}){let[t,n]=(0,P.useState)(!1),a=(0,P.useRef)(null),i=C.fV.origin,{id:r,owner:o}=e,s=(0,P.useMemo)(()=>o?`${i}${m.VR}/${o}/${r}`:`${i}${m.VR}/${r}`,[i,o,r]);return(0,c.jsx)(nS.l.Footer,{children:(0,c.jsx)(A.B,{direction:"horizontal",gap:"condensed",align:"start",justify:"end",children:t?(0,c.jsx)(e0.Q,{leadingVisual:j.CheckIcon,variant:"primary",children:"Copied!"}):(0,c.jsx)(e0.Q,{leadingVisual:j.LinkIcon,variant:"primary",onClick:()=>{(0,nT.D)(s),n(!0),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{n(!1),a.current=null},2e3)},children:"Copy link"})})})}try{rI.displayName||(rI.displayName="CopilotSpaceVisibilityDialog")}catch{}try{rS.displayName||(rS.displayName="VisibilitySettings")}catch{}try{rE.displayName||(rE.displayName="VisibilitySelect")}catch{}try{rT.displayName||(rT.displayName="CopilotSpaceVisibilityDialogFooter")}catch{}function rk({closeDialog:e,customCopilotId:t}){let[n,a]=(0,P.useState)(!1),i=(0,P.useRef)(null),r=C.fV.origin,{id:o,owner:s}=t,l=s?`${r}${m.VR}/${s}/${o}/share`:`${r}${m.VR}/${o}/share`;return(0,c.jsx)(nS.l,{title:"Share space",onClose:e,width:"large",children:(0,c.jsxs)(A.B,{"data-testid":"share-copilot-space",gap:"condensed",children:[(0,c.jsxs)(A.B,{direction:"horizontal",gap:"condensed",align:"start",children:[(0,c.jsx)(j.InfoIcon,{size:20,className:nA.infoIcon})," This space may contain private content. Viewers must have have access to all referenced content."]}),(0,c.jsxs)(A.B,{direction:"horizontal",gap:"condensed",align:"start",children:[(0,c.jsx)(nI.A,{className:"flex-1",readOnly:!0,value:l,placeholder:l}),n?(0,c.jsxs)(e0.Q,{sx:{color:"var(--fgColor-success)"},children:[(0,c.jsx)(j.CheckIcon,{})," Copied!"]}):(0,c.jsx)(e0.Q,{leadingVisual:j.CopyIcon,onClick:()=>{(0,nT.D)(l),a(!0),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{a(!1),i.current=null},2e3)},children:"Copy link"})]})]})})}try{rk.displayName||(rk.displayName="ShareCopilotSpaceDialog")}catch{}var rA=n(40961);let rP={avatarContainer:"SpacesFormDialog-module__avatarContainer--mWqaR",avatarContainerButton:"SpacesFormDialog-module__avatarContainerButton--SKRWC",footerContainer:"SpacesFormDialog-module__footerContainer--Ir0LP"};function rL({onSelect:e}){let[t,n]=(0,P.useState)([]),[a,i]=(0,P.useState)(!1),[r,o]=(0,P.useState)(void 0),s=t=>{o(t),e(t)};(0,P.useEffect)(()=>{(async()=>{try{let e=await (0,Q.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),a=t?.owners;if(!e.ok||!a){l();return}n(a),a[0]&&s(a[0])}catch{l()}})()},[]);let l=()=>{n([]),i(!0)};return(0,c.jsxs)(nN.A,{required:!0,children:[(0,c.jsx)(nN.A.Label,{children:"Owner"}),(0,c.jsxs)(ed.W,{children:[(()=>{let e=r?.name||"Choose an owner",t=r?(0,c.jsx)(a1.r,{src:r.avatarUrl},r.avatarUrl):void 0;return(0,c.jsx)(ed.W.Button,{"data-testid":"owner-dropdown-anchor",block:!0,alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,c.jsx)(ed.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",sx:{overflow:"auto"},children:(0,c.jsx)(eu.l,{showDividers:!0,children:(0,c.jsx)(eu.l.Group,{sx:{maxHeight:350,overflow:"auto"},children:(0,c.jsxs)(eu.l,{selectionVariant:"single",children:[t&&t.map(e=>{let{name:t,avatarUrl:n,displayName:a}=e;return(0,c.jsxs)(eu.l.Item,{selected:t===r?.name,onSelect:()=>s(e),children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(a1.r,{src:n})}),t,(0,c.jsx)(eu.l.Description,{children:a})]},t)}),!t.length&&!a&&(0,c.jsx)(eu.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),a&&(0,c.jsx)(eu.l.Item,{disabled:!0,sx:{color:"danger.fg"},children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]})]})}try{rL.displayName||(rL.displayName="SpacesOwnerDropdown")}catch{}function rD(){return{icon:ra[Math.floor(Math.random()*ra.length)],color:rr[Math.floor(Math.random()*rr.length)]}}function rR({onClose:e,copilotSpaceId:t}){let n=(0,tU.Zp)(),{isLoading:a,data:i}=en(!0),r=(0,G.JB)(i,t),o=p.W.customCopilotOrgOwned,[s,l]=(0,P.useState)(r?.name??""),[d,u]=(0,P.useState)(r?.description??""),[m,h]=(0,P.useState)({}),[f,g]=(0,P.useState)(null),[y,v]=(0,P.useState)(()=>r?{icon:r.iconType??re,color:r.iconColor??rt}:rD()),{upsertCopilotSpace:x,isPending:_}=iF(r),C=async()=>{if(_)return;let t={name:s,description:d,iconType:y.icon,iconColor:y.color};o&&f&&!r&&(t.ownerId=f.id,t.ownerType=f.type);try{let a=await x(t);if(h({}),!r&&a){let e=(0,G.Cb)(a);return n(e)}e()}catch(e){h(e??{})}},b=e=>{e?.preventDefault(),C()},N=!!r;return a||!i?null:(0,c.jsx)(nS.l,{title:N?"Edit space":"Create new space",onClose:e,width:"large",renderFooter:()=>(0,c.jsxs)("div",{className:rP.footerContainer,children:[(0,c.jsx)(e0.Q,{variant:"default",onClick:e,children:"Cancel"}),(0,c.jsx)(e0.Q,{loading:_,loadingAnnouncement:N?"Saving space":"Creating space",variant:"primary",onClick:()=>C(),children:N?"Save":"Create"})]}),children:(0,c.jsx)(af.tL,{commands:{"github:submit-form":()=>b()},children:(0,c.jsx)("form",{onSubmit:b,children:(0,c.jsxs)(A.B,{children:[Object.keys(m).length>0&&(0,c.jsx)(V.l,{title:"Failed to save this Copilot Space",description:m.base,variant:"critical",className:"mb-2"}),(0,c.jsxs)(A.B,{direction:"horizontal",align:"end",children:[(0,c.jsxs)(nN.A,{className:"flex-auto",children:[(0,c.jsx)(nN.A.Label,{required:!0,children:"Name"}),(0,c.jsx)(nI.A,{block:!0,name:"space name",value:s,placeholder:"Enter name",onChange:e=>{if(l(e.target.value),m.name||m.slug){let e={...m};delete e.name,delete e.slug,h(e)}}}),m.slug&&(m.name?(0,c.jsx)(nN.A.Validation,{variant:"error",children:(0,c.jsxs)("span",{children:["Name ",m.name]})}):(0,c.jsx)(nN.A.Validation,{variant:"error",children:(0,c.jsx)("span",{children:G.j0})}))]}),(0,c.jsxs)("div",{className:rP.avatarContainer,children:[(0,c.jsx)(rc,{...y}),(0,c.jsx)(k.K,{icon:j.ArrowSwitchIcon,size:"medium",variant:"default",onClick:()=>v(rD()),"aria-labelledby":"Change avatar",className:rP.avatarContainerButton})]})]}),!r&&(0,c.jsx)(rL,{onSelect:g}),(0,c.jsxs)(nN.A,{children:[(0,c.jsx)(nN.A.Label,{children:"Description"}),(0,c.jsx)(rO,{text:d,promptCharLimit:1e3}),(0,c.jsx)(T.Ay,{block:!0,resize:"vertical",rows:3,name:"description","aria-label":"Description",value:d,placeholder:"Describe the purpose of this space.",onChange:e=>{if(u(e.target.value),m.description){let e={...m};delete e.description,h(e)}}}),m.description&&(0,c.jsx)(nN.A.Validation,{variant:"error",children:(0,c.jsxs)("span",{children:["Description ",m.description]})})]})]})})})})}function rO({text:e,promptCharLimit:t}){let n=e.length>t,a=(0,c.jsxs)(c.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return(0,c.jsx)(c.Fragment,{children:n?(0,c.jsx)(nN.A.Validation,{variant:"error",children:a}):(0,c.jsx)(nN.A.Caption,{children:a})})}try{rR.displayName||(rR.displayName="SpacesFormDialog")}catch{}try{rO.displayName||(rO.displayName="CharacterCount")}catch{}function rM({onDelete:e,copilot:t}){let[n,a]=(0,P.useState)(null),[i,r]=(0,P.useState)(!1),o=(0,P.useRef)(null),[s,l]=(0,P.useState)(!1),d=p.W.shareCustomCopilot||p.W.customCopilotVisibility,u=p.W.customCopilotVisibility&&t.ownerIsOrg?rI:rk,m=!p.W.customCopilotOrgOwned||t.editable,h=()=>{(0,rA.flushSync)(()=>a(null)),o.current?.focus()},f=async e=>{h(),r(!0),await e(),r(!1)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ed.W,{anchorRef:o,children:[(0,c.jsx)(ed.W.Anchor,{children:(0,c.jsx)(k.K,{loading:i,icon:j.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:()=>(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})})}),(0,c.jsx)(ed.W.Overlay,{side:"outside-bottom",align:"end",children:(0,c.jsxs)(eu.l,{children:[m&&(0,c.jsxs)(eu.l.Item,{onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),l(!0)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.PencilIcon,{})}),"Edit"]}),d&&(0,c.jsxs)(eu.l.Item,{onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),a("share")},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.ShareIcon,{})}),"Share"]}),m&&(0,c.jsxs)(eu.l.Item,{variant:"danger",onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),a("delete")},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.TrashIcon,{})}),"Delete"]})]})})]}),"delete"===n?(0,c.jsx)(rB,{onCancel:h,onConfirm:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),f(e)}}):null,"share"===n?(0,c.jsx)(u,{closeDialog:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),h()},customCopilotId:t}):null,s&&(0,c.jsx)(rR,{copilotSpaceId:t,onClose:()=>{l(!1)}})]})}let rB=({onConfirm:e,onCancel:t})=>(0,c.jsx)(nb.K,{title:"Delete space",onClose:n=>{"confirm"===n?((0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"}),e()):((0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."});try{rM.displayName||(rM.displayName="CopilotSpacesMenu")}catch{}try{rB.displayName||(rB.displayName="DeleteDialog")}catch{}function rF({isSidebarOpen:e}){let t=(0,et.b)(),n=(0,h.Pk)(),a=(0,tJ.d)(),{updateGlobalNavigationBreadcrumbs:i}=n0(),r=(0,iV.Z)(),[o,s]=(0,P.useState)(!1),[l,d]=(0,P.useState)(!1),[u,f]=(0,P.useState)(!1),g=p.W.shareCustomCopilot||p.W.customCopilotVisibility,y=(0,P.useRef)(null),v=a&&C.fV?.pathname!==m.VR,x=(0,P.useMemo)(()=>a?(0,G.JB)(n.customCopilots,a):null,[n.customCopilots,a]),_=(0,P.useMemo)(()=>p.W.customCopilotVisibility&&x&&x?.ownerIsOrg?rI:rk,[x]);(0,P.useEffect)(()=>{i()},[i]);let b=async()=>{a&&(r(m.VR),await t.deleteCopilotSpace(a))},N=x?.editable||!p.W.customCopilotOrgOwned,I=v&&!n.selectedThreadID?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eu.l.Group,{children:[(0,c.jsx)(eu.l.GroupHeading,{children:"Space"}),N&&(0,c.jsxs)(eu.l.Item,{onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),f(!0)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.PencilIcon,{})}),"Edit"]}),g&&(0,c.jsxs)(eu.l.Item,{onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),d(!0)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.ShareIcon,{})}),"Share"]}),N&&(0,c.jsxs)(eu.l.Item,{variant:"danger",onSelect:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),s(!0)},children:[(0,c.jsx)(eu.l.LeadingVisual,{children:(0,c.jsx)(j.TrashIcon,{})}),"Delete"]})]}),(0,c.jsx)(eu.l.Divider,{})]}):null;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n5,{showModelPicker:!!a,showPreviewPaneButton:!1,conversationSpecificItems:I,isSidebarOpen:e}),o&&a?(0,c.jsx)(rB,{onCancel:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),s(!1)},onConfirm:b}):null,l&&a?(0,c.jsx)(_,{closeDialog:()=>{(0,U.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),d(!1)},customCopilotId:a}):null,u&&a?(0,c.jsx)(rR,{copilotSpaceId:a,onClose:()=>{f(!1),y.current?.focus()}}):null]})}try{rF.displayName||(rF.displayName="SpacesHeader")}catch{}try{(i=ShareDialog).displayName||(i.displayName="ShareDialog")}catch{}function rU({isMobile:e,textAreaRef:t,isSidebarOpen:n}){let a=(0,h.Pk)(),{currentReferences:i,context:r,messages:o}=a,s=(0,et.b)(),{chatQuotaExceeded:l,premiumInteractionsQuotaExceeded:d,overagesEnabled:u,reloadQuota:m}=(0,H.x)(),f=!!a.model?.billing?.is_premium,y=function(){let{figmaAuthUrl:e}=(0,g.X)();if(!e)return;let t=new URL(e,location.origin);return t.searchParams.set("return_url",location.pathname+location.search),t.toString()}(),v=s.getSelectedThread(a),x=(0,P.useRef)(a.currentTopic),{versionedItems:_,updateItem:C,items:j}=(0,B.xx)(),b=tY(),N=t5(),I=(0,tJ.d)(),{variant:S,customCopilot:w}=function(e,t){let{isPending:n,data:a,error:i}=ea(e),r=i instanceof CustomCopilotNotFoundError;if(i&&!r)throw i;let o=n||r||!a||void 0===a.id?void 0:a;return{variant:function(e,t,n,a){if(p.W.customCopilots&&e&&!a)return rb.spaceHomepage;if(n)return null;let i=!!t;return e&&!i?rb.customCopilotDisabled:(0,G.Hh)(t)?rb.customCopilotSizeExceeded:null}(e,o,n,t),customCopilot:o,isLoading:n}}(I,a.selectedThreadID),E=S===rb.spaceHomepage;(0,P.useEffect)(()=>{x.current=a.currentTopic},[a.currentTopic]);let T=o.length,k=t0({messageIndex:T}),A=(0,P.useCallback)(async e=>{if(m(),""===e.trim())return;for(let e of i){let t=(0,eN.oR)({ref:e,messageIndex:T});null!=t&&C({...t,isUserEdited:!1})}let t={thread:v,content:e,references:i,topic:x.current,context:r,customInstructions:a.customInstructions,model:a.model,customCopilotId:I,skillOptions:a.skillOptions};if(b){let e=await s.continueSharedThread(N);if(e){let{thread:n,messages:a}=e,i=a.at(-1)?.id;await s.sendChatMessage({...t,thread:n,parentMessageId:i})}}else await s.sendChatMessage(t)},[m,v,i,r,a.customInstructions,a.model,a.skillOptions,I,b,s,N,T,C]);(0,P.useEffect)(()=>{let e=q.J.getEntrypointMessage();e&&!l&&(q.J.setEntrypointMessage(null),setTimeout(()=>{A(e)},100))},[A,l]);let L=(0,P.useMemo)(()=>{let e=new Set;for(let[,t]of j)"file"===t.type&&e.add(t.name);return e},[j]),D=!l&&(!p.W.premiumRequestQuotasEnabled||u||!d||!f);return(0,c.jsxs)(c.Fragment,{children:[E?(0,c.jsx)(rF,{isSidebarOpen:n}):(0,c.jsx)(n5,{isSidebarOpen:n}),!a.selectedThreadID&&l?(0,c.jsx)(rj,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:rv.content,children:(0,c.jsx)(rg,{inputRef:t,isMobile:e,onSubmit:A})}),(!b||p.W.copilotDuplicateThread)&&(0,c.jsx)("div",{className:rv.footer,children:(0,c.jsx)("div",{className:rv.chatInputContainer,children:D?S?(0,c.jsx)(rN,{variant:S,customCopilot:w}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nu,{}),(0,c.jsx)(tX.V,{textAreaRef:t,onSubmit:A,isStreaming:!!a.streamingMessage,size:"large",onClickReference:k,hideAttachmentButton:!!I,getReferenceVersion:e=>(0,eN.wt)(e,T,_),existingFileNames:L,figmaAuthUrl:y})]}):(0,c.jsx)(r_,{})})})]})]})}function r$(e){return(0,c.jsx)(eo.t,{fallback:(0,c.jsx)(eg,{regionName:"This conversation"}),children:(0,c.jsx)(rU,{...e})})}try{rU.displayName||(rU.displayName="ConversationViewInner")}catch{}try{r$.displayName||(r$.displayName="ConversationView")}catch{}var rV=n(84976),rz=n(35642);let rW={ConversationList__container:"ConversationList-module__ConversationList__container--rX8fM",ConversationList__empty:"ConversationList-module__ConversationList__empty--sTf7Y",ConversationList:"ConversationList-module__ConversationList--LAVA0",ConversationList__section:"ConversationList-module__ConversationList__section--ihwdi",ConversationList__title:"ConversationList-module__ConversationList__title--IHb4U",ConversationList__item:"ConversationList-module__ConversationList__item--dD6z4",ConversationList__link:"ConversationList-module__ConversationList__link--Byc2c",ConversationList__text:"ConversationList-module__ConversationList__text--YbHpv",ConversationList__context:"ConversationList-module__ConversationList__context--SK6Jb"};function rH({selectedItemID:e,loadingState:t,onConversationSelect:n}){let a=(0,et.b)(),{threads:i}=(0,h.Pk)(),r=(0,P.useMemo)(()=>((function(e){let t=iq();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():iG())}})(i),a.sortThreads(i).map(e=>({id:e.id,text:(0,m.CB)(e),href:`${m.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))),[i,a]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()-7);let i=new Date(t);i.setDate(t.getDate()-30);let r=[],o=[],s=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?r.push(c):c.date.toDateString()===n.toDateString()?o.push(c):c.date>a?s.push(c):c.date>i&&l.push(c);return{Today:r,Yesterday:o,"Last 7 days":s,"Last 30 days":l}}(r),s=0===r.length,l=(0,P.useId)();return(0,c.jsx)("nav",{"aria-labelledby":`${l}-conversations`,id:`${l}-conversation-list`,tabIndex:-1,className:rW.ConversationList__container,children:s&&("loading"===t||"pending"===t)?(0,c.jsx)(rz.r,{lines:5}):s?(0,c.jsx)(rG,{}):(0,c.jsxs)("div",{className:rW.ConversationList__section,children:[(0,c.jsx)("h3",{id:`${l}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(o).map(([t,a])=>a.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{id:`${l}_${t}`,className:rW.ConversationList__title,children:t}),(0,c.jsx)("ul",{className:rW.ConversationList,children:a.map(t=>(0,c.jsx)(rq,{item:t,selectedItemId:e??void 0,onSelect:n,threads:i},t.id))})]},t))]})})}function rq({item:e,selectedItemId:t,onSelect:n,threads:a}){let i=e.id===t,[r,o]=(0,P.useState)(null),[s,l,d]=(0,n_.B)(!1),u=a.get(t),m=!!u?.customCopilotID,p=(0,P.useRef)(null),h=(0,P.useCallback)(()=>{(0,nx.flushSync)(()=>o(null)),p.current?.focus()},[]);return e.href&&(0,c.jsxs)("li",{className:rW.ConversationList__item,children:[(0,c.jsx)(rV.N_,{className:rW.ConversationList__link,to:e.href,"aria-current":i?"page":void 0,onClick:()=>{n(),(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,c.jsx)("span",{className:rW.ConversationList__text,children:e.text})}),(0,c.jsx)("span",{className:rW.ConversationList__context,children:(0,c.jsxs)(ed.W,{anchorRef:p,children:[(0,c.jsx)(ed.W.Anchor,{children:(0,c.jsx)(k.K,{loading:s,icon:j.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:()=>(0,U.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,c.jsx)(ed.W.Overlay,{children:(0,c.jsx)(eu.l,{children:(0,c.jsx)(nL,{onOpenDialog:o,isShared:!!a.get(e.id)?.sharedID,showShare:!m})})})]})}),(0,c.jsx)(nD,{visibleDialog:r,onClose:h,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:l,onFinishLoading:d})]},e.id)}function rG(){return(0,c.jsxs)("div",{className:rW.ConversationList__empty,children:[(0,c.jsx)(E.A,{as:"h3",sx:{fontSize:1,mb:2},children:"No conversations yet"}),(0,c.jsx)(nk.A,{sx:{color:"fg.muted"},children:"Ask Copilot anything on the right to start your first conversation."})]})}try{rH.displayName||(rH.displayName="ConversationList")}catch{}try{rq.displayName||(rq.displayName="ConversationListEntry")}catch{}try{rG.displayName||(rG.displayName="EmptyState")}catch{}function rK(){return(0,c.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"})})}try{rK.displayName||(rK.displayName="ComposeIcon")}catch{}function rQ({className:e,size:t=16}){return(0,c.jsx)("svg",{className:e,width:t,height:t,"aria-hidden":"true",fill:"none",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9853 4.76795c.2467 1.23107.1819 2.55631-.3218 3.71134 1.0897-1.00527 1.7464-2.46826 1.7464-3.86921 0-.41421.3357-.75.75-.75.4142 0 .75.33579.75.75 0 2.80515-2.0553 5.92172-5.26314 6.53282.12999.0339.26315.0635.39904.0885 1.3486.2485 2.7916.0174 3.7282-.5446.3552-.2131.8159-.0979 1.029.2573.2131.3552.0979.8159-.2573 1.029-1.3033.782-3.1303 1.0359-4.77168.7335-1.47895-.2726-2.95185-1.0297-3.73462-2.4328.03609.3407.0998.6912.19117 1.0445.39625 1.5319 1.23152 2.7976 2.12066 3.2689.36598.194.5054.6479.31141 1.0139-.19399.366-.64793.5054-1.01391.3114-1.41889-.7521-2.42362-2.4914-2.87037-4.2186-.37219-1.439-.41354-3.09054.18406-4.40236-.18676.13263-.36743.27694-.54001.43237-1.03593.93306-1.73142 2.22122-1.73142 3.69879 0 .4142-.33579.75-.75.75-.41422 0-.75-.3358-.75-.75 0-1.97509.934-3.64826 2.22755-4.81334.88055-.7931 1.9505-1.37217 3.05387-1.65822-.11043-.0376-.22261-.07252-.33631-.10464-1.50098-.42402-2.98649-.28172-3.84609.36302-.33136.24853-.80147.18139-1.05-.14998-.24854-.33136-.1814-.80146.14997-1.05 1.38041-1.03537 3.4149-1.0978 5.1539-.60654 1.67421.47295 3.33259 1.53108 4.06402 3.11319l.0038.00674c.035-.47081.0022-.96424-.0972-1.46029-.2603-1.29954-.95701-2.50156-1.90466-3.21238-.33135-.24854-.39848-.71865-.14994-1.050006.24855-.331356.71865-.398487 1.05001-.14994C10.8023 1.6197 11.6657 3.17263 11.9853 4.76795ZM7.99998 6.0001c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2Z",fill:"currentColor"})})}try{rQ.displayName||(rQ.displayName="SpacesIcon")}catch{}let rZ={list:"ServiceList-module__list--YDLyn",icon:"ServiceList-module__icon--iUANO"};function rX({toggleFloatingSidebar:e}){let t=(0,h.Pk)(),{activePlugin:n,selectedThreadID:a}=t,i=(0,u.qw)(),r=(0,et.b)(),o=nj(),s=(0,G.hH)(),l=async t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),e(),await o({clearTopic:!0,includeThreads:!1}),(0,U.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},d=(t,n)=>{t.metaKey||t.ctrlKey||(e(),r.selectPlugin(n))};return(0,c.jsxs)("ul",{className:rZ.list,children:[(0,c.jsx)(_.Vx,{"aria-current":a||n||s?void 0:"page",displayName:"Dashboard",href:m.Jz,icon:j.HomeIcon,id:"home",onLinkClick:l}),p.W.customCopilots&&(0,c.jsx)(_.Vx,{"aria-current":s?"page":void 0,displayName:"Spaces",expandOnClick:!1,hasItems:!1,href:m.VR,iconOverride:(0,c.jsx)(rQ,{className:rZ.icon,size:16}),id:"spaces",onLinkClick:()=>{e(),r.selectPlugin(null)}}),i.map(e=>void 0!==e.NavigationComponent?(0,c.jsx)(e.NavigationComponent,{chatState:t,onLinkClick:d},e.id):null)]})}try{rX.displayName||(rX.displayName="ServiceList")}catch{}let rJ={container:"Sidebar-module__container--s585U",header:"Sidebar-module__header--uOLk8",sidebar:"Sidebar-module__sidebar--sn0TN",conversations:"Sidebar-module__conversations--NEO0w",quicklinks:"Sidebar-module__quicklinks--wbmcD",blankslateContainer:"Sidebar-module__blankslateContainer--Gvuc8",pinned:"Sidebar-module__pinned--e3Nsi",visible:"Sidebar-module__visible--d8dRm"};function rY({isVisible:e,isPinned:t,isFloating:n,onNewThread:a,onToggle:i}){let r=(0,h.Pk)(),{threads:o,selectedThreadID:s}=r,l=n?e:t,d=(0,et.b)(),u=(0,P.useRef)(!1),f=nj(),g=tY(),y=p.W.immersiveServiceNavigation;(0,P.useEffect)(()=>{0!==o.size||u.current||(u.current=!0,d.fetchThreads())},[o,d,r]);let v=()=>{n&&e&&i()},x=(0,P.useRef)(null);(0,P.useEffect)(()=>{if(e&&n){let e=e=>{x.current&&!x.current.contains(e.target)&&i()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},[e,n,i]);let _=(0,P.useId)();return(0,c.jsxs)("aside",{"aria-labelledby":`${_}-copilot-navigation`,ref:x,className:(0,ei.$)(rJ.container,e&&rJ.visible,t&&rJ.pinned),children:[(0,c.jsxs)("div",{className:rJ.header,children:[(0,c.jsx)("h2",{id:`${_}-copilot-navigation`,className:"sr-only",children:"Copilot navigation"}),(0,c.jsx)(k.K,{icon:l?j.SidebarExpandIcon:j.SidebarCollapseIcon,"aria-label":l?"Close conversations":"Open conversations",onClick:()=>{i(),l?(0,U.BI)("dotcom_chat.activate",{target:"SIDEBAR_EXPAND",mode:"immersive"}):(0,U.BI)("dotcom_chat.activate",{target:"SIDEBAR_COLLAPSE",mode:"immersive"})},variant:"default"}),(0,c.jsx)(k.K,{as:rV.N_,to:m.Jz,icon:rK,"aria-label":"New conversation",onClick:async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),v(),await f({clearTopic:!0,includeThreads:!1}),a(),(0,U.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},variant:"default"})]}),(0,c.jsx)("div",{className:rJ.sidebar,children:(0,c.jsx)(eo.t,{fallback:(0,c.jsx)(r0,{}),children:(0,c.jsxs)("div",{className:rJ.conversations,children:[(0,c.jsxs)("nav",{"aria-labelledby":`${_}-quick-links`,className:rJ.quicklinks,children:[(0,c.jsx)("h3",{id:`${_}-quick-links`,className:"sr-only",children:"Quick links"}),y&&(0,c.jsx)(rX,{toggleFloatingSidebar:v})]}),(0,c.jsx)(rH,{selectedItemID:g?null:s,loadingState:r.threadsLoading.state,onConversationSelect:v})]})})})]})}function r0(){return(0,c.jsx)("div",{className:rJ.blankslateContainer,children:(0,c.jsx)(eg,{regionName:"The conversations menu"})})}try{rY.displayName||(rY.displayName="Sidebar")}catch{}try{r0.displayName||(r0.displayName="SidebarContentsFallback")}catch{}var r1=n(72819);let r2={metadata:"SpacesCard-module__metadata--sQAQe",metadataItem:"SpacesCard-module__metadataItem--wvRpg"};function r5({onClick:e}){return(0,c.jsxs)(r1.Z,{onClick:e,children:[(0,c.jsx)(r1.Z.Icon,{icon:j.PlusIcon}),(0,c.jsx)(r1.Z.Heading,{children:"Create a new space"}),(0,c.jsx)(r1.Z.Description,{children:"Add attachments, repositories, and more."})]})}function r3({copilotSpace:e,spaceVisibilityEnabled:t,onDelete:n,onClick:a}){let i=ri(e.iconType),r=e.ownerIsOrg?j.OrganizationIcon:j.PersonIcon,o="org_public"===e.visibility?j.PeopleIcon:j.LockIcon,s="org_public"===e.visibility?"Shared":"Private";return(0,c.jsxs)(r1.Z,{href:(0,G.Cb)(e),onClick:a,children:[(0,c.jsx)(r1.Z.Icon,{icon:i,color:e.iconColor}),(0,c.jsx)(r1.Z.Heading,{children:e.name}),(0,c.jsx)(r1.Z.Description,{children:e.description}),(0,c.jsx)(r1.Z.Menu,{children:(0,c.jsx)(rM,{copilot:e,onDelete:n})}),(0,c.jsx)(r1.Z.Metadata,{children:t?(0,c.jsxs)("div",{className:r2.metadata,children:[(0,c.jsxs)("div",{className:r2.metadataItem,children:[(0,c.jsx)(r,{}),e.ownerDisplayName]}),(0,c.jsxs)("div",{className:r2.metadataItem,children:[(0,c.jsx)(o,{}),s]})]}):(0,c.jsx)("div",{className:r2.metadata,children:(0,c.jsxs)("div",{className:r2.metadataItem,children:[(0,c.jsx)(j.ClockIcon,{}),(0,c.jsx)(a2.A,{format:"micro",prefix:"",date:new Date(e.updatedAt)})]})})})]},e.owner?`${e.owner}/${e.id}`:e.id)}try{r5.displayName||(r5.displayName="NewSpacesCard")}catch{}try{r3.displayName||(r3.displayName="SpacesCard")}catch{}try{(r=SpaceIconComponent).displayName||(r.displayName="SpaceIconComponent")}catch{}function r4({copilotSpaces:e}){let t=p.W.customCopilotVisibility,n=(0,et.b)(),{ssoOrganizations:a}=(0,h.Pk)(),i=a.map(e=>e.login),[r,o]=(0,P.useState)(!1),s=void 0===e,l=()=>{o(!0)},d=e=>async()=>{await n.deleteCopilotSpace(e)},u=()=>{(0,U.BI)("dotcom_chat.activate",{target:"SIDEBAR_CUSTOM_COPILOT_SELECTED",mode:"immersive"})},m=e&&e.length>0;return(0,c.jsxs)(eo.t,{fallback:(0,c.jsx)(eg,{regionName:"Spaces"}),children:[(0,c.jsx)(rF,{}),(0,c.jsxs)(S.A.Container,{children:[(0,c.jsx)(S.A.Banner,{children:a.length>0&&(0,c.jsx)(eq.x,{protectedOrgs:i,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`})}),(0,c.jsxs)(S.A.Header,{children:[(0,c.jsx)(S.A.Icon,{icon:(0,c.jsx)(rQ,{size:32})}),(0,c.jsx)(S.A.Title,{children:m||s?"Spaces":"Set context once. Chat again and again."}),(0,c.jsx)(S.A.Description,{children:"Create a unique version of Copilot based on a bundle of GitHub files and more."}),!m&&!s&&(0,c.jsx)(e0.Q,{variant:"primary",onClick:l,children:"New Space"})]}),(m||s)&&(0,c.jsxs)(S.A.Section,{children:[(0,c.jsx)(S.A.Section.Title,{children:"Your spaces"}),(0,c.jsxs)(S.A.Section.Grid,{loading:s,children:[(0,c.jsx)(r5,{onClick:l}),e?.map?.(e=>c.jsx(r3,{copilotSpace:e,spaceVisibilityEnabled:t,onDelete:d(e),onClick:u},e.owner?`${e.owner}/${e.id}`:e.id))]})]}),r&&(0,c.jsx)(rR,{onClose:()=>o(!1)})]})]})}try{r4.displayName||(r4.displayName="SpacesView")}catch{}function r6(){let e=(0,h.Pk)(),{customCopilots:t}=e,{reloadQuota:n}=(0,H.x)(),a=(0,P.useRef)(null),{previewPaneOpen:i}=(0,B.xx)(),r=(0,u.nu)((0,h.A3)("activePlugin")),o=p.W.customCopilots,s=o&&(0,G.VR)();!function(e){let t=(0,et.b)(),{data:n}=en(e);(0,P.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}(o);let l=(0,P.useCallback)(()=>{window.setTimeout(()=>{a.current?.focus()},1),n()},[n,a]),d=(0,P.useRef)(null),[m,f]=(0,P.useState)(()=>!!d.current&&d.current.clientWidth<=1024),[g,y]=(0,P.useState)(()=>d.current?d.current.clientWidth>1024&&(q.J.getImmersiveSidebarCollapsedState()??!0):q.J.getImmersiveSidebarCollapsedState()??!0),[v,x]=(0,P.useState)(!1);(0,P.useEffect)(()=>{if(!d.current)return;let e=()=>{let e=d.current?.clientWidth;void 0!==e&&(e<=1024?(f(!0),y(!1)):(f(!1),x(!1),y(q.J.getImmersiveSidebarCollapsedState()??!0)))},t=new ResizeObserver(()=>{e()});return t.observe(d.current),e(),()=>{t.disconnect()}},[v]);let _=!m&&g,C=!!m&&v,j=(0,P.useRef)(null),[b,N]=(0,P.useState)(()=>!!j.current&&j.current.clientWidth<=1280);return(0,P.useEffect)(()=>{if(!j.current)return;let e=()=>{let e=j.current?.clientWidth;void 0!==e&&e>0&&N(e<=1280)},t=new ResizeObserver(e);return t.observe(j.current),e(),()=>t.disconnect()},[]),(0,c.jsxs)("div",{className:(0,ei.$)(rv.container,!r&&b&&rv.fullscreenPreviewPane,r?.widePreviewArea&&rv.fullscreenPluginPane),"data-testid":"chat-layout","data-hpc":!0,ref:j,children:[(0,c.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),r?.PageComponent&&null!==e.selectedThreadID?(0,c.jsx)("div",{className:rv.main,children:(0,c.jsx)(r7,{plugin:r})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:rv.left,ref:d,hidden:b&&i,children:[(0,c.jsx)(rY,{isVisible:C,isPinned:_,isFloating:m,onNewThread:l,onToggle:()=>{if(m)x(!v);else{let e=!g;y(e),q.J.setImmersiveSidebarCollapsedState(e)}}}),(0,c.jsx)("div",{className:rv.main,children:s?(0,c.jsx)(r4,{copilotSpaces:t}):r?.ViewComponent?(0,c.jsx)(r9,{plugin:r}):(0,c.jsx)(r$,{isMobile:b,textAreaRef:a,isSidebarOpen:m?C:_},e.selectedThreadID)})]}),(0,c.jsx)("div",{className:(0,ei.$)(rv.previewPane,i&&rv.active),children:(0,c.jsx)("div",{className:(0,ei.$)(rv.viewer),children:(0,c.jsx)(tZ,{returnFocusRef:a})})})]})]})}function r7({plugin:e}){let t=(0,h.Pk)(),{PageComponent:n}=e;return n?(0,c.jsx)(n,{chatState:t,plugin:e},t.selectedThreadID):null}function r9({plugin:e}){let t=(0,h.Pk)(),{closePreviewPane:n,openPreviewPane:a}=(0,B.xx)(),{ViewComponent:i}=e;return i?(0,c.jsx)(i,{chatState:t,closePreviewPane:n,openPreviewPane:a,plugin:e},t.selectedThreadID):null}try{r6.displayName||(r6.displayName="Layout")}catch{}try{r7.displayName||(r7.displayName="PluginPageContent")}catch{}try{r9.displayName||(r9.displayName="PluginViewContent")}catch{}let r8=/\/copilot\/([^/]+)/;function oe(e){let t=C.fV.pathname;return(0,P.useMemo)(()=>{let n=t.match(r8);if(!n)return null;let[,a]=n;return a&&e.find(e=>e.id===a)?a:null},[t,e])}var ot=n(99425);let on=(0,y.E7)();function oa(){return(0,c.jsx)(M.RelayEnvironmentProvider,{environment:on,children:(0,c.jsx)(oi,{})})}function oi(){let e=(0,g.X)();return e?.copilotChatSettingEnabled?(0,c.jsx)(or,{children:(0,c.jsx)(oo,{})}):(0,c.jsx)(W,{})}function or({children:e}){let t=(0,g.X)(),n=t5(),{refs:a,topic:i}=(0,P.useMemo)(()=>{let e=t.requestedTopic;return(0,m.P)(e)?{refs:[(0,m.UU)(e)],topic:void 0}:{refs:[],topic:e}},[t.requestedTopic]),r=(0,P.useMemo)(()=>{let e=[];return p.W.pipesPlugin&&e.push(new f.N(t.apiURL,t.graphqlApiUrl,t.ssoOrganizations.map(e=>e.id),t.realIp)),p.W.workbenchPlugin&&e.push(new SparkPlugin),e},[t.apiURL,t.graphqlApiUrl,t.realIp,t.ssoOrganizations]),o=oe(r);return(0,c.jsx)(v.LB,{children:(0,c.jsx)(u.Hb,{plugins:r,children:(0,c.jsx)(h.Mj,{workerPath:t.searchWorkerFilePath,threadId:n,pluginId:o,refs:a,mode:"immersive",topic:i,ssoOrganizations:t.ssoOrganizations,copilotUpsellBannerDismissed:t.copilotUpsellBannerDismissed,copilotChatPayload:t,children:(0,c.jsx)(B.BH,{children:e})})})})}function oo(){return!function(){let e=t5(),t=(0,P.useRef)(!0),n=(0,P.useRef)(null),a=(0,et.b)(),{threads:i,selectedThreadID:r}=(0,h.Pk)(),o=tY();(function(){let{selectedThreadID:e,sharedThreadChannel:t}=(0,h.Pk)(),n=(0,et.b)();(0,ot.x)(t,()=>{n.fetchSharedThreadMessages(e)})})(),(0,P.useEffect)(()=>{o?a.fetchSharedThreadMessages(r):a.fetchMessages(r)},[]),(0,P.useEffect)(()=>{if(t.current){t.current=!1,n.current=e;return}if(n.current!==e){if(n.current=e,e===r)return;let t=e&&i?.get(e);a.selectThread(t||null,{includeThreads:!1,clearTopic:!0})}},[a,e,i,r])}(),function(){let{selectedThreadID:e}=(0,h.Pk)(),t=(0,tt.M)((0,tU.Zp)());(0,P.useEffect)(()=>{if(!e)return;let n=`${m.Jz}/c/${e}`,a=`${m.Jz}/share/${e}`,i=window.location.pathname;i.startsWith(n)||i.startsWith(a)||t.current(n)},[t,e])}(),function(){let e=(0,et.b)();(0,P.useEffect)(()=>{let t=()=>{window.location.href.includes("/r/")?(e.showTopicPicker(!1),e.selectThread(null)):window.location.href.includes("/c/")||(e.showTopicPicker(!0),e.selectThread(null))};return window.addEventListener("popstate",t),()=>{window.removeEventListener("popstate",t)}},[e])}(),!function(){let e=oe((0,u.qw)()),t=t5(),{activePlugin:n}=(0,h.bP)("activePlugin"),a=(0,et.b)();(0,P.useEffect)(()=>{t||(n??null)===e||a.selectPlugin(e)},[n,a,e,t])}(),(0,c.jsx)(r6,{})}try{oa.displayName||(oa.displayName="CopilotImmersive")}catch{}try{oi.displayName||(oi.displayName="CopilotImmersiveNoRelay")}catch{}try{or.displayName||(or.displayName="CopilotImmersiveProviders")}catch{}try{oo.displayName||(oo.displayName="Immersive")}catch{}(0,l.o)("copilot-immersive-v1",()=>({App:d,routes:[(0,s.a)({path:"/copilot",Component:oa,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/c/:threadID",Component:oa,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/d/:docsetName",Component:oa}),(0,s.a)({path:"/copilot/r/:owner/:repository",Component:oa}),(0,s.a)({path:"/copilot/share/:threadID",Component:oa}),(0,s.a)({path:"/copilot/loops",Component:oa,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/workbench",Component:oa,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/spark",Component:oa,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/spaces",Component:oa}),(0,s.a)({path:"/copilot/spaces/:spaceID",Component:oa}),(0,s.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:oa})]}))},32837:(e,t,n)=>{n.d(t,{B:()=>i});var a=n(96540);function i(e){let[t,n]=(0,a.useState)(e);return[t,(0,a.useCallback)(()=>n(!0),[]),(0,a.useCallback)(()=>n(!1),[])]}},77097:(e,t,n)=>{n.d(t,{N:()=>PipesPlugin});var a,i,r,o,s=n(74848),l=n(21728),c=n(96540),d=n(34164),u=n(58748),m=n(87330),p=n(38621),h=n(65615),f=n(27314),g=n(78075);let y={canvasContainer:"Canvas-module__canvasContainer--DcP1I",canvasGraph:"Canvas-module__canvasGraph--oUp5H",diagram:"Canvas-module__diagram--HYI6K",gridPattern:"Canvas-module__gridPattern--CD_S7",nodesOverlay:"Canvas-module__nodesOverlay--oHrnE",nodeWrapper:"Canvas-module__nodeWrapper--jkBOV"};function v(e){return"text"===e.type}let x={code:{color:"pink",contentFields:["content"],icon:()=>p.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",featureFlag:"copilot_pipes_react_nodes",type:"code",outputLabel:"Code output"},"github-graphql":{contentFields:["content"],icon:()=>p.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",featureFlag:"copilot_pipes_github_graphql_nodes",type:"github-graphql",outputLabel:"JSON"},loop:{contentFields:["content"],icon:()=>p.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",featureFlag:"copilot_pipes_pipeline_nodes",type:"loop",outputLabel:"Pipeline output"},prompt:{contentFields:["content"],icon:()=>p.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown"},text:{contentFields:["content"],icon:e=>e&&v(e)?_(e,"icon"):p.TypographyIcon,description:e=>e&&v(e)?_(e,"description"):"Input for nodes",label:e=>e&&v(e)?_(e,"name"):"Input",color:"blue",type:"text"},visualize:{contentFields:["content"],icon:()=>p.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",featureFlag:"copilot_pipes_react_nodes",type:"visualize"}};function _(e,t){return C[e.inputType.type][t]}let C={range:{name:"Range",description:"A numeric value within a specified range",icon:p.NumberIcon},text:{name:"Text",description:"Free form text input",icon:p.TypographyIcon},boolean:{name:"Boolean",description:"True or false value",icon:p.CheckIcon},select:{name:"Select",description:"Choose from a list of predefined options",icon:p.ListUnorderedIcon},file:{name:"File",description:"Upload and reference a file",icon:p.FileIcon}},j=(e,t)=>{let n=x[e.type];if(!n)return e;let a={...e};for(let i of n.contentFields)e[i]&&(a[i]=function(e,t,n=!1){let a=b();return e.replace(a,(e,a,i)=>{if(!a||!Object.keys(t).includes(a))return e;let r=t[a];if(i){if("object"==typeof r&&null!==r){try{r=function(e,t){if(!t||!e)return null;let n=t.split("."),a=e;for(let e of n){if(null==a||"object"!=typeof a)return null;a=a[e]}return a}(r,i)}catch(e){throw Error(`Error accessing path "${i}" on node with ID "${a}"`)}if(null===r)throw Error(`Path "${i}" on node with ID "${a}" does not have a value`)}else throw Error(`Cannot access path "${i}" on non-object node with ID "${a}"`)}let o=r;return"string"!=typeof o||n?JSON.stringify(o):o})}(e[i],t,["code","visualize"].includes(e.type)));return a},b=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g;async function N(e){return[{role:"user",content:`${e.content}

Respond with only the content\u{2014}no introductions, explanations, or extra text.

Don't wrap the response in a code block.`}]}let I=e=>{let t={nodes:new Map,edges:[],layers:[]};if(!e.nodes)return t;for(let n of e.nodes){if(!n?.id)continue;let e=w(n.id);t.nodes.set(e,n)}for(let n of e.nodes)for(let e of S(n)){let a=w(e);n?.id&&a&&t.edges.push({from:a,to:n.id})}let n=function(e){let t={},n=new Set,a=(i,r=0)=>{try{if(n.has(i))throw Error(`Potential cycle detected at node ${i}`);if(n.add(i),r>100)return!function(...e){}(`Maximum recursion depth reached for node ${i}`),0;if(void 0!==t[i])return t[i];let o=e.nodes.get(i);if(!o)return t[i]=0,0;let s=S(o);if(s&&0!==s.size){let e=[...s].map(e=>{let t=w(e);return a(t,r+1)});t[i]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===i).map(e=>e.to);0===n.length?t[i]=-1:t[i]=1}return t[i]}finally{n.delete(i)}};for(let[n]of e.nodes)if(!t[n])try{a(n)}catch(e){t[n]=0}let i=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=i);let r=[];for(let[n,a]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[a]||(r[a]=[]),r[a].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t};function S(e){let t=b();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function w(e){return e.match(/^[^|.]+/)?.[0]??e}let E=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:e.type,inputType:e.inputType||void 0,content:e.content||"",id:(e.id||"").trim()};if("string"!=typeof n.content&&(n.content=""),"loop"===n.type){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>v(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},T=(e,t)=>({...e,nodes:(e.nodes||[]).map(e=>E(e,t)).filter(e=>null!==e)});function k(e){let t=I(e);return e.nodes.filter(e=>!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id))}var A=n(37304);let P={value:null,running:!1,pending:!1,progress:0},L={executionState:{nodes:{},iteration:0},uiState:{focusedNodeId:null,hoveredNodeId:null},pipelineState:{pipelines:{},validationErrors:[],selectedPipelineId:null,isUpdating:!1,isLoading:!1}},D={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue"};function R(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",errorType:D.MissingProperty,involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",errorType:D.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:D.MissingProperty,involvedNodes:[e.id]}),"text"===e.type&&(t=t.concat(function(e){let t=[],n=e.inputType;if("object"!=typeof n||!n)return t.push({error:"inputType is required for text nodes",errorType:D.MissingProperty,involvedNodes:[e.id]}),t;switch(n.type){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:D.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",errorType:D.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",errorType:D.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:D.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:D.InvalidSelectValue,involvedNodes:[e.id]});break;case"file":["pdf","video","image","audio","document","code","other"].includes(n.fileType)||t.push({error:`Invalid file type ${n.fileType}`,errorType:D.InvalidFileType,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:D.EmptyInputValue,involvedNodes:[e.id]})}return t}(e))),t}(n));return t}(e),n=I(e);for(let a of n.edges){let n=e.nodes.find(e=>e.id===a.from),i=e.nodes.find(e=>e.id===a.to);n&&i||t.push({error:`Node ${a.to} references a nonexistent node {{${a.from}}}`,errorType:D.NonexistentNode,involvedNodes:[a.to]})}let a=function(e){let t=new Set,n=new Set,a=[],i=r=>{if(n.has(r)){let e=a.indexOf(r);return a.slice(e)}if(t.has(r))return null;for(let o of(t.add(r),n.add(r),a.push(r),e.edges))if(o.from===r){let e=i(o.to);if(e)return e}return n.delete(r),a.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=i(n.id);if(e)return e}return null}(n);if(a&&a.length>0){let e=[...a,a[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,errorType:D.CycleDetected,involvedNodes:a})}let i=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],a=new Set,i=(t,n)=>{for(let r of(a.add(t),n.add(t),e.edges))r.from!==t||a.has(r.to)||i(r.to,n),r.to!==t||a.has(r.from)||i(r.from,n)};for(let e of t)if(!a.has(e.id)){let t=new Set;i(e.id,t),n.push(t)}if(n.length<=1)return[];let r=n.reduce((e,t)=>t.size>e.size?t:e,new Set),o=[];for(let e of t)r.has(e.id)||o.push(e.id);return o}(n);return i.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${i.join(", ")}`,errorType:D.DisconnectedNode,involvedNodes:i}),t}let O=new Set([D.EmptyInputValue]);function M(e){return e.length>0&&e.every(e=>O.has(e.errorType))}function B(e,t){return{...e,executionState:function(e,t){switch(t.type){case"RESTORE_EXECUTION_STATE":return{...t.executionState,nodes:Object.fromEntries(Object.entries(t.executionState.nodes).map(([e,t])=>[e,{...P,value:t.value,error:t.error}]))};case"CLEAR_NODE_RESULTS":{let n={...e.nodes};for(let e of t.nodeIds)delete n[e];return{...e,nodes:n}}case"SET_RUNNING":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??P,running:t.running}}};case"SET_PENDING":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??P,pending:t.pending}}};case"UPDATE_PROGRESS":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??P,progress:t.progress}}};case"UPDATE_NODE_VALUE":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??P,value:t.value}}};case"UPDATE_NODE_ERROR":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??P,error:t.error,value:null,running:!1}}};case"CLEAR_PENDING_NODES":if(t.iteration!==e.iteration)return e;return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(([e,t])=>[e,{...t,pending:!1}]))};case"CANCEL_EXECUTION":if(t.iteration!==e.iteration)return e;return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(([e,t])=>[e,{...t,running:!1,pending:!1,progress:0}]))};case"INCREMENT_ITERATION":return{...e,iteration:e.iteration+1};default:return e}}(e.executionState,t),uiState:function(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"ADD_PIPELINE":{if(e.focusedNodeId&&t.pipeline.nodes.map(e=>e.id).includes(e.focusedNodeId))return e;let n=function(e){let t=R(e);if(!M(t))return;let n=new Set(t.reduce((e,t)=>e.concat(t.involvedNodes),[]));for(let t of I(e).layers)for(let e of t)if(n.has(e.id))return e.id}(t.pipeline);if(n)return{...e,focusedNodeId:n,hoveredNodeId:null};return e}case"SELECT_PIPELINE":return{focusedNodeId:null,hoveredNodeId:null};case"ADD_NODE_TO_PIPELINE":return{...e,focusedNodeId:t.node.id};case"REMOVE_NODE":if(e.focusedNodeId===t.nodeId)return{...e,focusedNodeId:null};return e;default:return e}}(e.uiState,t),pipelineState:function(e,t){switch(t.type){case"INITIALIZE_PIPELINES":{let n=t.pipelines.find(t=>t.id===e.selectedPipelineId),a=n?R(n):[];return{...e,validationErrors:a,pipelines:t.pipelines.reduce((e,t)=>({...e,[t.id]:t}),{}),isLoading:!1}}case"SELECT_PIPELINE":{if(null===t.pipelineId)return{...e,selectedPipelineId:null};let n=e.pipelines[t.pipelineId];if(!n)return e;return{...e,selectedPipelineId:t.pipelineId,validationErrors:R(n)}}case"SET_IS_UPDATING":return{...e,isUpdating:t.updating};case"ADD_PIPELINE":return{...e,pipelines:{...e.pipelines,[t.pipeline.id]:t.pipeline},selectedPipelineId:t.pipeline.id,validationErrors:R(t.pipeline)};case"REMOVE_PIPELINE":{let n={...e.pipelines};delete n[t.pipelineId];let a=e.selectedPipelineId===t.pipelineId?e.pipelines[0]?.id??null:e.selectedPipelineId,i=a?e.pipelines[a]:null,r=i?R(i):[];return{...e,pipelines:n,validationErrors:r,selectedPipelineId:a}}case"UPDATE_PIPELINE":case"ADD_NODE_TO_PIPELINE":case"UPDATE_PIPELINE_NODE":case"UPDATE_NODE":case"UPDATE_NODE_CONTENT":case"REMOVE_NODE":{let n=e.pipelines[t.pipelineId];if(!n)return e;let a=function(e,t){switch(t.type){case"ADD_NODE_TO_PIPELINE":return{...e,nodes:[...e.nodes??[],t.node]};case"REMOVE_NODE":return{...e,nodes:e.nodes.filter(e=>e.id!==t.nodeId)};case"UPDATE_NODE":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return{...e,nodes:[...e.nodes,{id:t.nodeId,type:"text",title:"",description:"",content:"",...t.updates}]};{let a=e.nodes[n];return{...e,nodes:[...e.nodes.slice(0,n),{...a,...t.updates},...e.nodes.slice(n+1)]}}}case"UPDATE_PIPELINE_NODE":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return e;let a=E({...e.nodes[n],...t.updates},[]);if(!a)return e;return{...e,nodes:[...e.nodes.slice(0,n),a,...e.nodes.slice(n+1)]}}case"UPDATE_NODE_CONTENT":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return e;let a=e.nodes[n];return{...e,nodes:[...e.nodes.slice(0,n),{...a,content:t.content},...e.nodes.slice(n+1)]}}case"UPDATE_PIPELINE":return T({...e,...t.updates},[]);default:return e}}(n,t),i=R(a);return{...e,validationErrors:i,pipelines:{...e.pipelines,[n.id]:a}}}default:return e}}(e.pipelineState,t)}}var F=n(10124),U=n(38568);let $=(0,c.createContext)(new A.Lj(L)),V=(0,c.createContext)(()=>{});function z({children:e}){let[t,n]=(0,c.useReducer)(B,L),a=(0,F.AI)(t);(0,U.N)(()=>{a.value=t},[t,a]);let i=(0,c.useCallback)(e=>{n(e)},[n]);return(0,s.jsx)($.Provider,{value:a,children:(0,s.jsx)(V.Provider,{value:i,children:e})})}function W(e){let t=(0,c.useContext)($);if(!t)throw Error("usePipesStateLens can only be used inside a PipesProvider");let n=(0,F.Sk)(t,e);return(0,F.HN)(n)}function H(){let e;let t=(0,l.c)(2),n=(0,c.useContext)($);if(!n)throw Error("useGetPipesState can only be used inside a PipesProvider");return t[0]!==n.value?(e=()=>n.value,t[0]=n.value,t[1]=e):e=t[1],e}function q(){return(0,c.useContext)(V)}try{$.displayName||($.displayName="PipesStateContext")}catch{}try{V.displayName||(V.displayName="PipesDispatchContext")}catch{}try{z.displayName||(z.displayName="PipesStateProvider")}catch{}function G(e){let t;if(e.pipelineState.selectedPipelineId&&(t=e.pipelineState.pipelines[e.pipelineState.selectedPipelineId]))return t}let K=e=>t=>{let n=G(t);return n?.nodes.find(t=>t.id===e)},Q=e=>t=>t.executionState.nodes[e];function Z(){let e=W(G);if(!e)throw Error("useCurrentPipeline should only be used in a context where we are guaranteed to have a pipeline");return e}function X(e){return W(t=>Q(e)(t)?.running??!1)}let J={edge:"CompactStyleEdge-module__edge--fynPR",edgeDefault:"CompactStyleEdge-module__edgeDefault--UXQph",edgeCompleted:"CompactStyleEdge-module__edgeCompleted--M5O4j",edgeError:"CompactStyleEdge-module__edgeError--vDcBp",edgeCompletedAddOn:"CompactStyleEdge-module__edgeCompletedAddOn--mtyH1",edgeAddon:"CompactStyleEdge-module__edgeAddon--XQPi4",edgeIdleAddon:"CompactStyleEdge-module__edgeIdleAddon--cnjTs",edgeProcAddon:"CompactStyleEdge-module__edgeProcAddon--Ll2xI"};var Y=n(30391);let ee=e=>{let t,n,a,i,r,o,u,m,p,h,f,g,y,v,x;let _=(0,l.c)(42),{path:C,source:j,target:b}=e,N=(0,c.useId)(),I=(0,Y.DP)(),S=function(e,t){return W(({executionState:n,pipelineState:a})=>{if(!e||!t)return"IDLE";let i=n.nodes[t]?.running||!1,r=n.nodes[e]?.value&&!n.nodes[e]?.running&&!a.validationErrors.some(t=>t.involvedNodes.includes(e));return n.nodes[e]?.error||a.validationErrors.some(t=>t.involvedNodes.includes(e))?"ERROR":i?"PROCESSING":r?"COMPLETED":"IDLE"})}(j,b),w=`mask-${N}`,E=`path-${N}`,T=`idle-grad-${N}`,k=`proc-grad-${N}`,A=I.colorScheme?.includes("dark")||I.colorScheme?.includes("night")?"#CCC":"#333";t=`${1+2*Math.random()}s`,_[0]!==T||_[1]!==k||_[2]!==w||_[3]!==C||_[4]!==E||_[5]!==S?(n=()=>"IDLE"===S||"PROCESSING"===S?(0,s.jsx)("g",{mask:`url(#${w})`,className:(0,d.$)(J.edgeAddon,"IDLE"===S&&J.edgeIdleAddon,"PROCESSING"===S&&J.edgeProcAddon),children:(0,s.jsx)("circle",{r:"IDLE"===S?25:30,fill:`url(#${"IDLE"===S?T:k})`,children:(0,s.jsx)("animateMotion",{rotate:"auto",dur:"IDLE"===S?"6s":"2s",begin:"IDLE"===S?t:"0s",repeatCount:"indefinite",children:(0,s.jsx)("mpath",{href:`#${E}`})})})}):"COMPLETED"===S?(0,s.jsx)("path",{d:C,strokeWidth:2,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:J.edgeCompletedAddOn}):void 0,_[0]=T,_[1]=k,_[2]=w,_[3]=C,_[4]=E,_[5]=S,_[6]=n):n=_[6];let P=n;_[7]!==A?(a=(0,s.jsx)("stop",{stopColor:A,stopOpacity:"0",offset:"0%"}),i=(0,s.jsx)("stop",{stopColor:A,stopOpacity:"0.6",offset:"100%"}),_[7]=A,_[8]=a,_[9]=i):(a=_[8],i=_[9]),_[10]!==T||_[11]!==a||_[12]!==i?(r=(0,s.jsxs)("linearGradient",{id:T,x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[a,i]}),_[10]=T,_[11]=a,_[12]=i,_[13]=r):r=_[13],_[14]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("stop",{stopColor:"#007bff",stopOpacity:"0",offset:"0%"}),u=(0,s.jsx)("stop",{stopColor:"#007bff",stopOpacity:"1",offset:"100%"}),_[14]=o,_[15]=u):(o=_[14],u=_[15]),_[16]!==k?(m=(0,s.jsxs)("linearGradient",{id:k,x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[o,u]}),_[16]=k,_[17]=m):m=_[17];let L="PROCESSING"===S?2.5:1.5;_[18]!==C||_[19]!==L?(p=(0,s.jsx)("path",{d:C,stroke:"white",strokeWidth:L,fill:"none",strokeLinecap:"round"}),_[18]=C,_[19]=L,_[20]=p):p=_[20],_[21]!==w||_[22]!==p?(h=(0,s.jsx)("mask",{id:w,children:p}),_[21]=w,_[22]=p,_[23]=h):h=_[23],_[24]!==h||_[25]!==r||_[26]!==m?(f=(0,s.jsxs)("defs",{children:[r,m,h]}),_[24]=h,_[25]=r,_[26]=m,_[27]=f):f=_[27];let D=("IDLE"===S||"PROCESSING"===S)&&J.edgeDefault,R="ERROR"===S&&J.edgeError,O="COMPLETED"===S&&J.edgeCompleted;return _[28]!==D||_[29]!==R||_[30]!==O?(g=(0,d.$)(J.edge,D,R,O),_[28]=D,_[29]=R,_[30]=O,_[31]=g):g=_[31],_[32]!==C||_[33]!==E||_[34]!==g?(y=(0,s.jsx)("path",{d:C,id:E,className:g,strokeWidth:2,fill:"none"}),_[32]=C,_[33]=E,_[34]=g,_[35]=y):y=_[35],_[36]!==P?(v=P(),_[36]=P,_[37]=v):v=_[37],_[38]!==f||_[39]!==y||_[40]!==v?(x=(0,s.jsxs)("g",{children:[f,y,v]}),_[38]=f,_[39]=y,_[40]=v,_[41]=x):x=_[41],x};try{ee.displayName||(ee.displayName="CompactStyleEdge")}catch{}var et=n(73451),en=n(9591),ea=n(55847),ei=n(8338),er=n(89323),eo=n(74144),es=n(46584);let el={dialogBody:"AddNodeButton-module__dialogBody--cBxuf"};function ec(e){let t,n,a,i,r,o,d,u,m,p,h,f;let g=(0,l.c)(25),{onClose:y,onConfirm:v}=e,[x,_]=(0,c.useState)(""),[C,j]=(0,c.useState)("");return g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(eo.l.Header,{children:"Add a new node to your pipeline"}),g[0]=t):t=g[0],g[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(et.A.Label,{children:"Node Title"}),g[1]=n):n=g[1],g[2]===Symbol.for("react.memo_cache_sentinel")?(a=e=>_(e.target.value),g[2]=a):a=g[2],g[3]!==x?(i=(0,s.jsxs)(et.A,{children:[n,(0,s.jsx)(en.A,{value:x,onChange:a,placeholder:"New node"})]}),g[3]=x,g[4]=i):i=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(et.A.Label,{children:"Node Description"}),g[5]=r):r=g[5],g[6]===Symbol.for("react.memo_cache_sentinel")?(o=e=>j(e.target.value),g[6]=o):o=g[6],g[7]!==C?(d=(0,s.jsxs)(et.A,{children:[r,(0,s.jsx)(en.A,{value:C,onChange:o,placeholder:"New node description"})]}),g[7]=C,g[8]=d):d=g[8],g[9]!==i||g[10]!==d?(u=(0,s.jsxs)(eo.l.Body,{className:el.dialogBody,children:[i,d]}),g[9]=i,g[10]=d,g[11]=u):u=g[11],g[12]!==y?(m=(0,s.jsx)(ea.Q,{onClick:y,children:"Cancel"}),g[12]=y,g[13]=m):m=g[13],g[14]!==C||g[15]!==v||g[16]!==x?(p=(0,s.jsx)(ea.Q,{onClick:()=>v(x,C),variant:"primary",children:"Confirm"}),g[14]=C,g[15]=v,g[16]=x,g[17]=p):p=g[17],g[18]!==p||g[19]!==m?(h=(0,s.jsxs)(eo.l.Footer,{children:[m,p]}),g[18]=p,g[19]=m,g[20]=h):h=g[20],g[21]!==y||g[22]!==h||g[23]!==u?(f=(0,s.jsxs)(eo.l,{title:"Add Node",onClose:y,children:[t,u,h]}),g[21]=y,g[22]=h,g[23]=u,g[24]=f):f=g[24],f}function ed(e){let t,n,a,i,r,o,c;let d=(0,l.c)(18),{nodeType:u,onSelect:m}=e;d[0]!==u?(t=u.icon(),d[0]=u,d[1]=t):t=d[1];let p=t;return d[2]!==u.type||d[3]!==m?(n=()=>m(u.type),d[2]=u.type,d[3]=m,d[4]=n):n=d[4],d[5]!==p?(a=(0,s.jsx)(ei.l.LeadingVisual,{children:(0,s.jsx)(p,{})}),d[5]=p,d[6]=a):a=d[6],d[7]!==u?(i=u.label(),d[7]=u,d[8]=i):i=d[8],d[9]!==u?(r=u.description(),d[9]=u,d[10]=r):r=d[10],d[11]!==r?(o=(0,s.jsx)(ei.l.Description,{variant:"block",children:r}),d[11]=r,d[12]=o):o=d[12],d[13]!==n||d[14]!==a||d[15]!==i||d[16]!==o?(c=(0,s.jsxs)(ei.l.Item,{onSelect:n,children:[a,i,o]}),d[13]=n,d[14]=a,d[15]=i,d[16]=o,d[17]=c):c=d[17],c}function eu(){let e,t,n,a,i,r,o,d,u,h,f,g,y;let v=(0,l.c)(37),_=(0,es.h)(),C=q(),{id:j,nodes:b}=Z(),[N,I]=(0,c.useState)();if(v[0]!==C||v[1]!==_||v[2]!==b||v[3]!==j){d=Symbol.for("react.early_return_sentinel");e:{let l,c,u;let h=Object.values(x);v[12]!==_?(l=(e,t)=>((!t.featureFlag||_[t.featureFlag])&&e.push(t),e),v[12]=_,v[13]=l):l=v[13];let f=h.reduce(l,[]);if(v[14]!==C||v[15]!==b||v[16]!==j?(c=(e,t,n)=>{C({type:"ADD_NODE_TO_PIPELINE",node:function(e,t,n,a){let i={content:"",id:t,title:n,description:a};switch(e){case"loop":return{...i,type:e,loopId:""};case"text":return{...i,type:e,inputType:{type:"text"}};default:return{...i,type:e}}}(e,(b.map(ep).reduce(em,0)+1).toString(),t,n),pipelineId:j})},v[14]=C,v[15]=b,v[16]=j,v[17]=c):c=v[17],a=c,!_.copilot_loops_post_staff_ship_features){d=null;break e}n=er.W,v[18]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(er.W.Anchor,{children:(0,s.jsx)(m.K,{"aria-label":"Add node",icon:p.PlusIcon})}),v[18]=o):o=v[18],t=er.W.Overlay,r="small",e=ei.l,v[19]===Symbol.for("react.memo_cache_sentinel")?(u=e=>(0,s.jsx)(ed,{nodeType:e,onSelect:()=>I(e.type)},e.type),v[19]=u):u=v[19],i=f.map(u)}v[0]=C,v[1]=_,v[2]=b,v[3]=j,v[4]=e,v[5]=t,v[6]=n,v[7]=a,v[8]=i,v[9]=r,v[10]=o,v[11]=d}else e=v[4],t=v[5],n=v[6],a=v[7],i=v[8],r=v[9],o=v[10],d=v[11];return d!==Symbol.for("react.early_return_sentinel")?d:(v[20]!==e||v[21]!==i?(u=(0,s.jsx)(e,{children:i}),v[20]=e,v[21]=i,v[22]=u):u=v[22],v[23]!==t||v[24]!==r||v[25]!==u?(h=(0,s.jsx)(t,{width:r,children:u}),v[23]=t,v[24]=r,v[25]=u,v[26]=h):h=v[26],v[27]!==n||v[28]!==o||v[29]!==h?(f=(0,s.jsxs)(n,{children:[o,h]}),v[27]=n,v[28]=o,v[29]=h,v[30]=f):f=v[30],v[31]!==a||v[32]!==N?(g=N&&(0,s.jsx)(ec,{onClose:()=>I(void 0),onConfirm:(e,t)=>{a(N,e,t),I(void 0)}}),v[31]=a,v[32]=N,v[33]=g):g=v[33],v[34]!==f||v[35]!==g?(y=(0,s.jsxs)(s.Fragment,{children:[f,g]}),v[34]=f,v[35]=g,v[36]=y):y=v[36],y)}function em(e,t){return Math.max(e,parseInt(t))}function ep(e){return e.id}try{ec.displayName||(ec.displayName="AddNodeDialog")}catch{}try{ed.displayName||(ed.displayName="AddNodeListItem")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}try{eu.displayName||(eu.displayName="AddNodeButton")}catch{}function eh(e){let t,n,a;let i=(0,l.c)(18),{value:r,isLoading:o,onClick:c,onStop:d,variant:u,disabled:h,iconOnly:f}=e,g=void 0===u?"invisible":u;i[0]!==o||i[1]!==r?(t=()=>o?"Loading...":r?"Run node":"Run loop",i[0]=o,i[1]=r,i[2]=t):t=i[2];let y=t;i[3]!==o||i[4]!==c||i[5]!==d?(n=e=>{o?d?.(e):c(e)},i[3]=o,i[4]=c,i[5]=d,i[6]=n):n=i[6];let v=n;if(!f){let e;let t=o?"danger":g,n=o?"Stop":"Run";return i[7]!==h||i[8]!==v||i[9]!==t||i[10]!==n?(e=(0,s.jsx)(ea.Q,{disabled:h,variant:t,onClick:v,children:n}),i[7]=h,i[8]=v,i[9]=t,i[10]=n,i[11]=e):e=i[11],e}let x=y(),_=o?p.SquareFillIcon:p.SyncIcon,C=o?"danger":g;return i[12]!==h||i[13]!==v||i[14]!==x||i[15]!==_||i[16]!==C?(a=(0,s.jsx)(m.K,{disabled:h,"aria-label":x,icon:_,onClick:v,variant:C}),i[12]=h,i[13]=v,i[14]=x,i[15]=_,i[16]=C,i[17]=a):a=i[17],a}try{eh.displayName||(eh.displayName="ExecuteButton")}catch{}function ef(){let e,t,n;let a=(0,l.c)(7),i=q(),r=W(ey),o=W(eg);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(er.W.Anchor,{children:(0,s.jsx)(m.K,{"aria-label":"Development",icon:p.ToolsIcon})}),a[0]=e):e=a[0],a[1]!==o||a[2]!==i||a[3]!==r?(t=Object.values(r).map(e=>(0,s.jsx)(ei.l.Item,{value:e.id,selected:o===e.id,onSelect:()=>{let t=Object.values(r).find(t=>t.id===e.id);t&&i({type:"SELECT_PIPELINE",pipelineId:t.id})},children:e.title},e.id)),a[1]=o,a[2]=i,a[3]=r,a[4]=t):t=a[4],a[5]!==t?(n=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(er.W,{children:[e,(0,s.jsx)(er.W.Overlay,{width:"small",children:(0,s.jsx)(ei.l,{selectionVariant:"single",role:"menu",children:t})})]})}),a[5]=t,a[6]=n):n=a[6],n}function eg(e){return G(e)?.id}function ey(e){return e.pipelineState.pipelines}try{ef.displayName||(ef.displayName="DevelopmentButton")}catch{}let ev=(0,c.createContext)(null),ex=ev.Provider;function e_(){let e=(0,c.useContext)(ev);if(!e)throw Error("usePipesService must be used inside a PipesServiceProvider");return e}try{ev.displayName||(ev.displayName="PipesServiceContext")}catch{}function eC(){let e=q(),t=e_(),n=H(),a=Z();return{runPipeline:async i=>{if(!(n().pipelineState.validationErrors.length>0))try{e({type:"INCREMENT_ITERATION"});let r=n().executionState.iteration+1;i?function(e,t,n){let a=function e(t,n){let a=new Set(t.edges.filter(e=>e.from===n).map(e=>e.to));for(let n of a)for(let i of e(t,n))a.add(i);return a.add(n),a}(I(e),t);n({type:"CLEAR_NODE_RESULTS",pipelineId:e.id,nodeIds:[...a]})}(a,i,e):e({type:"CLEAR_NODE_RESULTS",pipelineId:a.id,nodeIds:a.nodes.map(e=>e.id)}),await t.runPipeline(a,r,e)}catch(e){}},stopPipeline:(0,c.useCallback)(()=>{let i=n().executionState.iteration;t.stopPipeline(a.id,i,e)},[e,n,a.id,t])}}let ej={container:"CanvasHeader-module__container--WYGYo"},eb=()=>{let e;let t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("svg",{"aria-label":"Alert",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M9.11713 1.41595C9.98012 1.41595 10.6797 2.11555 10.6797 2.97853V8.18712C10.6797 9.05011 9.98012 9.74969 9.11713 9.74969C8.25414 9.74969 7.55455 9.05011 7.55455 8.18712V2.97853C7.55455 2.11555 8.25414 1.41595 9.11713 1.41595ZM11.2006 13.9165C11.2006 15.0672 10.2678 16 9.11713 16C7.96648 16 7.03369 15.0672 7.03369 13.9165C7.03369 12.7659 7.96648 11.8332 9.11713 11.8332C10.2678 11.8332 11.2006 12.7659 11.2006 13.9165Z",fill:"currentColor"})}),t[0]=e):e=t[0],e},eN=()=>{let e;let t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("svg",{"aria-label":"Focus center",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,s.jsx)("circle",{cx:"8",cy:"8",r:"5.25"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 8H15M1 8h3.5M8 11.5V15M8 1v3.5"})]})}),t[0]=e):e=t[0],e};try{(i=()=>{let e;let t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("svg",{"aria-label":"Loops Icon",width:"35",height:"15",viewBox:"0 0 35 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.1875 3.21429C5.8802 3.21429 3.9375 5.17331 3.9375 7.5C3.9375 9.82669 5.8802 11.7857 8.1875 11.7857C9.30351 11.7857 10.5717 11.2628 12.0658 10.227C13.1481 9.47666 14.2434 8.5341 15.3833 7.5C14.2434 6.4659 13.1481 5.52334 12.0658 4.77302C10.5717 3.73721 9.30351 3.21429 8.1875 3.21429ZM17.75 5.32376C16.4971 4.17999 15.1917 3.03949 13.8717 2.1243C12.1783 0.950293 10.259 0 8.1875 0C4.1198 0 0.75 3.39812 0.75 7.5C0.75 11.6019 4.1198 15 8.1875 15C10.259 15 12.1783 14.0496 13.8717 12.8758C15.1917 11.9606 16.4971 10.82 17.75 9.67624C19.0029 10.82 20.3083 11.9606 21.6283 12.8758C23.3218 14.0496 25.2411 15 27.3125 15C31.3802 15 34.75 11.6019 34.75 7.5C34.75 3.39812 31.3802 0 27.3125 0C25.2411 0 23.3218 0.950293 21.6283 2.1243C20.3083 3.03949 19.0029 4.17999 17.75 5.32376ZM20.1167 7.5C21.2566 8.5341 22.3519 9.47666 23.4342 10.227C24.9282 11.2628 26.1964 11.7857 27.3125 11.7857C29.6198 11.7857 31.5625 9.82669 31.5625 7.5C31.5625 5.17331 29.6198 3.21429 27.3125 3.21429C26.1964 3.21429 24.9282 3.73721 23.4342 4.77302C22.3519 5.52334 21.2566 6.4659 20.1167 7.5Z",fill:"#9198A1"})}),t[0]=e):e=t[0],e}).displayName||(i.displayName="LoopIcon")}catch{}try{eb.displayName||(eb.displayName="AlertIcon")}catch{}try{eN.displayName||(eN.displayName="FocusCenterIcon")}catch{}function eI(e){let t;let n=(0,l.c)(2),{onClick:a}=e;return n[0]!==a?(t=(0,s.jsx)(m.K,{"aria-label":"Set center alignment",icon:eN,onClick:e=>a(e)}),n[0]=a,n[1]=t):t=n[1],t}try{eI.displayName||(eI.displayName="CenterAlignButton")}catch{}function eS(e){let t,n,a,i,r,o;let c=(0,l.c)(13),{centerNodeCanvas:d}=e,{runPipeline:u,stopPipeline:m}=eC(),p=W(e=>Object.values(e.executionState.nodes).some(e=>e.running));c[0]!==u?(t=()=>{u()},c[0]=u,c[1]=t):t=c[1];let h=t;return c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(eu,{}),a=!1,c[2]=n,c[3]=a):(n=c[2],a=c[3]),c[4]!==d?(i=(0,s.jsx)(eI,{onClick:()=>d({duration:500})}),c[4]=d,c[5]=i):i=c[5],c[6]!==h||c[7]!==p||c[8]!==m?(r=(0,s.jsx)(eh,{isLoading:p,onClick:h,onStop:m,variant:"primary"}),c[6]=h,c[7]=p,c[8]=m,c[9]=r):r=c[9],c[10]!==i||c[11]!==r?(o=(0,s.jsxs)("div",{className:ej.container,children:[n,a,i,r]}),c[10]=i,c[11]=r,c[12]=o):o=c[12],o}try{eS.displayName||(eS.displayName="CanvasHeader")}catch{}let ew={compactNode:"CompactNode-module__compactNode--F_pSG",dark:"CompactNode-module__dark--tCgC0",active:"CompactNode-module__active--XEnzK",validationErrorWrapper:"CompactNode-module__validationErrorWrapper--EsSMr",title:"CompactNode-module__title--qrnqG",indicatorDot:"CompactNode-module__indicatorDot--EhKst",topDot:"CompactNode-module__topDot--y0RZw",completed:"CompactNode-module__completed--UhZag",bottomDot:"CompactNode-module__bottomDot--MLm5c",error:"CompactNode-module__error--HEiZ7",indicatorShadowWrapper:"CompactNode-module__indicatorShadowWrapper--UlVUX",indicatorShadow:"CompactNode-module__indicatorShadow--d58PY"},eE={iconContainer:"NodeType-module__iconContainer--cGYME",labelContainer:"NodeType-module__labelContainer--wSFPu",auburn:"NodeType-module__auburn--CbLyN",fgColor:"NodeType-module__fgColor--ZY0uq",bgColor:"NodeType-module__bgColor--zbgzb",blue:"NodeType-module__blue--C4XaG",brown:"NodeType-module__brown--g3pal",coral:"NodeType-module__coral--tYT29",cyan:"NodeType-module__cyan--dyLBa",gray:"NodeType-module__gray--owotq",green:"NodeType-module__green--GbPqF",indigo:"NodeType-module__indigo--kwM0L",lemon:"NodeType-module__lemon--wdfmH",lime:"NodeType-module__lime--uOq6Q",olive:"NodeType-module__olive--uMhT5",orange:"NodeType-module__orange--JNL1G",pine:"NodeType-module__pine--INiZK",pink:"NodeType-module__pink--qtppC",plum:"NodeType-module__plum--ZAP9S",purple:"NodeType-module__purple--slAj5",red:"NodeType-module__red--StjpA",teal:"NodeType-module__teal--DESFD",yellow:"NodeType-module__yellow--VVZrz"};function eT(e){let t,n,a,i,r;let o=(0,l.c)(14),{node:c,size:u,type:m}=e,p=void 0===u?"medium":u,h=x[m],f=h.color;o[0]!==h||o[1]!==c?(t=h.icon(c),o[0]=h,o[1]=c,o[2]=t):t=o[2];let g=t,y="small"===p?10:"large"===p?24:16;o[3]!==y?(n={height:y,width:y},o[3]=y,o[4]=n):n=o[4];let v=f&&eE[f];return o[5]!==v?(a=(0,d.$)(v,eE.fgColor),o[5]=v,o[6]=a):a=o[6],o[7]!==g||o[8]!==y||o[9]!==a?(i=(0,s.jsx)(g,{size:y,className:a}),o[7]=g,o[8]=y,o[9]=a,o[10]=i):i=o[10],o[11]!==n||o[12]!==i?(r=(0,s.jsx)("div",{className:eE.iconContainer,style:n,children:i}),o[11]=n,o[12]=i,o[13]=r):r=o[13],r}function ek(e){let t,n,a;let i=(0,l.c)(8),{node:r,type:o}=e,c=x[o],u=c?.color;i[0]!==c||i[1]!==r?(t=c?.label(r),i[0]=c,i[1]=r,i[2]=t):t=i[2];let m=t,p=u&&eE[u];return i[3]!==p?(n=(0,d.$)(eE.labelContainer,eE.fgColor,eE.bgColor,p),i[3]=p,i[4]=n):n=i[4],i[5]!==m||i[6]!==n?(a=(0,s.jsx)("div",{className:n,children:m}),i[5]=m,i[6]=n,i[7]=a):a=i[7],a}try{eT.displayName||(eT.displayName="NodeType")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}try{ek.displayName||(ek.displayName="NodeLabel")}catch{}var eA=n(63867);let eP=e=>{let t,n;let a=(0,l.c)(5),{status:i}=e,r="COMPLETED"===i&&ew.completed,o="ERROR"===i&&ew.error;return a[0]!==r||a[1]!==o?(t=(0,d.$)(ew.indicatorDot,ew.topDot,r,o),a[0]=r,a[1]=o,a[2]=t):t=a[2],a[3]!==t?(n=(0,s.jsx)("div",{className:t}),a[3]=t,a[4]=n):n=a[4],n},eL=e=>{let t,n,a;let i=(0,l.c)(6),{status:r}=e,o="COMPLETED"===r&&ew.completed,c="ERROR"===r&&ew.error;return i[0]!==o||i[1]!==c?(t=(0,d.$)(ew.indicatorDot,ew.bottomDot,o,c),i[0]=o,i[1]=c,i[2]=t):t=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)("div",{className:ew.indicatorShadowWrapper,children:(0,s.jsx)("div",{className:ew.indicatorShadow})}),i[3]=n):n=i[3],i[4]!==t?(a=(0,s.jsx)("div",{className:t,children:n}),i[4]=t,i[5]=a):a=i[5],a};function eD(e){let t,n,a,i,r,o,c,u,m;let p=(0,l.c)(30),{nodeId:h,pipelineId:f,className:g,hasPredecessors:y,hasSuccessors:v,title:x,type:_}=e,C=W(K(h)),j=X(h),b=(0,Y.DP)();p[0]!==h?(t=e=>K(h)(e)?.title,p[0]=h,p[1]=t):t=p[1];let N=W(t),I=x||N,S=W(e=>K(h)(e)?.type??"text"),w=_||S;p[2]!==h?(n=e=>e.uiState.focusedNodeId===h,p[2]=h,p[3]=n):n=p[3];let E=W(n),T=W(({executionState:e,pipelineState:t})=>{if(!h)return"IDLE";let n=e.nodes[h]?.running||!1,a=e.nodes[h]?.value&&!e.nodes[h]?.running&&!t.validationErrors.some(e=>e.involvedNodes.includes(h));return e.nodes[h]?.error||t.validationErrors.some(e=>e.involvedNodes.includes(h))?"ERROR":n?"PROCESSING":a?"COMPLETED":"IDLE"}),k=`node-card-${f}-${h}`,A=E?ew.active:null,P=b.colorScheme?.includes("dark")||b.colorScheme?.includes("night")?ew.dark:"";return p[4]!==g||p[5]!==A||p[6]!==P?(a=(0,d.$)(ew.compactNode,g,A,P),p[4]=g,p[5]=A,p[6]=P,p[7]=a):a=p[7],p[8]!==y||p[9]!==T?(i=y&&(0,s.jsx)(eP,{status:T}),p[8]=y,p[9]=T,p[10]=i):i=p[10],p[11]!==v||p[12]!==T?(r=v&&(0,s.jsx)(eL,{status:T}),p[11]=v,p[12]=T,p[13]=r):r=p[13],p[14]!==w||p[15]!==j||p[16]!==C?(o=j?(0,s.jsx)(eA.A,{size:"small"}):(0,s.jsx)(eT,{type:w,size:"medium",node:C}),p[14]=w,p[15]=j,p[16]=C,p[17]=o):o=p[17],p[18]!==I?(c=(0,s.jsx)("p",{className:ew.title,children:I}),p[18]=I,p[19]=c):c=p[19],p[20]!==h?(u=(0,s.jsx)(eR,{nodeId:h}),p[20]=h,p[21]=u):u=p[21],p[22]!==c||p[23]!==u||p[24]!==k||p[25]!==a||p[26]!==i||p[27]!==r||p[28]!==o?(m=(0,s.jsxs)("div",{id:k,className:a,children:[i,r,o,c,u]}),p[22]=c,p[23]=u,p[24]=k,p[25]=a,p[26]=i,p[27]=r,p[28]=o,p[29]=m):m=p[29],m}function eR(e){let t;let n=(0,l.c)(1),{nodeId:a}=e;return W(e=>!!e.pipelineState.validationErrors.find(e=>!a||e.involvedNodes.includes(a)))?(n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:ew.validationErrorWrapper,children:(0,s.jsx)(eb,{})}),n[0]=t):t=n[0],t):null}try{eP.displayName||(eP.displayName="InputIndicator")}catch{}try{eL.displayName||(eL.displayName="OutputIndicator")}catch{}try{eD.displayName||(eD.displayName="CompactNode")}catch{}try{eR.displayName||(eR.displayName="ValidationErrorsIndicator")}catch{}let eO="#1f6feb";function eM(){let e=function(){let e=W(e=>G(e)?.nodes?.map(e=>e.id)?.join("|"));return e?.split("|")??[]}(),t=Z(),n=I(t),[a,i]=(0,c.useState)(null),[r,o]=(0,c.useState)(!1),l=(0,c.useRef)(!0),d=q(),u=W(e=>e.uiState.focusedNodeId),m=e=>{d({type:"FOCUS_NODE",nodeId:e===u?null:e})},{layout:p,pipelineDimensions:h,edges:v}=function(){let e=Z(),t=(0,g.xp)().id(e=>e.id).parentIds(e=>e.parentIds),n=new Set(e.nodes.map(e=>e.id)),a=e.nodes.map(e=>({id:e.id,parentIds:Array.from(new Set([...S(e)].map(w))).map(e=>n.has(e)?e:"")})),i={},r=[];try{let e=t(a),{width:n,height:o}=(0,g.Hz)().nodeSize([250,120]).layering((0,g.AH)()).decross((0,g.X9)().order((0,g.Ys)().base((0,g.n0)()))).gap([10,10])(e);for(let t of e.nodes())t.data.id&&(i[t.data.id]={x:t.x,y:t.y});let s=e=>{if(e.length<2)return"";let[t,n]=e[0]||[0,0],[a,i]=e[e.length-1]||[0,0],r=a-t,o=Math.abs(r);if(o<10)return`M ${t},${n} L ${a},${i}`;let s=(n+i)/2,l=r>0?1:-1;return`
        M ${t},${n}
        L ${t},${s-12}
        A 12,12 0 0 ${l>0?0:1} ${t+12*l},${s}
        L ${t+l*(12+(o-24))},${s}
        A 12,12 0 0 ${l>0?1:0} ${a},${s+12}
        L ${a},${i}
      `.trim().replace(/\s+/g," ")};for(let{points:t,source:n,target:a}of e.links()){let e=s(t);r.push({path:e,points:t.map(([e,t])=>({x:e,y:t})),source:n.data.id||"",target:a.data.id||""})}return{layout:i,edges:r,pipelineDimensions:{width:n,height:o}}}catch{return function(e){let t={},n={width:eB.width,height:e.length*eB.height};for(let n=0;n<e.length;++n)t[e[n]]={x:eB.width/2,y:n*eB.height};return{layout:t,edges:[],pipelineDimensions:n}}(e.nodes.map(e=>e.id))}}(),x=(0,c.useRef)(null),_=()=>d({type:"FOCUS_NODE",nodeId:null}),C=(0,c.useCallback)(({duration:e=500})=>{if(!a||!x.current)return;let t=a.getBoundingClientRect(),n=t.width,i=t.height,r=Math.max(...Object.values(p).map(e=>e.x))+100,o=Math.max(...Object.values(p).map(e=>e.y))+25,s=f.GSI.translate(n/2-r/2,i/2-o/2).scale(1);(0,f.Ltv)(a).transition().duration(e).ease(f.xA2).call(x.current.transform,s)},[a]),j=(0,c.useCallback)(e=>{if(e){i(e);let t=(0,f.Ltv)(e),n=e=>{(0,f.Ltv)("#dot-pattern").attr("x",e.transform.x).attr("y",e.transform.y).attr("width",25*e.transform.k).attr("height",25*e.transform.k).select("rect").attr("x",25*e.transform.k/2-1).attr("y",25*e.transform.k/2-1).attr("opacity",Math.min(e.transform.k,1))},a=null,r=!1,o=(0,f.s_O)().scaleExtent([1,1]).interpolate(f.GWP).on("start",e=>{a=e.transform,r=!1}).on("zoom",e=>{if(!a)return;let t=e.transform.x-a.x,i=e.transform.y-a.y,o=Math.sqrt(t*t+i*i);(r||!(o<5))&&(r=!0,(0,f.Ltv)("#edges-group").attr("transform",e.transform),(0,f.Ltv)("#nodes-overlay").style("transform-origin","0 0").style("transform",`translate(${e.transform.x}px, ${e.transform.y}px) scale(${e.transform.k})`),n(e))});x.current=o,t.call(o),C({duration:0})}},[C]);return(0,c.useEffect)(()=>{if(r||!u||!a||!x.current)return;let e=p[u];if(!e)return;o(!0);let t=a.getBoundingClientRect(),n=t.width,i=t.height,s=n/2-e.x,c=i/2-e.y,d=f.GSI.translate(s,c).scale(1);!0===l.current?((0,f.Ltv)(a).call(x.current.transform,d),l.current=!1):(0,f.Ltv)(a).transition().duration(500).ease(f.xA2).call(x.current.transform,d),o(!1)},[u,r,a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eS,{centerNodeCanvas:C}),(0,s.jsx)("div",{className:y.canvasContainer,ref:j,children:(0,s.jsxs)("div",{className:y.canvasGraph,onClick:_,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),_())},children:[(0,s.jsxs)("svg",{"aria-label":"Diagram",className:y.diagram,children:[(0,s.jsxs)("defs",{children:[(0,s.jsx)("pattern",{id:"dot-pattern",patternUnits:"userSpaceOnUse",x:"0",y:"0",width:25,height:25,children:(0,s.jsx)("rect",{x:11.5,y:11.5,rx:"50%",ry:"50%",width:2,height:2,className:y.gridPattern})}),(0,s.jsxs)("linearGradient",{id:"lineGradient",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.4"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0.4"})]}),(0,s.jsxs)("linearGradient",{id:"dotGradient",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.8"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0.8"})]}),(0,s.jsxs)("linearGradient",{id:"activeEdgeGradient",gradientUnits:"userSpaceOnUse",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{stopColor:eO,stopOpacity:"0.5"}),(0,s.jsx)("stop",{stopColor:eO}),(0,s.jsx)("stop",{offset:"32.5%",stopColor:eO}),(0,s.jsx)("stop",{offset:"100%",stopColor:eO,stopOpacity:"0.5"})]})]}),(0,s.jsx)("rect",{fill:"url(#dot-pattern)",width:"100%",height:"100%"}),0!==h.width&&(0,s.jsx)("g",{id:"edges-group",children:v.map(e=>(0,s.jsx)(ee,{path:e.path,source:e.source,target:e.target},`${e.source}-${e.target}`))})]}),(0,s.jsx)("div",{id:"nodes-overlay",className:y.nodesOverlay,children:e.map(e=>(0,s.jsx)("div",{role:"button",tabIndex:0,className:y.nodeWrapper,style:{left:(p[e]?.x??0)-100,top:(p[e]?.y??0)-25},onClick:t=>{t.stopPropagation(),m(e)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.stopPropagation(),m(e))},children:(0,s.jsx)(eD,{pipelineId:t.id,nodeId:e,hasPredecessors:n.edges.some(t=>t.to===e),hasSuccessors:n.edges.some(t=>t.from===e)})},e))})]})})]})}let eB={width:200,height:100};try{eM.displayName||(eM.displayName="Canvas")}catch{}try{(o=D3layout).displayName||(o.displayName="D3layout")}catch{}var eF=n(53526),eU=n(7426);function e$({onDelete:e,onCopyLoop:t,loopsService:n,threadId:a,variant:i="invisible"}){let[r,o]=(0,c.useState)(null),[l,d]=(0,c.useState)(!1),{threads:u}=(0,h.Pk)(),f=(0,eU.b)(),g=(0,c.useRef)(null),y=()=>{o(null)},v=async()=>{if(a){d(!0),o(null);try{let t=[],i=u.get(a);i&&t.push(f.service.deleteThread(a)),t.push(n.deletePipeline(a)),await Promise.all(t),e?.(),i&&f.dispatch({type:"DELETE_THREAD",thread:i})}finally{d(!1)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(er.W,{anchorRef:g,children:[(0,s.jsx)(er.W.Anchor,{children:(0,s.jsx)(m.K,{loading:l,icon:p.KebabHorizontalIcon,"aria-label":"Manage loop",variant:i})}),(0,s.jsx)(er.W.Overlay,{align:"end",children:(0,s.jsxs)(ei.l,{children:[t&&(0,s.jsxs)(ei.l.Item,{onSelect:t,children:[(0,s.jsx)(ei.l.LeadingVisual,{children:(0,s.jsx)(p.CopyIcon,{})}),"Copy Loop"]}),(0,s.jsxs)(ei.l.Item,{variant:"danger",onSelect:()=>{o("delete")},children:[(0,s.jsx)(ei.l.LeadingVisual,{children:(0,s.jsx)(p.TrashIcon,{})}),"Delete"]})]})})]}),"delete"===r&&(0,s.jsx)(eF.K,{title:"Delete loop",onClose:e=>{"confirm"===e?v():y()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."})]})}try{e$.displayName||(e$.displayName="LoopsActionMenu")}catch{}var eV=n(47767);let ez={container:"Header-module__container--VnJT1",left:"Header-module__left--StOkC",title:"Header-module__title--v_2KB"};var eW=n(82610);let eH="loops",eq="loops",eG="loop",eK=`${eW.Jz}/loops`;function eQ(){let e,t,n,a,i,r,o,c;let d=(0,l.c)(22),u=(0,eV.Zp)(),f=e_(),g=(0,eU.b)(),y=(0,h.Pk)();d[0]!==g||d[1]!==y?(e=g.getSelectedThread(y),d[0]=g,d[1]=y,d[2]=e):e=d[2];let v=e,x=W(G),_=x?.title;d[3]!==u?(t=()=>{u(eK)},d[3]=u,d[4]=t):t=d[4];let C=t;d[5]!==x?(n=()=>{if(!x)return;let e=JSON.stringify({title:x.title,description:x.description,nodes:x.nodes},null,2);navigator.clipboard.writeText(e)},d[5]=x,d[6]=n):n=d[6];let j=n;d[7]!==C?(a=(0,s.jsx)(m.K,{"aria-label":"Close workbench",icon:p.XIcon,onClick:C,variant:"invisible"}),d[7]=C,d[8]=a):a=d[8],d[9]!==_?(i=(0,s.jsx)("div",{className:ez.title,children:_}),d[9]=_,d[10]=i):i=d[10],d[11]!==a||d[12]!==i?(r=(0,s.jsxs)("div",{className:ez.left,children:[a,i]}),d[11]=a,d[12]=i,d[13]=r):r=d[13];let b=v?.id;return d[14]!==C||d[15]!==j||d[16]!==f||d[17]!==b?(o=(0,s.jsx)(e$,{loopsService:f,onDelete:C,onCopyLoop:j,threadId:b,variant:"default"}),d[14]=C,d[15]=j,d[16]=f,d[17]=b,d[18]=o):o=d[18],d[19]!==r||d[20]!==o?(c=(0,s.jsxs)("div",{className:ez.container,children:[r,o]}),d[19]=r,d[20]=o,d[21]=c):c=d[21],c}try{eQ.displayName||(eQ.displayName="Header")}catch{}let eZ={container:"Layout-module__container--dG4dp",header:"Layout-module__header--C4lDt",main:"Layout-module__main--nK86t",panelToggleButton:"Layout-module__panelToggleButton--SAcdA",panel:"Layout-module__panel--AXPkf",scrollContainer:"Layout-module__scrollContainer--Pqw64",backdrop:"Layout-module__backdrop--LL3Sk",visible:"Layout-module__visible--n1Y2Z",canvas:"Layout-module__canvas--o3ayZ",placeholder:"Layout-module__placeholder--auzUi",placeholderNode:"Layout-module__placeholderNode--psu4z",placeholderText:"Layout-module__placeholderText--qaws6"};var eX=n(25289),eJ=n(43956);let eY={animatedListContainer:"AnimatedList-module__animatedListContainer--zT8Eg",animatedListItem:"AnimatedList-module__animatedListItem--O1ti0"};function e0(e){let t,n,a,i,r;let o=(0,l.c)(10),{children:c,indexFromEnd:d}=e,u=1-.15*d,m=1-.2*d,p=10-10*d;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:.5,scale:1.05,top:20,filter:"blur(1px)"},o[0]=t):t=o[0],o[1]!==p||o[2]!==m||o[3]!==u?(n={opacity:m,scale:u,top:p,filter:"blur(0px)"},o[1]=p,o[2]=m,o[3]=u,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0,scale:.5,top:-20,filter:"blur(1px)"},i={type:"spring",stiffness:280,damping:60},o[5]=a,o[6]=i):(a=o[5],i=o[6]),o[7]!==c||o[8]!==n?(r=(0,s.jsx)(eX.P.div,{layout:!0,initial:t,animate:n,exit:a,transition:i,className:eY.animatedListItem,children:c}),o[7]=c,o[8]=n,o[9]=r):r=o[9],r}let e1=c.memo(e=>{let t,n,a,i,r,o,u,m,p,h,f,g,y;let v=(0,l.c)(35);v[0]!==e?({children:t,className:n,delay:i,maxVisible:r,...a}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=a,v[4]=i,v[5]=r):(t=v[1],n=v[2],a=v[3],i=v[4],r=v[5]);let x=void 0===i?3e3:i,_=void 0===r?2:r;v[6]!==t?(o=Array.isArray(t)?t:[t],v[6]=t,v[7]=o):o=v[7];let C=o;v[8]===Symbol.for("react.memo_cache_sentinel")?(u=[],v[8]=u):u=v[8];let[j,b]=(0,c.useState)(u),[N,I]=(0,c.useState)(0);if(v[9]!==C||v[10]!==x||v[11]!==_||v[12]!==N||v[13]!==j.length?(m=()=>{let e=setTimeout(()=>{b(e=>{let t=[...e,C[N]];return t.length>_&&t.shift(),t}),I(e=>(e+1)%C.length)},0===j.length?Math.min(x,300):x);return()=>clearTimeout(e)},v[9]=C,v[10]=x,v[11]=_,v[12]=N,v[13]=j.length,v[14]=m):m=v[14],v[15]!==C||v[16]!==x||v[17]!==_||v[18]!==N||v[19]!==j?(p=[j,N,C,x,_],v[15]=C,v[16]=x,v[17]=_,v[18]=N,v[19]=j,v[20]=p):p=v[20],(0,c.useEffect)(m,p),v[21]!==n?(h=(0,d.$)(eY.animatedListContainer,n),v[21]=n,v[22]=h):h=v[22],v[23]!==N||v[24]!==j){let e;v[26]!==N||v[27]!==j.length?(e=(e,t)=>(0,s.jsx)(e0,{indexFromEnd:j.length-1-t,children:e},e.key??`${t}-${N}`),v[26]=N,v[27]=j.length,v[28]=e):e=v[28],f=j.map(e),v[23]=N,v[24]=j,v[25]=f}else f=v[25];return v[29]!==f?(g=(0,s.jsx)(eJ.N,{children:f}),v[29]=f,v[30]=g):g=v[30],v[31]!==a||v[32]!==g||v[33]!==h?(y=(0,s.jsx)("div",{className:h,...a,children:g}),v[31]=a,v[32]=g,v[33]=h,v[34]=y):y=v[34],y});e1.displayName="AnimatedList";try{e0.displayName||(e0.displayName="AnimatedListItem")}catch{}let e2=[{title:"Training the model...",type:"prompt"},{title:"Parsing your prompts...",type:"prompt"},{title:"Predicting next step...",type:"prompt"},{title:"Tokenizing thoughts...",type:"text"},{title:"Analyzing semantics...",type:"code"},{title:"Dreaming in code...",type:"code"},{title:"Activating neural nets...",type:"text"},{title:"Aligning intents...",type:"prompt"},{title:"Expanding vocabulary...",type:"text"},{title:"Crafting solutions...",type:"code"},{title:"Exploring possibilities...",type:"prompt"},{title:"Synthesizing context...",type:"text"},{title:"Optimizing creativity...",type:"text"},{title:"Chatting with AI...",type:"prompt"},{title:"Thinking in tokens...",type:"prompt"},{title:"Generating new ideas...",type:"text"}],e5=()=>{let e,t,n,a;let i=(0,l.c)(7),r=W(e4),o=r&&r.length>0?r:e2;return i[0]!==o?(e=Array.from({length:4},()=>o).flat().map(e6),i[0]=o,i[1]=e):e=i[1],i[2]!==e?(t=(0,s.jsx)(e1,{maxVisible:3,delay:3e3,children:e}),i[2]=e,i[3]=t):t=i[3],i[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)("span",{className:eZ.placeholderText,children:"Updating your loop..."}),i[4]=n):n=i[4],i[5]!==t?(a=(0,s.jsxs)("div",{className:eZ.placeholder,children:[t,n]}),i[5]=t,i[6]=a):a=i[6],a};try{e5.displayName||(e5.displayName="LoopPlaceholder")}catch{}function e3(e){return{title:e.title,type:e.type}}function e4(e){return G(e)?.nodes?.map(e3)??[]}function e6(e,t){return(0,s.jsx)(eD,{title:e.title,type:e.type,nodeId:`node-${t}`,className:eZ.placeholderNode,pipelineId:"default-pipeline"},`node-${e.title}-${t}`)}var e7=n(23976);let e9={container:"CompactNodePanel-module__container--TlevF",panelEmptyState:"CompactNodePanel-module__panelEmptyState--cb0p0",header:"CompactNodePanel-module__header--jUGrb",nodeDetails:"CompactNodePanel-module__nodeDetails--zmcQh",nodeTitleContainer:"CompactNodePanel-module__nodeTitleContainer--DHuox",nodeTitleText:"CompactNodePanel-module__nodeTitleText--To3al",descriptionText:"CompactNodePanel-module__descriptionText--CEsjF",nodeActions:"CompactNodePanel-module__nodeActions--aHenk",content:"CompactNodePanel-module__content--AOGbt",input:"CompactNodePanel-module__input--ULaU6",outputContainer:"CompactNodePanel-module__outputContainer--JqWB5",output:"CompactNodePanel-module__output--UUCOs",loading:"CompactNodePanel-module__loading--POtFp",groupTitle:"CompactNodePanel-module__groupTitle--gIXAp",emptyState:"CompactNodePanel-module__emptyState--DZLgm",emptyStateText:"CompactNodePanel-module__emptyStateText--zI1Sm"},e8={container:"NodeContent-module__container--qn3bd",groupTitle:"NodeContent-module__groupTitle--girTe",nodeModel:"NodeContent-module__nodeModel--UsoDt",nodeInput:"NodeContent-module__nodeInput--GBlR4",header:"NodeContent-module__header--_rrGW",actions:"NodeContent-module__actions--BL58w"};var te=n(42252),tt=n(80938);let tn=(0,c.createContext)(null);function ta(e){let t,n,a;let i=(0,l.c)(6),{availableModels:r,sendChatMessage:o,children:c}=e;return i[0]!==r||i[1]!==o?(n={availableModels:r,sendChatMessage:o},i[0]=r,i[1]=o,i[2]=n):n=i[2],t=n,i[3]!==c||i[4]!==t?(a=(0,s.jsx)(tn.Provider,{value:t,children:c}),i[3]=c,i[4]=t,i[5]=a):a=i[5],a}function ti(){let e=(0,c.useContext)(tn);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{tn.displayName||(tn.displayName="AppContext")}catch{}try{ta.displayName||(ta.displayName="AppContextProvider")}catch{}function tr(e){let t,n,a;let i=(0,l.c)(9),{onUpdateModel:r,selectedModelName:o}=e,{availableModels:c}=ti();i[0]!==c||i[1]!==o?(t=c?.find(e=>e.id===o),i[0]=c,i[1]=o,i[2]=t):t=i[2];let d=t;i[3]!==r?(n=e=>{r(e.id)},i[3]=r,i[4]=n):n=i[4];let u=n;return c&&d?(i[5]!==c||i[6]!==u||i[7]!==d?(a=(0,s.jsx)(tt.k,{models:c,selectedModel:d,onModelPicked:u,disabled:!1,type:"global",variant:"default"}),i[5]=c,i[6]=u,i[7]=d,i[8]=a):a=i[8],a):null}try{tr.displayName||(tr.displayName="ModelPicker")}catch{}var to=n(27297),ts=n(34225);let tl={container:"ContentEditor-module__container--nk6da",cmContainer:"ContentEditor-module__cmContainer--vMg4R"},tc=n(24774).Lz.theme({".cm-content":{fontSize:"var(--text-body-size-small, 12px) !important",lineHeight:"18px !important"},".cm-gutterElement":{fontSize:"var(--text-body-size-small, 12px) !important"},".cm-scroller":{scrollbarWidth:"thin"}}),td=e=>{let t,n,a,i,r,o,c;let u=(0,l.c)(18),{className:m,content:p,onUpdate:h,placeholder:f,extensions:g,inputLabelId:y}=e,v=void 0===f?"Enter a prompt":f;return u[0]!==m?(t=(0,d.$)(tl.container,m),u[0]=m,u[1]=t):t=u[1],u[2]!==g?(n=g??[],u[2]=g,u[3]=n):n=u[3],u[4]!==n?(a=[tc,...n],u[4]=n,u[5]=a):a=u[5],u[6]!==h?(i=e=>h?.(e),u[6]=h,u[7]=i):i=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(r={indentUnit:2,indentWithTabs:!1,lineWrapping:!0},u[8]=r):r=u[8],u[9]!==p||u[10]!==y||u[11]!==v||u[12]!==a||u[13]!==i?(o=(0,s.jsx)(ts.default,{ariaLabelledBy:y,containerClassName:tl.cmContainer,extensions:a,height:"100%",hideHelp:!0,onChange:i,placeholder:v,spacing:r,value:p}),u[9]=p,u[10]=y,u[11]=v,u[12]=a,u[13]=i,u[14]=o):o=u[14],u[15]!==t||u[16]!==o?(c=(0,s.jsx)("form",{className:t,children:o}),u[15]=t,u[16]=o,u[17]=c):c=u[17],c};try{td.displayName||(td.displayName="ContentEditor")}catch{}var tu=n(47404);async function tm(e,t,n){let a=e.matchBefore(/@\w*/),i=e.matchBefore(/\{\{\w*/),r=a||i;if(!r||r.from===r.to&&!e.explicit)return null;let o=t(),s=a?r.text.slice(1):r.text.slice(2),l=o.filter(e=>e.id.toLowerCase().includes(s.toLowerCase())&&e.id!==n).map(e=>({label:e.title,detail:e.id,apply:`{{${e.id}}}`,boost:1,type:"variable"}));return{from:r.from,options:l,filter:!1}}let tp=e=>{let t,n,a,i,r;let o=(0,l.c)(17),{className:c,content:d,onUpdate:u,placeholder:m,extensions:p,nodeId:h,inputLabelId:f}=e,g=void 0===m?"Enter a prompt":m,y=W(th);if(o[0]!==y?(t=()=>y,o[0]=y,o[1]=t):t=o[1],o[2]!==h||o[3]!==t){var v;v=t,n=[(0,tu.yU)({override:[async e=>tm(e,v,h)],icons:!1,defaultKeymap:!0})],o[2]=h,o[3]=t,o[4]=n}else n=o[4];let x=n;o[5]!==p?(a=p??[],o[5]=p,o[6]=a):a=o[6],o[7]!==x||o[8]!==a?(i=[...a,x],o[7]=x,o[8]=a,o[9]=i):i=o[9];let _=i;return o[10]!==_||o[11]!==c||o[12]!==d||o[13]!==f||o[14]!==u||o[15]!==g?(r=(0,s.jsx)(td,{className:c,content:d,onUpdate:u,placeholder:g,extensions:_,inputLabelId:f}),o[10]=_,o[11]=c,o[12]=d,o[13]=f,o[14]=u,o[15]=g,o[16]=r):r=o[16],r};try{tp.displayName||(tp.displayName="ContentEditorWithAutocomplete")}catch{}function th(e){return G(e)?.nodes??[]}let tf=({className:e,content:t,onUpdate:a,nodeId:i,inputLabelId:r})=>{let[o,l]=(0,c.useState)();return(0,c.useEffect)(()=>{(async()=>{let{graphql:e}=await Promise.all([n.e("vendors-node_modules_vscode-languageserver-types_lib_esm_main_js"),n.e("vendors-node_modules_codemirror_lint_dist_index_js"),n.e("vendors-node_modules_cm6-graphql_dist_index_js")]).then(n.bind(n,1904));l([(0,tu.yU)(),e()])})()},[]),(0,s.jsx)(tp,{className:e,content:t,extensions:o,inputLabelId:r,nodeId:i,onUpdate:a,placeholder:"Enter a GraphQL query"})};try{tf.displayName||(tf.displayName="GraphQLContentEditor")}catch{}var tg=n(65607),ty=n(24743);let tv={rangeValue:"NodeInput-module__rangeValue--N8Vt0",rangeContainer:"NodeInput-module__rangeContainer--cMtak",rangeLabels:"NodeInput-module__rangeLabels--KRuZe",rangeLabel:"NodeInput-module__rangeLabel--nMNnh",booleanContainer:"NodeInput-module__booleanContainer--XU8yP",fileContainer:"NodeInput-module__fileContainer--tHfkd"};function tx(e){let t=(0,l.c)(51),{content:n,nodeId:a,onChange:i,className:r,inputLabelId:o}=e,c=W(K(a));if(!c||"text"!==c.type)return null;switch(c.inputType.type){case"range":{let e,a,o,l,d,u,m;t[0]!==n?(e=(0,s.jsx)("div",{className:tv.rangeValue,children:n}),t[0]=n,t[1]=e):e=t[1];let p=n||"0";return t[2]!==i?(a=e=>i(e.target.value),t[2]=i,t[3]=a):a=t[3],t[4]!==r||t[5]!==c.inputType.max||t[6]!==c.inputType.min||t[7]!==p||t[8]!==a?(o=(0,s.jsx)("div",{className:tv.rangeContainer,children:(0,s.jsx)("input",{type:"range",value:p,min:c.inputType.min,max:c.inputType.max,onChange:a,className:r})}),t[4]=r,t[5]=c.inputType.max,t[6]=c.inputType.min,t[7]=p,t[8]=a,t[9]=o):o=t[9],t[10]!==c.inputType.min?(l=(0,s.jsx)("div",{className:tv.rangeLabel,children:c.inputType.min}),t[10]=c.inputType.min,t[11]=l):l=t[11],t[12]!==c.inputType.max?(d=(0,s.jsx)("div",{className:tv.rangeLabel,children:c.inputType.max}),t[12]=c.inputType.max,t[13]=d):d=t[13],t[14]!==l||t[15]!==d?(u=(0,s.jsxs)("div",{className:tv.rangeLabels,children:[l,d]}),t[14]=l,t[15]=d,t[16]=u):u=t[16],t[17]!==e||t[18]!==o||t[19]!==u?(m=(0,s.jsxs)("div",{children:[e,o,u]}),t[17]=e,t[18]=o,t[19]=u,t[20]=m):m=t[20],m}case"boolean":{let e,a;let o="true"===n;return t[21]!==i?(e=e=>i(e.target.checked.toString()),t[21]=i,t[22]=e):e=t[22],t[23]!==r||t[24]!==o||t[25]!==e?(a=(0,s.jsx)("div",{className:tv.booleanContainer,children:(0,s.jsx)(tg.A,{checked:o,onChange:e,className:r})}),t[23]=r,t[24]=o,t[25]=e,t[26]=a):a=t[26],a}case"select":{let e,a,o;return t[27]!==i?(e=e=>i(e.target.value),t[27]=i,t[28]=e):e=t[28],t[29]!==c.inputType.options?(a=c.inputType.options?.map(t_),t[29]=c.inputType.options,t[30]=a):a=t[30],t[31]!==r||t[32]!==n||t[33]!==e||t[34]!==a?(o=(0,s.jsx)("div",{children:(0,s.jsx)(ty.A,{value:n,onChange:e,className:r,children:a})}),t[31]=r,t[32]=n,t[33]=e,t[34]=a,t[35]=o):o=t[35],o}case"file":{let e,a,o,l;return t[36]!==c.inputType.fileType?(e=function(e){switch(e){case"pdf":return".pdf";case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"document":return".doc,.docx,.txt,.rtf";case"code":return".js,.jsx,.ts,.tsx,.py,.java,.cpp,.c,.h,.cs";default:return"*/*"}}(c.inputType.fileType),t[36]=c.inputType.fileType,t[37]=e):e=t[37],t[38]!==i?(a=e=>{let t=e.target.files?.[0];t&&i(t.name)},t[38]=i,t[39]=a):a=t[39],t[40]!==r?(o=(0,d.$)(r,tv.fileContainer),t[40]=r,t[41]=o):o=t[41],t[42]!==n||t[43]!==e||t[44]!==a||t[45]!==o?(l=(0,s.jsx)("div",{children:(0,s.jsx)(en.A,{type:"file",value:n,accept:e,onChange:a,className:o})}),t[42]=n,t[43]=e,t[44]=a,t[45]=o,t[46]=l):l=t[46],l}default:{let e;return t[47]!==n||t[48]!==o||t[49]!==i?(e=(0,s.jsx)(td,{content:n,inputLabelId:o,onUpdate:i,placeholder:"Enter a value"}),t[47]=n,t[48]=o,t[49]=i,t[50]=e):e=t[50],e}}}function t_(e){return(0,s.jsx)(ty.A.Option,{value:e,children:e},e)}try{tx.displayName||(tx.displayName="NodeInput")}catch{}var tC=n(26514);function tj(e){let t,n,a,i,r,o,c,d,u;let m=(0,l.c)(26),{additionalFields:h,content:f,contentEditor:g,children:y,inputLabelId:v,inactive:x,onUndo:_,onSave:C}=e;return m[0]!==v?(t=(0,s.jsx)("div",{className:e8.groupTitle,id:v,children:"Input"}),m[0]=v,m[1]=t):t=m[1],m[2]!==f?(n=f?f.toString():"",m[2]=f,m[3]=n):n=m[3],m[4]!==n?(a=(0,s.jsx)(tC.T,{icon:p.CopyIcon,variant:"invisible",ariaLabel:"Copy input",textToCopy:n}),m[4]=n,m[5]=a):a=m[5],m[6]!==t||m[7]!==a?(i=(0,s.jsxs)("div",{className:e8.header,children:[t,a]}),m[6]=t,m[7]=a,m[8]=i):i=m[8],m[9]!==x||m[10]!==_?(r=(0,s.jsx)(ea.Q,{inactive:x,onClick:_,children:"Undo"}),m[9]=x,m[10]=_,m[11]=r):r=m[11],m[12]!==x||m[13]!==C?(o=(0,s.jsx)(ea.Q,{inactive:x,onClick:C,variant:"primary",children:"Save"}),m[12]=x,m[13]=C,m[14]=o):o=m[14],m[15]!==r||m[16]!==o?(c=(0,s.jsxs)("span",{className:e8.actions,children:[r,o]}),m[15]=r,m[16]=o,m[17]=c):c=m[17],m[18]!==y||m[19]!==g||m[20]!==i||m[21]!==c?(d=(0,s.jsxs)("div",{className:e8.nodeInput,children:[i,g,y,c]}),m[18]=y,m[19]=g,m[20]=i,m[21]=c,m[22]=d):d=m[22],m[23]!==h||m[24]!==d?(u=(0,s.jsxs)("div",{className:e8.container,children:[h,d]}),m[23]=h,m[24]=d,m[25]=u):u=m[25],u}try{tj.displayName||(tj.displayName="NodeContentLayout")}catch{}function tb(e){let t,n;let a=(0,l.c)(49),{nodeId:i,onUpdate:r}=e,o=(0,es.h)(),d=W(K(i)),u=W(e=>K(i)(e)?.content??""),m=(0,te.S)(u),[p,h]=(0,c.useState)(u),f=(0,c.useId)();u!==m&&u!==p&&h(u);let g=p!==u;a[0]!==g||a[1]!==u?(t=()=>{g&&h(u)},a[0]=g,a[1]=u,a[2]=t):t=a[2];let y=t;a[3]!==p||a[4]!==g||a[5]!==r?(n=()=>{g&&r({content:p})},a[3]=p,a[4]=g,a[5]=r,a[6]=n):n=a[6];let v=n;if(!d)return null;switch(d.type){case"loop":default:return null;case"github-graphql":{let e,t,n;a[7]===Symbol.for("react.memo_cache_sentinel")?(e=e=>h(e),a[7]=e):e=a[7],a[8]!==p||a[9]!==f||a[10]!==i?(t=(0,s.jsx)(tf,{content:p,inputLabelId:f,nodeId:i,onUpdate:e}),a[8]=p,a[9]=f,a[10]=i,a[11]=t):t=a[11];let r=t,o=!g;return a[12]!==p||a[13]!==r||a[14]!==v||a[15]!==y||a[16]!==f||a[17]!==o?(n=(0,s.jsx)(tj,{content:p,contentEditor:r,inactive:o,inputLabelId:f,onUndo:y,onSave:v}),a[12]=p,a[13]=r,a[14]=v,a[15]=y,a[16]=f,a[17]=o,a[18]=n):n=a[18],n}case"text":{let e,t,n;a[19]===Symbol.for("react.memo_cache_sentinel")?(e=e=>h(e),a[19]=e):e=a[19],a[20]!==p||a[21]!==f||a[22]!==i?(t=(0,s.jsx)(tx,{className:e8.nodeInput,content:p,inputLabelId:f,nodeId:i,onChange:e}),a[20]=p,a[21]=f,a[22]=i,a[23]=t):t=a[23];let r=t,o=!g;return a[24]!==p||a[25]!==r||a[26]!==v||a[27]!==y||a[28]!==f||a[29]!==o?(n=(0,s.jsx)(tj,{content:p,contentEditor:r,inactive:o,inputLabelId:f,onUndo:y,onSave:v}),a[24]=p,a[25]=r,a[26]=v,a[27]=y,a[28]=f,a[29]=o,a[30]=n):n=a[30],n}case"prompt":{let e,t,n,l,c;a[31]===Symbol.for("react.memo_cache_sentinel")?(e=(0,to.wv)(),a[31]=e):e=a[31];let u=e.id;a[32]!==o.copilot_loops_post_staff_ship_features||a[33]!==d||a[34]!==r?(t=o.copilot_loops_post_staff_ship_features?(0,s.jsxs)("div",{className:e8.nodeModel,children:[(0,s.jsx)("div",{className:e8.groupTitle,children:"Model"}),(0,s.jsx)("div",{children:(0,s.jsx)(tr,{selectedModelName:d.model??u,onUpdateModel:e=>r({...d,model:e})})})]}):null,a[32]=o.copilot_loops_post_staff_ship_features,a[33]=d,a[34]=r,a[35]=t):t=a[35];let m=t;a[36]===Symbol.for("react.memo_cache_sentinel")?(n=e=>h(e),a[36]=n):n=a[36],a[37]!==p||a[38]!==f||a[39]!==i?(l=(0,s.jsx)(tp,{content:p,onUpdate:n,nodeId:i,inputLabelId:f}),a[37]=p,a[38]=f,a[39]=i,a[40]=l):l=a[40];let x=l,_=!g;return a[41]!==m||a[42]!==p||a[43]!==x||a[44]!==v||a[45]!==y||a[46]!==f||a[47]!==_?(c=(0,s.jsx)(tj,{additionalFields:m,content:p,contentEditor:x,inactive:_,inputLabelId:f,onUndo:y,onSave:v}),a[41]=m,a[42]=p,a[43]=x,a[44]=v,a[45]=y,a[46]=f,a[47]=_,a[48]=c):c=a[48],c}}}try{tb.displayName||(tb.displayName="NodeContent")}catch{}var tN=n(35642),tI=n(55516);function tS(e){let t,n,a,i;let r=(0,l.c)(8),{nodeId:o}=e,c=(0,es.h)(),d=Z(),u=q();r[0]!==u||r[1]!==o||r[2]!==d.id?(t=()=>{u({type:"REMOVE_NODE",nodeId:o,pipelineId:d.id})},r[0]=u,r[1]=o,r[2]=d.id,r[3]=t):t=r[3];let h=t;return c.copilot_loops_post_staff_ship_features?(r[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(er.W.Anchor,{children:(0,s.jsx)(m.K,{"aria-label":"Additional actions",icon:p.KebabHorizontalIcon})}),r[4]=n):n=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(ei.l.LeadingVisual,{children:(0,s.jsx)(p.TrashIcon,{})}),r[5]=a):a=r[5],r[6]!==h?(i=(0,s.jsxs)(er.W,{children:[n,(0,s.jsx)(er.W.Overlay,{children:(0,s.jsx)(ei.l,{children:(0,s.jsxs)(ei.l.Item,{onSelect:h,variant:"danger",children:[a,"Delete"]})})})]}),r[6]=h,r[7]=i):i=r[7],i):null}try{tS.displayName||(tS.displayName="NodeContextMenu")}catch{}let tw={errorContainer:"NodeError-module__errorContainer--UPDzR",errorNotice:"NodeError-module__errorNotice--KIWMv",errorIcon:"NodeError-module__errorIcon--ALast",errorText:"NodeError-module__errorText--ywLRv",fixErrorButton:"NodeError-module__fixErrorButton--bct68"};function tE(e){let t,n,a,i,r;let o=(0,l.c)(11),{errors:c,onFixErrorClick:d,title:u}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(p.AlertIcon,{className:tw.errorIcon}),o[0]=t):t=o[0],o[1]!==u?(n=(0,s.jsxs)("div",{className:tw.errorNotice,children:[t,u]}),o[1]=u,o[2]=n):n=o[2],o[3]!==c?(a=c.map(tT),o[3]=c,o[4]=a):a=o[4],o[5]!==d?(i=(0,s.jsx)(ea.Q,{className:tw.fixErrorButton,leadingVisual:p.BeakerIcon,onClick:d,children:"Try to fix it"}),o[5]=d,o[6]=i):i=o[6],o[7]!==n||o[8]!==a||o[9]!==i?(r=(0,s.jsxs)("div",{className:tw.errorContainer,children:[n,a,i]}),o[7]=n,o[8]=a,o[9]=i,o[10]=r):r=o[10],r}function tT(e){return(0,s.jsx)("p",{className:tw.errorText,children:e},e)}try{tE.displayName||(tE.displayName="NodeError")}catch{}var tk=n(58011);let tA={outputHeader:"NodeOutput-module__outputHeader--NrD2t",outputType:"NodeOutput-module__outputType--H7w2K",nodeValue:"NodeOutput-module__nodeValue--haJEw",jsonOutput:"NodeOutput-module__jsonOutput--YkeGl",markdownOutput:"NodeOutput-module__markdownOutput--z0yEE"};var tP=n(19919);let tL={container:"CodeBlocks-module__container--HAo0t",copyContainer:"CodeBlocks-module__copyContainer--qLr5N",copyContent:"CodeBlocks-module__copyContent--WbMzw",copyButton:"CodeBlocks-module__copyButton--xRixl",immersive:"CodeBlocks-module__immersive--WOvoW",code:"CodeBlocks-module__code--fNu3l",codeContainer:"CodeBlocks-module__codeContainer--RWmQU",codeWrap:"CodeBlocks-module__codeWrap--qABxr"};var tD=n(37120),tR=n(46988);function tO(e){let t,n,a,i,r,o,u,m,p;let h=(0,l.c)(18),{children:f,code:g}=e,y=(0,c.useId)(),{chatMode:v,wrapCodeLines:x}=(0,c.useContext)(tD.F);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.$)(tL.container,tL.immersive),h[0]=t):t=h[0],h[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)(tL.copyContainer),a=(0,d.$)(tL.copyContent),h[1]=n,h[2]=a):(n=h[1],a=h[2]),h[3]!==v?(i=()=>{(0,tR.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:v})},h[3]=v,h[4]=i):i=h[4],h[5]!==g||h[6]!==i?(r=(0,s.jsx)("div",{className:n,children:(0,s.jsx)("div",{className:a,children:(0,s.jsx)(tC.T,{textToCopy:g,ariaLabel:"Copy code",className:tL.copyButton,size:"small",onCopy:i})})}),h[5]=g,h[6]=i,h[7]=r):r=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,d.$)(tL.codeContainer),h[8]=o):o=h[8];let _=x&&tL.codeWrap;return h[9]!==_?(u=(0,d.$)(_),h[9]=_,h[10]=u):u=h[10],h[11]!==f||h[12]!==u?(m=(0,s.jsx)("div",{className:o,children:(0,s.jsx)("pre",{className:tL.code,tabIndex:0,children:(0,s.jsx)("code",{className:u,children:f})})}),h[11]=f,h[12]=u,h[13]=m):m=h[13],h[14]!==y||h[15]!==r||h[16]!==m?(p=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("figure",{className:t,"aria-labelledby":y,children:[r,m]})}),h[14]=y,h[15]=r,h[16]=m,h[17]=p):p=h[17],p}try{tO.displayName||(tO.displayName="CodeBlocksForLoop")}catch{}var tM=n(47970);let tB="data-codeblock-for-loop-props",tF=(0,tP.F)(tB),tU={code:(e,t)=>{let n=(0,tP.k)(e,tB);return n?(0,s.jsx)(tO,{...n,children:e.children}):t}};function t$(e){let t,n,a,i,r,o;let c=(0,l.c)(15),{node:d,nodeValue:u}=e,m=x[d.type].outputLabel??"Markdown";c[0]!==u?(t=function e(t){return null==t?"":"string"==typeof t?t:t&&"object"==typeof t?JSON.stringify(t,null,2):Array.isArray(t)?t.map(e).join("\n"):String(t)}(u),c[0]=u,c[1]=t):t=c[1];let h=t;return(c[2]!==m?(n=(0,s.jsx)("div",{className:tA.outputType,children:m}),c[2]=m,c[3]=n):n=c[3],c[4]!==h?(a=(0,s.jsx)(tC.T,{icon:p.CopyIcon,variant:"invisible",ariaLabel:"Copy output",textToCopy:h}),c[4]=h,c[5]=a):a=c[5],c[6]!==n||c[7]!==a?(i=(0,s.jsxs)("div",{className:tA.outputHeader,children:[n,a]}),c[6]=n,c[7]=a,c[8]=i):i=c[8],c[9]!==d||c[10]!==h)?(r=(0,s.jsx)("div",{className:tA.nodeValue,children:"github-graphql"===d.type?(0,s.jsx)("pre",{className:tA.jsonOutput,children:h}):(0,s.jsx)(tk.To,{extensions:[{transformMarkdown:e=>(0,tM.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[tF]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,tM.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&tF in a.properties&&n.children.splice(t,1,a)}),reactComponents:tU}],className:tA.markdownOutput,markdown:h})}),c[9]=d,c[10]=h,c[11]=r):r=c[11],c[12]!==i||c[13]!==r?(o=(0,s.jsxs)(s.Fragment,{children:[i,r]}),c[12]=i,c[13]=r,c[14]=o):o=c[14],o}try{t$.displayName||(t$.displayName="NodeOutput")}catch{}var tV=n(13250);function tz(){let e,t;let n=(0,l.c)(3),{streamingMessage:a,isWaitingOnCopilot:i}=(0,h.Pk)(),r=a||i;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(tV.I,{icon:"node",size:32}),n[0]=e):e=n[0],n[1]!==r?(t=(0,s.jsxs)("div",{className:e9.panelEmptyState,children:[e,r?(0,s.jsx)("span",{children:"Select a node in the loop once creation has completed."}):(0,s.jsx)("span",{children:"Select a node in the loop to view and edit."})]}),n[1]=r,n[2]=t):t=n[2],t}function tW(e){let t,n,a,i,r,o,c,d,u,m,p,h,f,g,y,v,x;let _=(0,l.c)(59),{nodeId:C,pipelineId:j}=e;_[0]!==C||_[1]!==j?(t={nodeId:C,pipelineId:j},_[0]=C,_[1]=j,_[2]=t):t=_[2];let{node:b,runPipelineFromNode:N,onStop:I,onUpdate:S}=function({nodeId:e,pipelineId:t}){let n=q(),a=H(),{runPipeline:i,stopPipeline:r}=eC(),o=W(K(e)),s=k(Z()).some(t=>t.id===e),l=(0,tI.d)(e=>i(e),1e3),c=async()=>{!(a().pipelineState.validationErrors.length>0)&&o&&i(o.id)};return{isOutput:s,node:o,runPipelineFromNode:c,onUpdate:e=>{if(!o)return;let i=a().pipelineState.pipelines,r=E({...o,...e},Object.values(i));r&&(n({type:"UPDATE_NODE",pipelineId:t,nodeId:o.id,updates:{...r}}),l(o.id))},onStop:r}}(t),w=W(e=>Q(C)(e)?.error),T=W(e=>Q(C)(e)?.value??null),A=X(C),P=function(e){let t=W(t=>t.pipelineState.validationErrors.filter(t=>t.involvedNodes.includes(e)).map(e=>e.error).join("|"));return""===t?[]:t.split("|")}(C),{sendChatMessage:L}=ti();if(!b)return null;_[3]!==b.id||_[4]!==w||_[5]!==L||_[6]!==P?(n=async()=>{let e;if(P.length||w){if(P.length){let t=P.map(tH).join("\n");e=`The following errors were found in the Loop configuration:
${t}`}else e=`The following error was found when running node ${b.id}:
${w}`;L(e+=`

Fix the Loop by updating this node or other nodes upstream in the Loop.`)}},_[3]=b.id,_[4]=w,_[5]=L,_[6]=P,_[7]=n):n=_[7];let D=n;return _[8]!==b?(a=(0,s.jsx)(eT,{type:b.type,node:b}),_[8]=b,_[9]=a):a=_[9],_[10]!==b.title?(i=(0,s.jsx)("span",{className:e9.nodeTitleText,children:b.title}),_[10]=b.title,_[11]=i):i=_[11],_[12]!==b?(r=(0,s.jsx)(ek,{type:b.type,node:b}),_[12]=b,_[13]=r):r=_[13],_[14]!==a||_[15]!==i||_[16]!==r?(o=(0,s.jsxs)("div",{className:e9.nodeTitleContainer,children:[a,i,r]}),_[14]=a,_[15]=i,_[16]=r,_[17]=o):o=_[17],_[18]!==b.description?(c=(0,s.jsx)("span",{className:e9.descriptionText,children:b.description}),_[18]=b.description,_[19]=c):c=_[19],_[20]!==o||_[21]!==c?(d=(0,s.jsxs)("div",{className:e9.nodeDetails,children:[o,c]}),_[20]=o,_[21]=c,_[22]=d):d=_[22],_[23]!==A||_[24]!==b.type||_[25]!==T||_[26]!==I||_[27]!==N?(u=["prompt","code","pipeline","github-graphql"].includes(b.type)&&(0,s.jsx)(eh,{onClick:N,onStop:I,isLoading:A,value:T,variant:"default",iconOnly:!0}),_[23]=A,_[24]=b.type,_[25]=T,_[26]=I,_[27]=N,_[28]=u):u=_[28],_[29]!==C?(m=(0,s.jsx)(tS,{nodeId:C}),_[29]=C,_[30]=m):m=_[30],_[31]!==m||_[32]!==u?(p=(0,s.jsxs)("div",{className:e9.nodeActions,children:[u,m]}),_[31]=m,_[32]=u,_[33]=p):p=_[33],_[34]!==p||_[35]!==d?(h=(0,s.jsxs)("div",{className:e9.header,children:[d,p]}),_[34]=p,_[35]=d,_[36]=h):h=_[36],_[37]!==A||_[38]!==C||_[39]!==S||_[40]!==j?(f=(0,s.jsx)("div",{className:e9.input,children:(0,s.jsx)(tb,{nodeId:C,pipelineId:j,isContentVisible:!0,isCollapsed:!1,isLoading:A,onUpdate:S})}),_[37]=A,_[38]=C,_[39]=S,_[40]=j,_[41]=f):f=_[41],_[42]!==A||_[43]!==b||_[44]!==w||_[45]!==T||_[46]!==I||_[47]!==N||_[48]!==D||_[49]!==P?(g=["prompt","code","loop","github-graphql"].includes(b.type)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:e9.groupTitle,children:"Output"}),(0,s.jsx)("div",{className:e9.output,children:A&&!T?(0,s.jsx)("div",{className:e9.loading,children:(0,s.jsx)(tN.r,{lines:3})}):P.length>0?(0,s.jsx)(tE,{errors:P,onFixErrorClick:D,title:"Oops, this node is configured incorrectly"}):w?(0,s.jsx)(tE,{errors:[w],onFixErrorClick:D}):T?(0,s.jsx)(t$,{node:b,nodeValue:T}):(0,s.jsxs)("div",{className:e9.emptyState,children:[(0,s.jsx)(eh,{onClick:N,onStop:I,isLoading:A,value:T,variant:"default"}),(0,s.jsxs)("p",{className:e9.emptyStateText,children:["No output yet.",(0,s.jsx)("br",{})," Run this node to generate output."]})]})})]}),_[42]=A,_[43]=b,_[44]=w,_[45]=T,_[46]=I,_[47]=N,_[48]=D,_[49]=P,_[50]=g):g=_[50],_[51]!==g?(y=(0,s.jsx)("div",{className:e9.outputContainer,children:g}),_[51]=g,_[52]=y):y=_[52],_[53]!==f||_[54]!==y?(v=(0,s.jsxs)("div",{className:e9.content,children:[f,y]}),_[53]=f,_[54]=y,_[55]=v):v=_[55],_[56]!==h||_[57]!==v?(x=(0,s.jsxs)("div",{className:e9.container,children:[h,v]}),_[56]=h,_[57]=v,_[58]=x):x=_[58],x}function tH(e){return`- ${e}`}function tq(e){let t;let n=(0,l.c)(3),{nodeId:a,pipelineId:i}=e;return n[0]!==a||n[1]!==i?(t=a&&i?(0,s.jsx)(tW,{nodeId:a,pipelineId:i}):(0,s.jsx)(tz,{}),n[0]=a,n[1]=i,n[2]=t):t=n[2],t}try{tz.displayName||(tz.displayName="EmptyNodePanel")}catch{}try{tW.displayName||(tW.displayName="ActiveNodePanel")}catch{}try{tq.displayName||(tq.displayName="CompactNodePanel")}catch{}var tG=n(45492),tK=n(26871);let tQ={container:"ChatMessages-module__container--iorVa",scrollContainer:"ChatMessages-module__scrollContainer--CAONK",input:"ChatMessages-module__input--lZJYB"};var tZ=n(5928);function tX(e){let t,n;let a=(0,l.c)(7),{textAreaRef:i}=e,r=q(),{sendChatMessage:o}=ti(),c=(0,h.pn)(tJ);a[0]!==r||a[1]!==o?(t=async e=>{o(e),r({type:"FOCUS_NODE",nodeId:null})},a[0]=r,a[1]=o,a[2]=t):t=a[2];let d=t,u=!!c;return a[3]!==d||a[4]!==u||a[5]!==i?(n=(0,s.jsx)(tZ.V,{textAreaRef:i,onSubmit:d,placeholder:"Refine your loop",size:"large",isStreaming:u,hideAttachmentButton:!0}),a[3]=d,a[4]=u,a[5]=i,a[6]=n):n=a[6],n}function tJ(e){return e.streamingMessage}try{tX.displayName||(tX.displayName="ChatInput")}catch{}function tY(e){let t,n,a,i;let r=(0,l.c)(6),{isMobileView:o}=e,d=(0,c.useRef)(null);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(tG.B,{inputRef:d,showQuotaExceededEmptyState:!1}),r[0]=t):t=r[0],r[1]!==o?(n=(0,s.jsx)(tK.$,{disabled:o,className:tQ.scrollContainer,children:t}),r[1]=o,r[2]=n):n=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:tQ.input,children:(0,s.jsx)(tX,{textAreaRef:d})}),r[3]=a):a=r[3],r[4]!==n?(i=(0,s.jsxs)("div",{className:tQ.container,children:[n,a]}),r[4]=n,r[5]=i):i=r[5],i}try{tY.displayName||(tY.displayName="ChatMessages")}catch{}var t0=n(50781);let t1={container:"SidePanel-module__container--dHo2v",panelHeader:"SidePanel-module__panelHeader--Q5UNL",segmentedControl:"SidePanel-module__segmentedControl--ehaGC",content:"SidePanel-module__content--epJfI"};function t2(e){let t,n,a,i,r,o,d,u,m,f;let g=(0,l.c)(22),{isMobileView:y,nodeId:v,pipelineId:x}=e,{streamingMessage:_,isWaitingOnCopilot:C}=(0,h.Pk)(),j=_||C,[b,N]=(0,c.useState)("node");g[0]!==j?(t=()=>{j&&N("chat")},n=[j],g[0]=j,g[1]=t,g[2]=n):(t=g[1],n=g[2]),(0,c.useEffect)(t,n),g[3]!==v?(a=()=>{v&&N("node")},i=[v],g[3]=v,g[4]=a,g[5]=i):(a=g[4],i=g[5]),(0,c.useEffect)(a,i),g[6]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{N(0===e?"chat":"node")},g[6]=r):r=g[6];let I=r,S="chat"===b;g[7]!==S?(o=(0,s.jsx)(e7.I.Button,{selected:S,leadingIcon:p.CommentIcon,children:"Refine"}),g[7]=S,g[8]=o):o=g[8];let w="node"===b;return g[9]!==w?(d=(0,s.jsx)(e7.I.Button,{selected:w,leadingIcon:t0.GS,children:"Node"}),g[9]=w,g[10]=d):d=g[10],g[11]!==o||g[12]!==d?(u=(0,s.jsx)("div",{className:t1.panelHeader,children:(0,s.jsxs)(e7.I,{"aria-label":"Loops panel",className:t1.segmentedControl,onChange:I,children:[o,d]})}),g[11]=o,g[12]=d,g[13]=u):u=g[13],g[14]!==b||g[15]!==y||g[16]!==v||g[17]!==x?(m=(0,s.jsx)("div",{className:t1.content,children:"node"===b?(0,s.jsx)(tq,{pipelineId:x,nodeId:v},v||"empty"):(0,s.jsx)(tY,{isMobileView:y})}),g[14]=b,g[15]=y,g[16]=v,g[17]=x,g[18]=m):m=g[18],g[19]!==u||g[20]!==m?(f=(0,s.jsxs)("div",{className:t1.container,children:[u,m]}),g[19]=u,g[20]=m,g[21]=f):f=g[21],f}try{t2.displayName||(t2.displayName="SidePanel")}catch{}function t5(){let e,t,n,a,i,r,o,f,g,y,v,x;let _=(0,l.c)(34),C=W(t7),j=W(t6),b=W(t4),N=q(),[I,S]=(0,c.useState)(!1),{streamingMessage:w,isWaitingOnCopilot:E}=(0,h.Pk)(),T=w||E,[k,A]=(0,c.useState)(t3);_[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{A(window.innerWidth<1024)},_[0]=e):e=_[0],(0,u.w)(e);let P=!!j&&!!b,L=!k||I||P;_[1]!==N||_[2]!==k?(t=()=>{N({type:"FOCUS_NODE",nodeId:null}),k&&S(!1)},_[1]=N,_[2]=k,_[3]=t):t=_[3];let D=t;_[4]!==I?(n=()=>{S(!I)},_[4]=I,_[5]=n):n=_[5];let R=n;return _[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:eZ.header,children:(0,s.jsx)(eQ,{})}),_[6]=a):a=_[6],_[7]!==k||_[8]!==I||_[9]!==R?(i=k&&(0,s.jsx)(m.K,{className:eZ.panelToggleButton,onClick:R,icon:p.HistoryIcon,"aria-label":I?"Close panel":"Open panel","aria-expanded":I}),_[7]=k,_[8]=I,_[9]=R,_[10]=i):i=_[10],_[11]!==D||_[12]!==k||_[13]!==L?(r=k&&L&&(0,s.jsx)("div",{className:eZ.backdrop,onClick:D}),_[11]=D,_[12]=k,_[13]=L,_[14]=r):r=_[14],_[15]!==L?(o=(0,d.$)(eZ.panel,{[eZ.visible]:L}),_[15]=L,_[16]=o):o=_[16],_[17]!==k||_[18]!==b||_[19]!==j?(f=(0,s.jsx)("div",{className:eZ.scrollContainer,children:(0,s.jsx)(t2,{isMobileView:k,nodeId:j,pipelineId:b})}),_[17]=k,_[18]=b,_[19]=j,_[20]=f):f=_[20],_[21]!==o||_[22]!==f?(g=(0,s.jsx)("div",{className:o,children:f}),_[21]=o,_[22]=f,_[23]=g):g=_[23],_[24]!==C||_[25]!==T?(y=T?(0,s.jsx)(e5,{}):C?(0,s.jsx)(eM,{}):null,_[24]=C,_[25]=T,_[26]=y):y=_[26],_[27]!==y?(v=(0,s.jsx)("div",{className:eZ.canvas,children:y}),_[27]=y,_[28]=v):v=_[28],_[29]!==v||_[30]!==i||_[31]!==r||_[32]!==g?(x=(0,s.jsxs)("div",{className:eZ.container,children:[a,(0,s.jsxs)("div",{className:eZ.main,children:[i,r,g,v]})]}),_[29]=v,_[30]=i,_[31]=r,_[32]=g,_[33]=x):x=_[33],x}function t3(){return"undefined"!=typeof window&&window.innerWidth<1024}function t4(e){return e.pipelineState.selectedPipelineId}function t6(e){return e.uiState.focusedNodeId}function t7(e){return!!G(e)}try{t5.displayName||(t5.displayName="Layout")}catch{}let t9={container:"PipesPreviewArea-module__container--aXrRa"};function t8(e,t,n=!1){for(let a of[...t].reverse())if("assistant"===a.role||n)for(let t of a.references??[])try{if("pipe"===t.type||t.type===eG){if(ne(t)){let e={description:t.description,id:t.id,title:t.title,nodes:t.nodes,updatedAt:a.createdAt},n=T(e,[]);return{messageId:a.id,pipeline:n}}}else if("text"===t.type&&t.text){let n=JSON.parse(t.text);if(ne(n)){let t=T(n,[]);return t.id=e??n.title.replace(/\s+/g,"-").toLowerCase(),{messageId:a.id,pipeline:t}}}}catch{continue}}function ne(e){return!!e&&"object"==typeof e&&"title"in e&&"nodes"in e}function nt(e){return G(e)?.id}function nn(e){return e.executionState}let na="The following errors were found in the Loop configuration:",ni="The following errors were found while running the Loop:";function nr(e){return`- ${e.error} (Nodes ${e.involvedNodes.join(", ")})`}function no(e){return`- ${e.error} (Node ${e.nodeId})`}async function ns(){return new Promise(e=>setTimeout(e,10))}function nl(e){let t=e.messages.toReversed().filter(e=>"user"===e.role).slice(0,2);return!(t.length<2)&&(t.every(e=>e.content?.startsWith(na))||t.every(e=>e.content?.startsWith(ni)))}function nc(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function nd(e,t){var n=nc(e,t,"get");return n.get?n.get.call(e):n.value}function nu(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function nm(e,t,n){var a=nc(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var np=new WeakMap,nh=new WeakMap,nf=new WeakMap;let NodeRunner=class NodeRunner{async run(e){switch(nd(this,np).type){case"prompt":{let t=await N(nd(this,np));return nd(this,nf).getChatCompletion(t,nd(this,np).model,void 0,e)}case"github-graphql":{let t=await nd(this,nh).getGraphQLResponse(nd(this,np).content,e);return t?.data??null}default:return nd(this,np).content}}constructor(e,t,n){nu(this,np,{writable:!0,value:void 0}),nu(this,nh,{writable:!0,value:void 0}),nu(this,nf,{writable:!0,value:void 0}),nm(this,np,e),nm(this,nh,t),nm(this,nf,n)}};function ng(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function ny(e,t){var n=ng(e,t,"get");return n.get?n.get.call(e):n.value}function nv(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function nx(e,t,n){var a=ng(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var n_=new WeakMap,nC=new WeakMap,nj=new WeakMap,nb=new WeakMap,nN=new WeakMap,nI=new WeakMap,nS=new WeakMap,nw=new WeakMap;let PipelineRunner=class PipelineRunner{async run(e){let t=k(ny(this,nb));if(0===t.length)throw Error("No output node");await Promise.all(t.map(t=>this.runNodeUnlessRunning(t,e)))}stop(e){ny(this,nw).abort(),e({type:"CANCEL_EXECUTION",iteration:ny(this,nN)})}isCancelled(){return ny(this,nw).signal.aborted}async runNodeUnlessRunning(e,t){let n=ny(this,nS).get(e.id);if(n)return n;let a=this.runNode(e,t);return ny(this,nS).set(e.id,a),a}async runNode(e,t){if(this.isCancelled())return null;let n=await ny(this,n_).getExecutionState(ny(this,nb).id,ny(this,nN)),a=n?.nodes[e.id]?.value;if(a)return a;t({type:"SET_PENDING",nodeId:e.id,pending:!0,iteration:ny(this,nN)});let i=[...new Set(ny(this,nI).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>ny(this,nb).nodes.find(t=>t.id===e)).filter(e=>!!e),r=await Promise.all(i.map(async e=>[e.id,await this.runNodeUnlessRunning(e,t)]));if(r.some(([e,t])=>null===t)||this.isCancelled())return null;let o=Object.fromEntries(r);try{let n=j(e,o),a=new NodeRunner(n,ny(this,nC),ny(this,nj));t({type:"SET_PENDING",nodeId:e.id,pending:!1,iteration:ny(this,nN)}),t({type:"SET_RUNNING",nodeId:e.id,running:!0,iteration:ny(this,nN)});let i=await a.run(ny(this,nw).signal);return this.isCancelled()||(t({type:"UPDATE_NODE_VALUE",pipelineId:ny(this,nb).id,nodeId:e.id,value:i,iteration:ny(this,nN)}),t({type:"SET_RUNNING",nodeId:e.id,running:!1,iteration:ny(this,nN)})),i}catch(n){return this.isCancelled()||t({type:"UPDATE_NODE_ERROR",pipelineId:ny(this,nb).id,nodeId:e.id,error:n instanceof Error?n.message:"string"==typeof n?n:"object"==typeof n?JSON.stringify(n):"",iteration:ny(this,nN)}),null}}constructor(e,t,n,a,i){nv(this,n_,{writable:!0,value:void 0}),nv(this,nC,{writable:!0,value:void 0}),nv(this,nj,{writable:!0,value:void 0}),nv(this,nb,{writable:!0,value:void 0}),nv(this,nN,{writable:!0,value:void 0}),nv(this,nI,{writable:!0,value:void 0}),nv(this,nS,{writable:!0,value:void 0}),nv(this,nw,{writable:!0,value:void 0}),nx(this,n_,n),nx(this,nC,a),nx(this,nj,i),nx(this,nb,e),nx(this,nN,t),nx(this,nI,I(e)),nx(this,nS,new Map),nx(this,nw,new AbortController)}};function nE(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function nT(e,t){var n=nE(e,t,"get");return n.get?n.get.call(e):n.value}function nk(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function nA(e,t,n){var a=nE(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var nP=new WeakMap,nL=new WeakMap,nD=new WeakMap,nR=new WeakMap;let PipesService=class PipesService{async getGraphQLResponse(e){return nT(this,nL).getGraphQLResponse(e)}async getAllPipelineRecords(){return nT(this,nP).getAllPipelineRecords()}async getPipeline(e){return nT(this,nP).getPipeline(e)}async updatePipeline(e,t){return nT(this,nP).updatePipeline(e,t)}async deletePipeline(e){return nT(this,nP).deletePipeline(e)}async getExecutionState(e,t){return nT(this,nP).getExecutionState(e,t)}async updateExecutionState(e,t,n){return nT(this,nP).updateExecutionState(e,t,n)}async runPipeline(e,t,n){if(R(e).length>0)return;let a=new PipelineRunner(e,t,nT(this,nP),nT(this,nL),nT(this,nD)),i=this.createRunnerKey(e.id,t);nT(this,nR).set(i,a);try{return await a.run(n)}finally{nT(this,nR).delete(i)}}stopPipeline(e,t,n){let a=this.createRunnerKey(e,t),i=nT(this,nR).get(a);i&&(i.stop(n),nT(this,nR).delete(a))}createRunnerKey(e,t){return`${e}:${t}`}constructor(e,t,n){nk(this,nP,{writable:!0,value:void 0}),nk(this,nL,{writable:!0,value:void 0}),nk(this,nD,{writable:!0,value:void 0}),nk(this,nR,{writable:!0,value:new Map}),nA(this,nP,e),nA(this,nL,t),nA(this,nD,n)}};function nO(e){return e.id===eH&&"service"in e&&e.service instanceof PipesService}var nM=n(2640);function nB(e){let t,n,a,i,r,o;let c=(0,l.c)(18),{chatState:d,plugin:u}=e;if(!nO(u))throw Error("PipesPreviewArea can only be used with a PipesPlugin");let m=(0,eU.b)(),{currentReferences:p}=d,h=u.service;c[0]!==d||c[1]!==m?(t=m.getSelectedThread(d),c[0]=d,c[1]=m,c[2]=t):t=c[2];let f=t;c[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],c[3]=n):n=c[3],(0,U.N)(nF,n),c[4]!==p||c[5]!==h||c[6]!==m||c[7]!==f?(a=async e=>{if(!f)return;let t=e.trim();if(""===t)return;let n=p,a=await h.getPipeline(f.id);a&&(n=[...n,{type:eG,...a}]),m.sendChatMessage({thread:f,content:t,modeOverride:eq,references:n})},c[4]=p,c[5]=h,c[6]=m,c[7]=f,c[8]=a):a=c[8];let g=a;return c[9]!==d?(i=(0,s.jsx)(z,{children:(0,s.jsx)(nU,{chatState:d})}),c[9]=d,c[10]=i):i=c[10],c[11]!==u.service||c[12]!==i?(r=(0,s.jsx)(ex,{value:u.service,children:i}),c[11]=u.service,c[12]=i,c[13]=r):r=c[13],c[14]!==d.availableModels||c[15]!==g||c[16]!==r?(o=(0,s.jsx)(ta,{availableModels:d.availableModels,sendChatMessage:g,children:r}),c[14]=d.availableModels,c[15]=g,c[16]=r,c[17]=o):o=c[17],o}function nF(){let e=document.querySelector("header.AppHeader");return e&&(e.style.display="none"),()=>{e&&(e.style.display="")}}function nU(e){let t,n,a;let i=(0,l.c)(5),{chatState:r}=e;(function(){let e,t;let n=(0,l.c)(3),a=q();n[0]!==a?(e=()=>{},t=[a],n[0]=a,n[1]=e,n[2]=t):(e=n[1],t=n[2]),(0,c.useEffect)(e,t)})(),function(e){let t=q(),n=e_(),a=function(e,t){let{pipeline:n,messageId:a}=t8(e,t)??{};return(0,c.useMemo)(()=>n,[a])}(e.selectedThreadID,e.messages),i=H(),{sendChatMessage:r}=ti(),o=(0,c.useRef)(null);(0,c.useEffect)(()=>{let s=!1,l=async(e,n)=>{!s&&n&&t({type:"RESTORE_EXECUTION_STATE",executionState:n})},c=async(a,o)=>{if(await ns(),s)return;let l=i().pipelineState.validationErrors;if(M(l))return;if(l.length>0&&(!nl(e)||!o)){r(`${na}

${l.map(nr)}

Fix the Loop by modifying its nodes to resolve these errors.`);return}let c=Object.keys(i().executionState.nodes);if(t({type:"CLEAR_NODE_RESULTS",pipelineId:a.id,nodeIds:c}),await ns(),s)return;let d=i().executionState.iteration;if(await n.runPipeline(a,d,t),s||(await ns(),s))return;let u=Object.entries(i().executionState.nodes).filter(([e,t])=>!!t.error).map(([e,t])=>({nodeId:e,error:t.error}));if(!(u.length>0)||nl(e)&&o){let e=l.reduce((e,t)=>e.concat(t.involvedNodes),[]);if(e.length>0){let[n]=e;t({type:"FOCUS_NODE",nodeId:n??null})}else{let[e]=k(a);e&&t({type:"FOCUS_NODE",nodeId:e.id})}}else{r(`${ni}

${u.map(no)}

Fix the Loop by modifying its nodes to resolve these errors.`);return}};return(async()=>{if(!e.selectedThreadID)return;let r=await n.getPipeline(e.selectedThreadID),d=G(i()),u=!d||!!d.dummy;if(!a&&!r)return;let m=new Date(r?.updatedAt??0)>=new Date(a?.updatedAt??0)?r:a;if(s||!m)return;let p=await n.getExecutionState(m.id),h=m===a||!a&&!p;o.current!==m&&(o.current=m,t({type:"ADD_PIPELINE",pipeline:m}),h?c(m,h&&!u):l(m,p))})(),()=>{s=!0}},[a,t,n])}(r),function(e){let t,n;let a=(0,l.c)(5),i=e_(),r=W(G);a[0]!==r||a[1]!==i||a[2]!==e?(t=()=>{r&&e&&(r.dummy||i.updatePipeline(e,r))},n=[r,i,e],a[0]=r,a[1]=i,a[2]=e,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,c.useEffect)(t,n)}(r.selectedThreadID),function(){let e,t;let n=(0,l.c)(5),a=e_(),i=W(nn),r=W(nt);n[0]!==i||n[1]!==r||n[2]!==a?(e=()=>{r&&a.updateExecutionState(r,i.iteration,i)},t=[r,i,a],n[0]=i,n[1]=r,n[2]=a,n[3]=e,n[4]=t):(e=n[3],t=n[4]),(0,c.useEffect)(e,t)}();let o=W(G);i[0]!==o?(t=()=>{let e=o?.title?`${o.title} \xb7 Loops \xb7 GitHub Copilot`:"Loops \xb7 GitHub Copilot";(0,nM.D)(e)},i[0]=o,i[1]=t):t=i[1];let d=o?.title;return i[2]!==d?(n=[d],i[2]=d,i[3]=n):n=i[3],(0,c.useEffect)(t,n),i[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:t9.container,children:(0,s.jsx)(t5,{})}),i[4]=a):a=i[4],a}try{nB.displayName||(nB.displayName="PipesPreviewArea")}catch{}try{nU.displayName||(nU.displayName="PipesPreview")}catch{}var n$=n(2497),nV=n(47584);function nz(e){let t,n;let a=(0,l.c)(4),{onLinkClick:i}=e;a[0]!==i?(t=(e,t)=>{i?.(e,t)},a[0]=i,a[1]=t):t=a[1];let r=t;return a[2]!==r?(n=(0,s.jsx)(n$.Vx,{"aria-current":nV.fV.pathname===eK?"page":void 0,displayName:"Loops",href:eK,icon:t0.LP,id:eH,onLinkClick:r}),a[2]=r,a[3]=n):n=a[3],n}try{nz.displayName||(nz.displayName="PipesNavigation")}catch{}function nW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nH(e){return!!e&&"object"==typeof e&&"threadID"in e&&"string"==typeof e.threadID&&"pipeline"in e&&"object"==typeof e.pipeline}function nq(e){return!!e&&"object"==typeof e&&"pipelineId"in e&&"string"==typeof e.pipelineId&&"iteration"in e&&"number"==typeof e.iteration&&"executionState"in e&&"object"==typeof e.executionState}let IndexedDBPipesStorage=class IndexedDBPipesStorage{async getAllPipelineRecords(){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",e=>e.getAll(),e=>Array.isArray(e)?e.filter(e=>nH(e)?e.pipeline:null):[])}async getPipeline(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",t=>t.get(e),e=>nH(e)?e.pipeline:null)}updatePipeline(e,t){let n=new Date().toISOString(),a={...t,updatedAt:n};return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",t=>t.put({threadID:e,pipeline:a}),()=>a)}deletePipeline(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",t=>t.delete(e),()=>e)}getExecutionState(e,t){return void 0!==t?this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readonly",n=>n.get([e,t]),e=>nq(e)?e.executionState:null):this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readonly",t=>t.index("pipelineId").getAll(e),e=>{if(!Array.isArray(e))return null;let t=e.filter(nq);if(0===t.length)return null;let n=Math.max(...t.map(e=>e.iteration));return t.find(e=>e.iteration===n)?.executionState??null})}updateExecutionState(e,t,n){return this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readwrite",a=>a.put({pipelineId:e,iteration:t,executionState:n}),()=>n)}async withTransaction(e,t,n,a){let i=await this.getDatabase();return new Promise((r,o)=>{let s=i.transaction(e,t);s.oncomplete=()=>i.close(),s.onerror=()=>o(s.error);let l=n(s.objectStore(e));l.onsuccess=()=>r(a(l.result)),l.onerror=()=>o(l.error)})}getDatabase(){return new Promise((e,t)=>{let n=indexedDB.open(IndexedDBPipesStorage.PIPES_DB,2);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{switch(e.oldVersion){case 0:{let e=n.result;e.createObjectStore(IndexedDBPipesStorage.PIPELINES_STORE,{keyPath:"threadID"}).createIndex("threadID","threadID",{unique:!0});let t=e.createObjectStore(IndexedDBPipesStorage.EXECUTION_STORE,{keyPath:["pipelineId","iteration"]});t.createIndex("pipelineId, iteration",["pipelineId","iteration"],{unique:!0}),t.createIndex("pipelineId","pipelineId",{unique:!1});break}case 1:{if(!e.target)return;let t=e.target.transaction;if(!t)return;t.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor().onsuccess=e=>{let t=e.target?.result;if(t){let e=t.value;nH(e)&&(e.pipeline.updatedAt=new Date().toISOString(),t.update(e)),t.continue()}}}}}})}};nW(IndexedDBPipesStorage,"PIPES_DB","copilot-pipes"),nW(IndexedDBPipesStorage,"PIPELINES_STORE","pipelines"),nW(IndexedDBPipesStorage,"EXECUTION_STORE","executionStates");var nG=n(49339);async function nK(e,t,n){let a=new TextDecoder,i=e.getReader(),r="";for(;;){if(t?.aborted)return;let{done:e,value:n}=await i.read();if(e)return;if((r+=a.decode(n)).endsWith("\n\ndata: [DONE]\n\n")){var o;return r.replace("data: ","").replace("\n\ndata: [DONE]\n\n","").split("\n\ndata: ").map(e=>{try{let t=JSON.parse(e).choices[0];return t?.delta?.content??""}catch(e){}}).join("")}}}function nQ(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function nZ(e,t){var n=nQ(e,t,"get");return n.get?n.get.call(e):n.value}function nX(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function nJ(e,t,n){var a=nQ(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var nY=new WeakMap,n0=new WeakMap,n1=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async getChatCompletion(e,t,n,a){let i=(0,to.wv)(),r=t??i.id,o=await nZ(this,nY).getAuthToken(),s=await (0,eW.p)({basePath:nZ(this,n0),body:{messages:e,model:r,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:o,integrationId:this.directConnectConfiguration.integrationID,realIp:nZ(this,n1),signal:a});if(!s.ok){let e=await s.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||s.error}catch(e){}throw(0,tR.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}return a?.aborted||!s.body?"":await nK(s.body,a,n)??""}get directConnectConfiguration(){return{integrationID:"copilot-chat"}}constructor(e,t,n=""){nX(this,nY,{writable:!0,value:void 0}),nX(this,n0,{writable:!0,value:void 0}),nX(this,n1,{writable:!0,value:void 0}),nJ(this,n0,e),nJ(this,nY,new nG.J(t)),nJ(this,n1,n)}};var n2=n(57572);let n5=["SAML"],n3={FORBIDDEN:["SAML error"]};function n4(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var n6=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){var n;let a=await (0,n2.Sr)((n=n4(this,n6,"get")).get?n.get.call(this):n.value,{method:"POST",body:{query:e},signal:t});if(a.ok){let e=await a.json();if(function(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!n5.includes(e.type)&&!n3[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,tR.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,tR.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}(e,a.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e){!function(e,t,n){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}(this,n6,{writable:!0,value:void 0}),function(e,t,n){var a=n4(e,t,"set");!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n)}(this,n6,e)}};var n7=n(97891),n9=n(26443);let n8={input:"LoopsView-module__input--s4pJn",banner:"LoopsView-module__banner--XBdbR"};var ae=n(97286),at=n(72819),an=n(14987);let aa={header:"LoopsViewHeader-module__header--SShcd",rightControls:"LoopsViewHeader-module__rightControls--Xi5ew"};function ai(){let e,t,n,a;let i=(0,l.c)(4),r=(0,c.useRef)(null),o=(0,c.useRef)(null);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(er.W.Anchor,{children:(0,s.jsx)(m.K,{icon:p.KebabHorizontalIcon,"aria-label":"Menu",onClick:ao})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{r.current?.openDialog(),(0,tR.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsxs)(ei.l.Item,{onSelect:t,children:["Give feedback",(0,s.jsx)(ei.l.LeadingVisual,{children:(0,s.jsx)(p.CommentIcon,{})})]}),i[2]=n):n=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:aa.header,children:(0,s.jsxs)("div",{className:aa.rightControls,children:[(0,s.jsxs)(er.W,{anchorRef:o,children:[e,(0,s.jsx)(er.W.Overlay,{width:"small",children:(0,s.jsx)(ei.l,{children:(0,s.jsxs)(ei.l.Group,{children:[n,(0,s.jsxs)(ei.l.LinkItem,{href:"/settings/copilot",onClick:ar,children:[(0,s.jsx)(ei.l.LeadingVisual,{children:(0,s.jsx)(p.GearIcon,{})}),"Settings"]})]})})})]}),(0,s.jsx)(an.l,{ref:r,mode:"immersive",returnFocusRef:o})]})}),i[3]=a):a=i[3],a}function ar(){return(0,tR.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function ao(){return(0,tR.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{ai.displayName||(ai.displayName="LoopsViewHeader")}catch{}var as=n(37827);let al=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 6 months ago from which to fetch data",content:"2024-11-06",inputType:{type:"text"}},{id:"5",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",inputType:{type:"text"}},{id:"6",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",inputType:{type:"text"}},{id:"7",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",inputType:{type:"text"}},{id:"2",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:'query {\n  search(query: "repo:{{7}} author:{{5}} is:pr created:>={{1}}", type: ISSUE, first: 100) {\n    edges {\n      node {\n        ... on PullRequest {\n          title\n          merged\n          closed\n          createdAt\n          mergedAt\n          additions\n          deletions\n          commits {\n            totalCount\n          }\n          repository {\n            nameWithOwner\n          }\n        }\n      }\n    }\n  }\n}'},{id:"3",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:'query {\n  search(query: "repo:{{7}} author:{{6}} is:pr created:>={{1}}", type: ISSUE, first: 100) {\n    edges {\n      node {\n        ... on PullRequest {\n          title\n          merged\n          closed\n          createdAt\n          mergedAt\n          additions\n          deletions\n          commits {\n            totalCount\n          }\n          repository {\n            nameWithOwner\n          }\n        }\n      }\n    }\n  }\n}'},{id:"4",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:"You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:\n\n# Battle Royal \u{1F934}\u{1F5E1}\uFE0F\u{1F478}\n\n1. Total PRs created\n2. PR merge rate\n3. Lines of code changed (additions + deletions)\n4. Average commits per PR\n5. PR velocity (PRs per month)\n\nUser 1 ({{5}}) data: {{2}}\nUser 2 ({{6}}) data: {{3}}\n\nAnalyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary."}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",inputType:{type:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"2025-05-02",inputType:{type:"text"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",inputType:{type:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:'query {\n  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {\n    edges {\n      node {\n        ... on Issue {\n          title\n          url\n          createdAt\n          state\n          labels(first: 5) {\n            edges {\n              node {\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}'},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:'query {\n  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {\n    edges {\n      node {\n        ... on PullRequest {\n          title\n          url\n          reviews(first: 5, author: "{{1}}") {\n            edges {\n              node {\n                state\n                submittedAt\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}'},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:'query {\n  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {\n    edges {\n      node {\n        ... on Issue {\n          title\n          url\n          updatedAt\n          state\n          comments(last: 5) {\n            nodes {\n              author {\n                login\n              }\n              createdAt\n            }\n          }\n          assignees(first: 5) {\n            nodes {\n              login\n            }\n          }\n        }\n      }\n    }\n  }\n}'},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:"Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.\n\nIssues Created:\n{{3}}\n\nPR Reviews:\n{{4}}\n\nIssue Involvement:\n{{involved_issues}}\n\nPlease format the report with these sections:\n1. Overview (total numbers)\n2. Issue Activity\n   - Created Issues\n   - Issue Involvement (comments, assignments)\n3. PR Review Activity (highlight significant reviews)\n4. Key Observations\n\nKeep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift."}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",inputType:{type:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",inputType:{type:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",inputType:{type:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"30",inputType:{type:"text"}},{id:"date_limit",type:"prompt",title:"Calculate Date Limit",description:"Calculate the date limit based on the number of days",content:"Calculate the date {{days}} days ago from today in YYYY-MM-DD format."},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:'query {\n  search(query: "repo:{{repo1}} is:pr created:>={{date_limit}} sort:updated-desc", type: ISSUE, first: 10) {\n    edges {\n      node {\n        ... on PullRequest {\n          title\n          url\n          author {\n            login\n          }\n          createdAt\n          additions\n          deletions\n          changedFiles\n          body\n          labels(first: 5) {\n            edges {\n              node {\n                name\n              }\n            }\n          }\n          reviews(first: 3) {\n            nodes {\n              author {\n                login\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}'},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:'query {\n  search(query: "repo:{{repo2}} is:pr created:>={{date_limit}} sort:updated-desc", type: ISSUE, first: 10) {\n    edges {\n      node {\n        ... on PullRequest {\n          title\n          url\n          author {\n            login\n          }\n          createdAt\n          additions\n          deletions\n          changedFiles\n          body\n          labels(first: 5) {\n            edges {\n              node {\n                name\n              }\n            }\n          }\n          reviews(first: 3) {\n            nodes {\n              author {\n                login\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}'},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:'query {\n  search(query: "repo:{{repo3}} is:pr created:>={{date_limit}} sort:updated-desc", type: ISSUE, first: 10) {\n    edges {\n      node {\n        ... on PullRequest {\n          title\n          url\n          author {\n            login\n          }\n          createdAt\n          additions\n          deletions\n          changedFiles\n          body\n          labels(first: 5) {\n            edges {\n              node {\n                name\n              }\n            }\n          }\n          reviews(first: 3) {\n            nodes {\n              author {\n                login\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}'},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:'query {\n  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{date_limit}} sort:updated-desc", type: ISSUE, first: 10) {\n    edges {\n      node {\n        ... on Issue {\n          title\n          url\n          author {\n            login\n          }\n          createdAt\n          body\n          labels(first: 5) {\n            edges {\n              node {\n                name\n              }\n            }\n          }\n          comments {\n            totalCount\n          }\n        }\n      }\n    }\n  }\n}'},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:'query {\n  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{date_limit}} sort:updated-desc", type: ISSUE, first: 10) {\n    edges {\n      node {\n        ... on Issue {\n          title\n          url\n          author {\n            login\n          }\n          createdAt\n          body\n          labels(first: 5) {\n            edges {\n              node {\n                name\n              }\n            }\n          }\n          comments {\n            totalCount\n          }\n        }\n      }\n    }\n  }\n}'},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:'query {\n  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{date_limit}} sort:updated-desc", type: ISSUE, first: 10) {\n    edges {\n      node {\n        ... on Issue {\n          title\n          url\n          author {\n            login\n          }\n          createdAt\n          body\n          labels(first: 5) {\n            edges {\n              node {\n                name\n              }\n            }\n          }\n          comments {\n            totalCount\n          }\n        }\n      }\n    }\n  }\n}'},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:"\u2728\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u2728\n\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}\n\nYour #1 source for hot new features in your favorite open source projects! \u{1F308}",inputType:{type:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:"You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.\n\nUse this data for each repository:\nRepository 1:\n- PRs: {{3}}\n- Issues: {{6}}\n\nRepository 2:\n- PRs: {{4}}\n- Issues: {{7}}\n\nRepository 3:\n- PRs: {{5}}\n- Issues: {{8}}\n\nStart with this header:\n{{9}}\n\nFor each repository:\n1. Create a section with an appropriate emoji\n2. Include 2-3 exciting headlines about new features or requests\n3. Focus on user impact and benefits\n4. Include the original URLs as 'READ MORE' links\n5. Mention scope of changes for PRs (additions + deletions)\n\nEnd with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.\n\nFormat everything in markdown and use emojis liberally."}]}}],ac=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"];function ad(e){let t,n,a,i,r,o,d,u,m,p,h,f,g,y,v,x,_;let C=(0,l.c)(42),{chatState:j,plugin:b}=e;if(!b||!nO(b))throw Error("LoopsView can only be used with a PipesPlugin");let{data:N,isLoading:I}=function(e){let t,n,a,i;let r=(0,l.c)(8);return r[0]!==e?(t=["all-copilot-pipelines",e],n=async()=>{if(!e||!nO(e))return null;let t=e.service;return await t.getAllPipelineRecords()||[]},a=!!e&&nO(e),r[0]=e,r[1]=t,r[2]=n,r[3]=a):(t=r[1],n=r[2],a=r[3]),r[4]!==t||r[5]!==n||r[6]!==a?(i={queryKey:t,queryFn:n,enabled:a,refetchOnMount:!0},r[4]=t,r[5]=n,r[6]=a,r[7]=i):i=r[7],(0,ae.I)(i)}(b);C[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],C[0]=t):t=C[0];let[S,w]=(0,c.useState)(t),[E,T]=(0,c.useState)(!0),k=(0,eU.b)(),{threads:A,threadsLoading:P}=j;C[1]===Symbol.for("react.memo_cache_sentinel")?(n=[],C[1]=n):n=C[1],(0,c.useEffect)(am,n),C[2]!==k?(a=async e=>{""!==e.trim()&&await k.sendChatMessage({content:e,references:[],thread:null})},C[2]=k,C[3]=a):a=C[3];let L=a;C[4]!==k||C[5]!==b?(i=async e=>{let t={type:eG,...e},n=await k.createThread();b.service.updatePipeline(n.id,e),await k.sendChatMessage({content:"What can you help me with?",references:[t],thread:n})},C[4]=k,C[5]=b,C[6]=i):i=C[6];let D=i;C[7]!==N||C[8]!==I||C[9]!==b||C[10]!==A||C[11]!==P?.state?(r=()=>{if(!I&&P?.state!=="loading"&&P?.state!=="pending"){if(N?.length&&A&&P?.state==="loaded"){let e=new Set(A.keys()),t=N.filter(t=>e.has(t.threadID)),n=N.filter(t=>!e.has(t.threadID));for(let e of(w(t.sort(au)),T(!1),n))b.service.deletePipeline(e.threadID)}else T(!1)}},C[7]=N,C[8]=I,C[9]=b,C[10]=A,C[11]=P?.state,C[12]=r):r=C[12];let R=N?.length;return C[13]!==N||C[14]!==I||C[15]!==b||C[16]!==R||C[17]!==A||C[18]!==P?(o=[N,R,I,b,A,P],C[13]=N,C[14]=I,C[15]=b,C[16]=R,C[17]=A,C[18]=P,C[19]=o):o=C[19],(0,c.useEffect)(r,o),C[20]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)(ai,{}),C[20]=d):d=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)(as.l,{title:"Info",hideTitle:!0,className:n8.banner,description:(0,s.jsxs)("span",{children:["Loops is now available in Copilot Productivity! Data is stored locally, so it doesn\u2019t sync across devices yet. We are excited to hear from you in"," ",(0,s.jsx)("a",{href:"https://github-grid.enterprise.slack.com/archives/C07UW6TRCV7",children:"#copilot-loops"}),"!"]})}),C[21]=u):u=C[21],C[22]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsxs)(n9.A.Header,{children:[(0,s.jsx)(n9.A.Icon,{icon:(0,s.jsx)(tV.I,{icon:"loops",size:32})}),(0,s.jsx)(n9.A.Title,{children:"Loops"}),(0,s.jsx)(n9.A.Description,{children:"Create a Loop to automate your workflow. You can use it to run a command, or even create a new Loop."})]}),C[22]=m):m=C[22],C[23]!==L?(p=(0,s.jsx)(tZ.V,{hideAttachmentButton:!0,placeholder:"What would you like to automate?",size:"large",onSubmit:L}),C[23]=L,C[24]=p):p=C[24],C[25]===Symbol.for("react.memo_cache_sentinel")?(h=(0,s.jsx)(n7.h,{}),C[25]=h):h=C[25],C[26]!==p?(f=(0,s.jsxs)("div",{className:n8.input,children:[p,h]}),C[26]=p,C[27]=f):f=C[27],C[28]!==S||C[29]!==E||C[30]!==b?(g=E||S.length>0?(0,s.jsxs)(n9.A.Section,{children:[(0,s.jsx)(n9.A.Section.Title,{children:"Your loops"}),(0,s.jsx)(n9.A.Section.Grid,{loading:E,children:S.map(e=>(0,s.jsxs)(at.Z,{href:`${eW.Jz}/c/${e.threadID}`,children:[(0,s.jsx)(at.Z.Icon,{icon:"loops",color:function(e,t){let n=function(e){let t=0;for(let n=0;n<e.length;n++)t=(31*t+e.charCodeAt(n))%0x3b9aca07;return t}(e)%t.length;return t[n]}(e.pipeline.title,ac)}),(0,s.jsx)(at.Z.Heading,{children:e.pipeline.title}),(0,s.jsx)(at.Z.Description,{children:e.pipeline.description}),(0,s.jsxs)(at.Z.Metadata,{children:[(0,s.jsx)(t0.GS,{}),e.pipeline.nodes.length]}),(0,s.jsx)(at.Z.Menu,{children:(0,s.jsx)(e$,{loopsService:b.service,threadId:e.threadID})})]},e.pipeline.id))})]}):null,C[28]=S,C[29]=E,C[30]=b,C[31]=g):g=C[31],C[32]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsx)(n9.A.Section.Title,{children:"Examples"}),C[32]=y):y=C[32],C[33]!==D?(v=al.map(e=>{let{altText:t,assetPath:n,loop:a}=e;return(0,s.jsxs)(at.Z,{onClick:()=>{D({...a,id:crypto.randomUUID(),updatedAt:new Date().toISOString()})},children:[(0,s.jsx)(at.Z.Image,{alt:t,img:n}),(0,s.jsx)(at.Z.Heading,{children:a.title}),(0,s.jsx)(at.Z.Description,{children:a.description}),(0,s.jsxs)(at.Z.Metadata,{children:[(0,s.jsx)(t0.GS,{}),a.nodes.length]})]},a.title)}),C[33]=D,C[34]=v):v=C[34],C[35]!==E||C[36]!==v?(x=(0,s.jsxs)(n9.A.Section,{children:[y,(0,s.jsx)(n9.A.Section.Grid,{loading:E,children:v})]}),C[35]=E,C[36]=v,C[37]=x):x=C[37],C[38]!==f||C[39]!==g||C[40]!==x?(_=(0,s.jsxs)(s.Fragment,{children:[d,u,(0,s.jsxs)(n9.A.Container,{children:[m,f,g,x]})]}),C[38]=f,C[39]=g,C[40]=x,C[41]=_):_=C[41],_}function au(e,t){let n=new Date(e.pipeline.updatedAt);return new Date(t.pipeline.updatedAt).getTime()-n.getTime()}function am(){(0,nM.D)("Loops \xb7 GitHub Copilot")}try{ad.displayName||(ad.displayName="LoopsView")}catch{}function ap(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let PipesPlugin=class PipesPlugin{matchThread(e,t){return!!t8(e,t,!0)}async overrideCreateMessageOptions(e){return{...e,mode:eq}}constructor(e,t,n,a){ap(this,"id",eH),ap(this,"displayName","Loops"),ap(this,"service",void 0),ap(this,"PageComponent",nB),ap(this,"ViewComponent",ad),ap(this,"NavigationComponent",nz),this.service=new PipesService(new IndexedDBPipesStorage,new GraphQLClient(t),new ChatCompletionsClient(e,n,a))}}},75028:(e,t,n)=>{n.d(t,{G:()=>i,K:()=>r});var a=n(47584);let i=a.XC?.readyState==="interactive"||a.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),r=a.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.cg?.addEventListener("load",e)})},42445:(e,t,n)=>{n.d(t,{N7:()=>g});var a=n(36301),i=n(77065),r=n(24212);function o(e){return(0,r.q)(e.stack||"").map(e=>({filename:e.file||"",function:String(e.methodName),lineno:(e.lineNumber||0).toString(),colno:(e.column||0).toString()}))}function s(e){let t=document.querySelectorAll(e);if(t.length>0)return t[t.length-1]}var l=n(9080),c=n(47584),d=n(95505);let u=!1,m=0,p=Date.now(),h=new Set(["AbortError","AuthSessionExpiredError","TypeError"]),f=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","Unable to perform this operation. Please try again later."]);function g(e,t={}){if(!(e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message)){if(function(e){if(!e||"boolean"==typeof e||"number"==typeof e)return!0;if("string"==typeof e){if(C.some(t=>e.includes(t)))return!0}else if("object"==typeof e&&"string"==typeof e.message&&"number"==typeof e.code)return!0;return!1}(e))return;let n=Error(),a=function(e){try{return JSON.stringify(e)}catch{return"Unserializable"}}(e);y(v({type:"UnknownError",value:`Unable to report error, due to a thrown non-Error type: ${typeof e}, with value ${a}`,stacktrace:o(n),catalogService:void 0},t));return}e.name&&("AbortError"===e.name||h.has(e.name)&&f.has(e.message)||e.name.startsWith("ApiError")&&f.has(e.message))||y(v({type:e.name,value:e.message,stacktrace:o(e),catalogService:e.catalogService},t))}async function y(e){if(!(!_&&!u&&m<10&&(0,i.TT)()))return;let t=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(t){if(e.error.stacktrace.some(e=>x.test(e.filename)||x.test(e.function))){u=!0;return}m++;try{await fetch(t,{method:"post",body:JSON.stringify(e)})}catch{}}}function v(e,t={}){return Object.assign({error:e,sanitizedUrl:`${window.location.protocol}//${window.location.host}${function(){let e=s("meta[name=analytics-location]");return e?e.content:window.location.pathname}()+function(){let e=s("meta[name=analytics-location-query-strip]"),t="";e||(t=window.location.search);let n=s("meta[name=analytics-location-params]");for(let e of(n&&(t+=(t?"&":"?")+n.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let n=e.content.split(":",2);t=t.replace(RegExp(`(^|[?&])${n[0]}($|=)`,"g"),`$1${n[1]}$2`)}return t}()}`||window.location.href,readyState:document.readyState,referrer:(0,d.dR)(),timeSinceLoad:Math.round(Date.now()-p),user:function(){let e=document.head?.querySelector('meta[name="user-login"]')?.content;if(e)return e;let t=(0,a.y)();return`anonymous-${t}`}()||void 0,actorId:document.head?.querySelector('meta[name="octolytics-actor-id"]')?.content,bundler:l.v,ui:!!document.querySelector('meta[name="ui"]'),release:document.head?.querySelector('meta[name="release"]')?.content},t)}let x=/(chrome|moz|safari)-extension:\/\//,_=!1;c.cg?.addEventListener("pageshow",()=>_=!1),c.cg?.addEventListener("pagehide",()=>_=!0),"function"==typeof BroadcastChannel&&new BroadcastChannel("shared-worker-error").addEventListener("message",e=>{g(e.data.error)});let C=["Object Not Found Matching Id","Not implemented on this platform","provider because it's not your default extension"]},75632:(e,t,n)=>{n.d(t,{G7:()=>l,XY:()=>c,fQ:()=>s});var a=n(5225),i=n(56176);function r(){return new Set((0,i._$)().featureFlags)}let o=n(47584).X3||function(){try{return process?.env?.STORYBOOK==="true"}catch{return!1}}()?r:(0,a.A)(r);function s(){return Array.from(o())}function l(e){return o().has(e)}let c={isFeatureEnabled:l}},11086:(e,t,n)=>{n.d(t,{t:()=>i});var a=n(5804);let i=({items:e,filter:t,key:n,secondaryKey:i})=>{let r=e.map(e=>[(0,a.dt)(t,n(e)),e]);return i&&(r=r.map(([e,n])=>[Math.max(e,(0,a.dt)(t,i(n))),n])),r.filter(([e])=>e>a.IP).sort(([e,t],[a,i])=>a===e?n(t).localeCompare(n(i)):a-e).map(([,e])=>e)}},5804:(e,t,n)=>{n.d(t,{Dx:()=>o,IP:()=>r,M4:()=>i,dt:()=>s});var a=n(91385);let i=1/0,r=-1/0,o=1,s=(e,t,n=o)=>{let s=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(s===l)return i;if(0===l.length||0===s.length)return r;let c=(0,a.fN)(s,l);return c===1/0&&s!==l?r:l.startsWith(s)||l.endsWith(s)?c+n:c}},87913:(e,t,n)=>{n.d(t,{A:()=>r});let a=n.p+"jetbrains-e16495e63a33.png",i=n.p+"neovim-3301f23c4307.png",r={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:n.p+"vscode-380056900de8.png",name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:n.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:n.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:a,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:i,name:"Neovim",eventName:"NEOVIM"}}},67416:(e,t,n)=>{n.d(t,{FC:()=>l,I0:()=>o,dV:()=>s,h$:()=>d,jK:()=>c});let a=null,i=!1;function r(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t){e(t);return}a=e,function(){if(i)return;i=!0;let e=document.querySelector("context-region");e&&e.addEventListener("context-region-connected",()=>{a&&(a(e),a=null)},{once:!0})}()}function o(e){r(t=>t.pushCrumb(e))}function s(){r(e=>e.popCrumb())}function l(e){r(t=>t.replaceCrumbs(e))}function c(e){r(t=>t.renameCurrentCrumb(e))}function d(e){r(t=>t.replaceCurrentCrumb(e))}},9080:(e,t,n)=>{n.d(t,{k:()=>o,v:()=>s});var a=n(5225),i=n(47584);let r=(0,a.A)(function(){return i.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),o=(0,a.A)(function(){return"enterprise"===r()}),s="webpack"},80688:(e,t,n)=>{n.d(t,{A:()=>o,D:()=>s});var a=n(47584),i=n(57516);let r=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function o(e,t={throwQuotaErrorsOnSet:!1},n=a.cg,s=e=>e,l=e=>e){let c;try{if(!n)throw Error();c=n[e]||new r}catch{c=new r}let{throwQuotaErrorsOnSet:d}=t;function u(e){t.sendCacheStats&&(0,i.i)({incrementKey:e})}function m(e){try{if(c.removeItem(e),t.ttl){let t=`${e}:expiry`;c.removeItem(t)}}catch{}}return{getItem:function(e,t=Date.now()){try{let n=c.getItem(e);if(!n)return null;let a=`${e}:expiry`,i=Number(c.getItem(a));if(i&&t>i)return m(e),m(a),u("SAFE_STORAGE_VALUE_EXPIRED"),null;return u("SAFE_STORAGE_VALUE_WITHIN_TTL"),s(n)}catch{return null}},setItem:function(e,n,a=Date.now()){try{if(c.setItem(e,l(n)),t.ttl){let n=`${e}:expiry`,i=a+t.ttl;c.setItem(n,i.toString())}}catch(e){if(d&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:m,clear:c.clear,key:c.key,get length(){return c.length}}}function s(e){return o(e,{throwQuotaErrorsOnSet:!1},a.cg,JSON.parse,JSON.stringify)}},32329:(e,t,n)=>{n.d(t,{Ai:()=>r,Gq:()=>a,SO:()=>i});let{getItem:a,setItem:i,removeItem:r}=(0,n(80688).A)("sessionStorage")},95505:(e,t,n)=>{n.d(t,{BW:()=>i,Ff:()=>p,HK:()=>x,JA:()=>I,LM:()=>h,Pv:()=>j,Vy:()=>m,ZW:()=>C,dR:()=>_,di:()=>f,fX:()=>b,gc:()=>N,k9:()=>v,my:()=>y,r7:()=>S,wG:()=>g,xT:()=>u});var a=n(32329);let i="reload",r="soft-nav:fail",o="soft-nav:fail-referrer",s="soft-nav:referrer",l="soft-nav:marker",c="soft-nav:react-app-name",d="soft-nav:latest-mechanism";function u(){(0,a.SO)(l,"0"),(0,a.Ai)(s),(0,a.Ai)(r),(0,a.Ai)(o),(0,a.Ai)(c),(0,a.Ai)(d)}function m(e){(0,a.SO)(l,e)}function p(){(0,a.SO)(l,"0")}function h(){let e=(0,a.Gq)(l);return e&&"0"!==e}function f(){return(0,a.Gq)(l)}function g(){return!!y()}function y(){return(0,a.Gq)(r)}function v(e){(0,a.SO)(r,e||i),(0,a.SO)(o,window.location.href)}function x(){(0,a.SO)(s,window.location.href)}function _(){return(0,a.Gq)(s)||document.referrer}function C(){let e=b();e?(0,a.SO)(c,e):(0,a.Ai)(c)}function j(){return(0,a.Gq)(c)}function b(){return document.querySelector('react-partial[partial-name="repos-overview"]')?"repos-overview":document.querySelector("react-app")?.getAttribute("app-name")}function N(){return!!document.querySelector("react-app")?.getAttribute("app-name")}function I(e){(0,a.SO)(d,e)}function S(){return(0,a.Gq)(d)}},47584:(e,t,n)=>{n.d(t,{KJ:()=>a.KJ,Kn:()=>i.Kn,X3:()=>a.X3,XC:()=>i.XC,cg:()=>i.cg,fV:()=>i.fV,g5:()=>a.g5});var a=n(25992),i=n(39833)},39833:(e,t,n)=>{n.d(t,{Kn:()=>o,XC:()=>i,cg:()=>r,fV:()=>s});let a="undefined"!=typeof FORCE_SERVER_ENV&&FORCE_SERVER_ENV,i="undefined"==typeof document||a?void 0:document,r="undefined"==typeof window||a?void 0:window,o="undefined"==typeof history||a?void 0:history,s="undefined"==typeof location||a?{pathname:"",origin:"",search:"",hash:"",href:""}:location},25992:(e,t,n)=>{n.d(t,{KJ:()=>r,X3:()=>i,g5:()=>o});var a=n(39833);let i=void 0===a.XC,r=!i;function o(){return!!i||!a.XC||!!(a.XC.querySelector('react-app[data-ssr="true"]')||a.XC.querySelector('react-partial[data-ssr="true"][partial-name="repos-overview"]'))}},57516:(e,t,n)=>{n.d(t,{X:()=>h,i:()=>d});var a=n(47584),i=n(75028),r=n(9080),o=n(75632),s=n(56176),l=n(70170);let c=[];function d(e,t=!1,n=.5){if(!a.X3&&!0!==(0,o.G7)("browser_stats_disabled")){if(n<0||n>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=Date.now()),e.loggedIn=(0,s.M3)(),e.staff=h(),e.bundler=r.v,Math.random()<n&&c.push(e),t?p():m()}}let u=null,m=(0,l.n)(async function(){await i.K,null==u&&(u=window.requestIdleCallback(p))},5e3);function p(){if(u=null,!c.length)return;let e=a.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],n=e.map(e=>JSON.stringify(e));for(;n.length>0;)t.push(function(e){let t=e.shift(),n=[t],a=t.length;for(;e.length>0&&a<=65536;){let t=e[0].length;if(a+t<=65536){let i=e.shift();n.push(i),a+=t}else break}return n}(n));return t}(c))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);c=[]}}function h(){return!!a.XC?.head?.querySelector('meta[name="user-staff"]')?.content}a.XC?.addEventListener("pagehide",p),a.XC?.addEventListener("visibilitychange",p)},42252:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(96540);function i(e){let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}},34225:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(74848),i=n(24774),r=n(96540),o=n(6585),s=n(5853),l=n(9299),c=n(45230),d=n(54528),u=n(15874);let m=(0,n(91752).zw)()?[]:[{key:"Alt-g",run:()=>!0,preventDefault:!0}],p=[(0,c.b6)(),(0,u.WD)(),(0,i.$K)({formatNumber:e=>e.toString().padStart(3," ")}),(0,u.SG)(),(0,i.vX)({position:"absolute"}),(0,d.$P)({top:!0}),i.Lz.editorAttributes.of({class:"js-codemirror-editor","data-testid":"codemirror-editor"}),i.w4.of([...m,...c.pw,...d.Eo,...c.cL])];var h=n(43720);let f={"&":{background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--codeMirror-fgColor, var(--color-codemirror-text))",cursor:"text"},".cm-gutters":{background:"var(--codeMirror-gutters-bgColor, var(--color-codemirror-gutters-bg))",borderRightWidth:0},".cm-lineNumbers .cm-gutterElement":{color:"var(--codeMirror-lineNumber-fgColor, var(--color-codemirror-linenumber-text))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-gutter-fontSize, var(--codeMirror-content-fontSize, 12px))",lineHeight:"20px",padding:"0 16px 0 16px"},".cm-content":{caretColor:"var(--codeMirror-cursor-fgColor, var(--color-codemirror-cursor))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-content-fontSize, 12px)",background:"var(--codeMirror-lines-bgColor, var(--color-codemirror-lines-bg))",lineHeight:"20px",paddingTop:"8px"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},"&.cm-focused":{outline:"none"},"&.hide-help-until-focus":{"&.cm-focused .cm-panels-bottom":{display:"block"},"& .cm-panels-bottom":{display:"none"}},"&.hide-help":{"& .cm-panels-top":{display:"none",position:"absolute"}},".cm-content ::-moz-selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},".cm-activeLine":{backgroundColor:"var(--codeMirror-activeline-bgColor, var(--color-codemirror-activeline-bg))"},".cm-line":{paddingLeft:"16px"},".cm-help-panel":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"7px 10px",margin:0,fontSize:"13px",lineHeight:"16px",color:"var(--fgColor-muted, var(--color-fg-muted))",cursor:"default"},".cm-panels-bottom":{borderTop:"var(--borderWidth-thin, 1px) solid var(--borderColor-default, var(--color-border-default))",background:"none"},".js-upload-markdown-image & .cm-panels-bottom":{bottom:"30px !important"},".cm-panel.cm-search":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"8px",fontSize:"16px"},".cm-panel.cm-search > button":{borderRadius:"6px",padding:"4px 8px",background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--button-default-fgColor-rest, var(--color-btn-text))",border:"1px solid var(--button-default-borderColor-rest, var(--color-btn-border))",textTransform:"capitalize"},".cm-panel.cm-search > label":{color:"var(--fgColor-default, var(--color-fg-default))",textTransform:"capitalize",fontSize:"12px"},".cm-panel.cm-search > input":{borderRadius:"6px",padding:"4px 8px",background:"var(--bgColor-default, var(--color-canvas-default))",color:"var(--fgColor-default, var(--color-fg-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",fontSize:"12px"},'.cm-panel.cm-search > button[name="close"]':{padding:"4px"},".cm-panels-top":{borderBottom:"var(--borderWidth-thin, 1px) solid var(--color-border-default)",background:"none"},".cm-panel.cm-search input, .cm-panel.cm-search button, .cm-panel.cm-search label":{marginRight:"8px",marginBottom:"4px",marginTop:"4px",marginLeft:0},".cm-lintRange":{cursor:"help",backgroundImage:"none !important"},".cm-placeholder":{height:"1em",color:"var(--fgColor-muted)"},"&.custom-tooltips .cm-tooltip":{border:"none !important",backgroundColor:"transparent !important"},"&.custom-tooltips .cm-diagnostic":{padding:0,marginLeft:"0 !important",borderLeft:"none !important",whiteSpace:"unset"}},g=[{tag:[h._A.keyword],color:"var(--codeMirror-syntax-fgColor-keyword, var(--color-codemirror-syntax-keyword))"},{tag:[h._A.comment],color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"},{tag:[h._A.bracket],color:"var(--codeMirror-matchingBracket-fgColor, var(--color-codemirror-matchingbracket-text))"},{tag:[h._A.string,h._A.url,h._A.regexp],color:"var(--codeMirror-syntax-fgColor-string, var(--color-codemirror-syntax-string))"},{tag:[h._A.constant(h._A.name),h._A.propertyName,h._A.attributeName],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.atom,h._A.number,h._A.bool],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.function(h._A.variableName)],color:"var(--codeMirror-syntax-fgColor-entity, var(--color-codemirror-syntax-entity))"},{tag:h._A.definition(h._A.variableName),color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"},{tag:h._A.meta,color:"inherit"},{tag:h._A.heading,fontWeight:"bold",color:"inherit !important"},{tag:h._A.monospace,color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"}],y=[{tag:h._A.link,textDecoration:"underline"},{tag:h._A.emphasis,fontStyle:"italic"},{tag:h._A.strong,fontWeight:"bold"},{tag:h._A.strikethrough,textDecoration:"line-through"}],v=[...g,...y],x=[...g,...y];function _(e=[]){let t=[...null!==document.querySelector('[data-color-mode="dark"]')?x:v,...e];return[i.Lz.theme(f),(0,u.y9)(u.cr.define(t),{fallback:!0})]}let C=e=>{let t=[o.$t.tabSize.of(e.indentUnit)];return e.indentWithTabs?t.push(u.Xt.of("	")):t.push(u.Xt.of(" ".repeat(e.indentUnit))),e.lineWrapping&&t.push(i.Lz.lineWrapping),t};var j=n(42378);let b=(e,t)=>{let{state:n,placeholder:a,replacementText:i}=e.detail;"uploading"===n?(0,j.w0)(t)?(0,j.tJ)(t,a):(0,j.TC)(t,i):("uploaded"===n||"failed"===n)&&(0,j.TB)(t,a,i)},N=(e,t)=>{let{left:n,top:a}=e.detail,i=t.posAtCoords({x:n,y:a});i&&t.dispatch({selection:{anchor:i,head:i}})},I=new WeakMap;function S(e,t){if((0,j.w0)(e)){let n=(0,j.Lo)(e.state);(0,j.tJ)(e,`${t}${n}${t}`)}else{let n=(0,j.BE)(e);(0,j.TC)(e,t.repeat(2)),(0,j.f9)(e,n.anchor+t.length)}return!0}function w(e,t){let n=(0,j.BE)(e),a=e.state.doc.lineAt(n.from),i=(0,j.Lo)(e.state),r=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(i){let n=(i.endsWith("\n")?i.slice(0,-2):i).split("\n").map((t,n)=>{let i=a.number+n;return{text:e.state.doc.line(i).text,lineNumber:i}}),o=n.every(e=>r.test(e.text));for(let a=0;a<n.length;a++){let i=n[a];if(o){let t=i.text.match(r);t&&(0,j.YH)(e,i?.lineNumber,t[0])}else{let n=`${"ol"===t?`${a+1}.`:t} `;(0,j.Md)(e,i?.lineNumber,n)}}}else{let i=a.text.match(r);if(i)(0,j.YH)(e,a.number,i[0]);else{let i=`${"ol"===t?"1.":t} `;(0,j.Md)(e,a.number,i),a.text||(0,j.f9)(e,n.anchor+i.length)}}return!0}let E=[{key:"Mod-i",run:e=>S(e,"_"),preventDefault:!0},{key:"Mod-b",run:e=>S(e,"**"),preventDefault:!0},{key:"Mod-e",run:e=>S(e,"`"),preventDefault:!0},{key:"Mod-k",run:e=>{let t=(0,j.Lo)(e.state);if(t){let n=`[${t}](url)`;(0,j.tJ)(e,n);let a=(0,j.I6)(e,n).value.from;(0,j.td)(e,a+t.length+3,a+t.length+6)}else{let t=(0,j.BE)(e);(0,j.TC)(e,"[](url)"),(0,j.f9)(e,t.anchor+1)}return!0},preventDefault:!0},{key:"Shift-Mod-.",run:e=>w(e,">"),preventDefault:!0},{key:"Shift-Mod-7",run:e=>w(e,"ol"),preventDefault:!0},{key:"Shift-Mod-8",run:e=>w(e,"-"),preventDefault:!0},{key:"Mod-v",run:e=>(I.set(e,!1),!1)},{key:"Shift-Mod-v",run:e=>(I.set(e,!0),!1)}];function T(e){let t=i.NZ.line({attributes:{dir:"auto"}}),n=new o.vB;for(let{from:a,to:i}of e.visibleRanges)for(let r=a;r<=i;){let a=e.state.doc.lineAt(r);n.add(a.from,a.from,t),r=a.to+1}return n.finish()}let k=i.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=T(e.view))}constructor(e){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"decorations",void 0),this.decorations=T(e)}},{decorations:e=>e.decorations}),A=[i.Lz.domEventHandlers({keydown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&e.stopPropagation()},paste(e,t){I.get(t)||function(e,t){let n=(0,j.Lo)(e.state),a=t.clipboardData;if(n&&a){let i=a.getData("text/plain");if(!/^https?:\/\//i.test(i))return;i&&(t.preventDefault(),(0,j.tJ)(e,`[${n}](${i})`))}}(t,e),I.set(t,!1)}}),i.w4.of(E),k];var P=n(47404),L=n(5225),D=n(48741),R=n(55156);let O=(0,L.A)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json",...(0,R.k)()}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let n=await t.json();return Object.keys(n).map(e=>{let t=n[e];return{name:e,src:t[0],emoji:t[1]}})}),M=o.Pe.define({map:({from:e,to:t,severity:n},a)=>({from:a.mapPos(e),to:a.mapPos(t),severity:n})}),B=o.sU.define({create:()=>i.NZ.none,update(e,t){for(let n of(e=e.map(t.changes),t.effects))n.is(M)&&("error"===n.value.severity?e=e.update({add:[F.range(n.value.from,n.value.to)]}):"warning"===n.value.severity?e=e.update({add:[U.range(n.value.from,n.value.to)]}):"info"===n.value.severity&&(e=e.update({add:[$.range(n.value.from,n.value.to)]})));return e},provide:e=>i.Lz.decorations.from(e)}),F=i.NZ.mark({class:"CodeMirror-lint-mark-error"}),U=i.NZ.mark({class:"CodeMirror-lint-mark-warning"}),$=i.NZ.mark({class:"CodeMirror-lint-mark-info"}),V=(e,t)=>{let{from:n,to:a,severity:i}=e.detail,r=(0,j.TU)(t,{line:n.lineNumber,ch:n.character}),o=(0,j.TU)(t,{line:a.lineNumber,ch:a.character});t.dispatch({effects:[M.of({from:r,to:o,severity:i})]})},z={ruby:[{tag:h._A.variableName,color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"}],html:[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity-tag)"}],javascript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"}],typescript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],java:[{tag:h._A.typeName,color:"var(--color-prettylights-syntax-entity)"}],"c++":[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],php:[{tag:h._A.processingInstruction,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity)"}]},W=Object.keys(z);var H=n(48031);let q={key:"Tab",run:({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?(0,c.UY)({state:e,dispatch:t}):(t(e.update(e.replaceSelection(e.facet(u.Xt)),{scrollIntoView:!0,userEvent:"input"})),!0),shift:c.Mg},G=[],K=[],Q=(0,r.forwardRef)((e,t)=>{let{value:n="",extensions:c=G,keyBindings:d=K,height:u="85vh",width:m="100%",focusNextRenderRef:h,containerClassName:f,...g}=e,y=(0,r.useRef)(null),v=function({extensions:e=[],fileName:t="",onChange:n,spacing:a,isHpc:c,isReadOnly:d,enableFileUpload:u,parentRef:m,placeholder:h="Enter file contents here",ariaLabelledBy:f,value:g,width:y="",height:v="",minHeight:x="",hideHelpUntilFocus:j,hideHelp:I,onCreateEditor:S,onDestroyEditor:w}){let E=(0,r.useRef)(void 0),T=(0,r.useMemo)(()=>new o.xx,[]),k=(0,r.useMemo)(()=>new o.xx,[]),L=(0,r.useMemo)(()=>new o.xx,[]),R=(0,r.useCallback)(e=>{e.docChanged&&n(e.state.doc.toString()||"")},[n]),M=(0,r.useMemo)(()=>i.Lz.updateListener.of(R),[R]),F=(0,r.useMemo)(()=>i.Lz.theme({"&":{height:v,minHeight:x,width:y}}),[v,x,y]),U=(0,r.useMemo)(()=>{let t=[...p,M,F,(0,i.qf)(h),...C(a),[i.Lz.domEventHandlers({"secret-detected:lint":V}),B],T.of([]),k.of([]),L.of([_()]),[i.Z9.fromClass(class{constructor(e){e.scrollDOM.tabIndex=0,e.scrollDOM.setAttribute("role","region"),e.scrollDOM.setAttribute("aria-labelledby",f)}})],i.Lz.contentAttributes.of({"aria-labelledby":`${f} focus-trap-help-panel`}),i.Lz.editorAttributes.of({class:j?"hide-help-until-focus":""}),i.Lz.editorAttributes.of({class:I?"hide-help":""})];return(u&&(t.push((0,i.A)()),t.push([i.Lz.domEventHandlers({"upload:editor:change":b,"upload:editor:cursor":N})])),c&&t.push(i.Lz.editorAttributes.of({"data-hpc":"true"})),d)?t.push(o.$t.readOnly.of(!0)):t.push([function(e,t,n){let a=new o.xx;return[a.of(n?t:[]),i.w4.of([{key:e,run:function(e){let n=a.get(e.state)===t;return e.dispatch({effects:a.reconfigure(n?[]:t)}),!0}}])]}("Shift-Ctrl-m",i.w4.of([q]),!0),(0,H.G)(function(){let e=document.createElement("div"),t=e=>{let t=document.createElement("kbd");return t.textContent=e,t};return e.append("Use ",t("Control + Shift + m")," to toggle the ",t("tab")," key moving focus. Alternatively, use ",t("esc")," then ",t("tab")," to move to the next interactive element on the page."),e.className="cm-help-panel",e.id="focus-trap-help-panel",e}(),I?"top":"bottom")]),t.push(...e),t},[M,F,h,a,T,k,L,f,j,I,u,c,d,e]);return(0,r.useEffect)(()=>{let e=m.current;if(!e)return;let t=o.$t.create({doc:g,extensions:U}),n=new i.Lz({state:t,parent:e});return S?.(n),E.current=n,()=>{n.destroy(),w?.(n)}},[]),(0,r.useEffect)(()=>{E.current&&(E.current.dispatch({effects:k.reconfigure([])}),E.current.dispatch({effects:o.Pe.reconfigure.of(U)}))},[k,U]),(0,r.useEffect)(()=>{if(E.current&&void 0!==g){let e=E.current.state.doc.toString()||"",t=g||"";t!==e&&E.current.dispatch({changes:{from:0,to:e.length,insert:t}})}},[g]),(0,r.useEffect)(()=>{let e=async()=>{let e=t.split(".").pop()||"",n=e?s.e.find(n=>n.extensions.includes(e)||n.filename&&n.filename.test(t)):void 0;if(n&&E.current){var a;let e=(a=n.name,W.includes(a.toLowerCase())?z[a.toLowerCase()]:null);e&&E.current.dispatch({effects:L.reconfigure(_(e))}),"Markdown"===n.name?(E.current.dispatch({effects:T.reconfigure((0,l.markdown)({base:l.markdownLanguage}))}),E.current.dispatch({effects:o.Pe.reconfigure.of([...A,...U])}),E.current.dispatch({effects:k.reconfigure([D.E,(0,P.yU)({override:[async e=>(function(e,t=[]){let n=e.matchBefore(/:\w+/);if(!n||n&&n.from===n.to&&!e.explicit)return null;let a=t.filter(e=>-1!==e.name.indexOf(n.text.replace(":",""))).map(e=>({label:e.name,apply:e.emoji||`:${e.name}:`,type:e.src}));return{from:n.from,to:n.to,options:a,filter:!1}})(e,await O())],icons:!1,addToOptions:[{render:e=>{let t=document.createElement("img");return t.className="emoji emoji-result mr-2",t.height=20,t.width=20,t.alt=`:${e.label}:`,t.src=e.type,t.setAttribute("async",""),t},position:0}]}),o.Nb.highest(i.w4.of([{key:"Tab",run:P.$w}]))])})):(E.current.dispatch({effects:k.reconfigure([])}),E.current.dispatch({effects:T.reconfigure(await n.load())}))}};E.current&&e()},[t,T,k,U,L]),E}({parentRef:y,value:n,height:u,width:m,extensions:(0,r.useMemo)(()=>[...c,i.w4.of(d)],[c,d]),...g});return(0,r.useImperativeHandle)(t,()=>({editor:y.current,view:v.current}),[y,v]),h?.current&&v&&(window.requestAnimationFrame(()=>{v.current&&!v.current.hasFocus&&v.current.focus()}),h.current=!1),(0,a.jsx)("div",{className:f,ref:y})});Q.displayName="CodeMirror";let Z=Q},14987:(e,t,n)=>{n.d(t,{l:()=>u});var a=n(74848),i=n(51349),r=n(57572),o=n(96540),s=n(2622),l=n(54912);let c=(0,a.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),d=[{name:"Hate it",value:1,icon:c,color:"veryDissatisfied"},{name:"Not great",value:2,icon:(0,a.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),color:"satisfied"},{name:"Love it",value:4,icon:(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]}),color:"verySatisfied"}],u=(0,o.forwardRef)(function({mode:e,returnFocusRef:t},n){let c=(0,o.useRef)(null),u=(0,o.useRef)(null),m=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(n,()=>({openDialog:e=>{m.current=e,s.W.copilotChatInterviewSurvey?c.current?.openDialog():u.current?.openDialog(e)}}));let p=async(t,n)=>{let a=[];if(null==t&&a.push("Please select a rating."),n.length>2e3&&a.push("Please keep your feedback within 2000 characters or less."),a.length>0)return a;let i={rating:t,content:n,hostname:window.location.hostname,path:window.location.pathname,mode:e};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||a.push("An error occurred while submitting your feedback.")}catch{a.push("An error occurred while submitting your feedback.")}return a};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.E,{ref:c,onClose:e=>{"no-thanks"===e&&u.current?.openDialog(m.current)}}),(0,a.jsx)(i.N,{ref:u,options:d,onSubmit:p,returnFocusRef:t})]})});u.displayName="ConversationFeedbackDialog"},25408:(e,t,n)=>{n.d(t,{Y:()=>S});var a,i=n(74848),r=n(70170),o=n(46988),s=n(53949),l=n(11499),c=n(38568),d=n(57572),u=n(16255),m=n(73451),p=n(19647),h=n(55847),f=n(74144),g=n(96540),y=n(40961),v=n(65615),x=n(7426);let _={footerContainer:"PersonalInstructionsDialog-module__footerContainer--YsPvr"};var C=n(38621),j=n(8338);let b={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},N=(0,g.forwardRef)(function(e,t){let{onSelect:n}=e,[a,r]=(0,g.useState)(!1);return(0,i.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:{marginBottom:"1px"},children:[(0,i.jsx)(j.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:a&&Object.entries(b)?.map(([e,t])=>i.jsxs(j.l.Item,{"aria-label":`${t.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>n(e,t.body),children:[i.jsx(C.PlusIcon,{}),e]},e))}),(0,i.jsx)(j.l,{className:"d-flex flex-column flex-justify-end",children:(0,i.jsx)(j.l.Item,{"aria-label":a?"Hide templates":"Show templates","data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:{border:"1px solid transparent"},onSelect:()=>r(!a),children:a?(0,i.jsx)(C.XIcon,{}):(0,i.jsx)(C.LightBulbIcon,{})})})]})});try{N.displayName||(N.displayName="PersonalInstructionsTemplates")}catch{}try{(a=PersonalInstructionsTemplatesWithRef).displayName||(a.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let I=(e,t=500)=>{let[n,a]=(0,g.useState)(48);return(0,g.useEffect)(()=>{let n=(0,r.s)(()=>{e?.current&&a(e.current.clientHeight??48)},t),i=new ResizeObserver(n);return e?.current&&i.observe(e.current),()=>{n.cancel(),i?.disconnect?.()}},[e,t]),n},S=({onDismiss:e,returnFocusRef:t})=>{let n=(0,v.Pk)(),a=(0,x.b)(),[r,C]=(0,g.useState)(n.personalInstructions??""),[j,b]=(0,g.useState)(void 0),[S,E]=(0,g.useState)(!1),T=(0,g.useRef)(null),k=(0,g.useRef)(null),[A,P]=(0,g.useState)(""),L=I(k);(0,c.N)(()=>{T?.current&&(T.current.scrollTop=T.current.scrollHeight)},[r]);let D=(0,g.useCallback)(async()=>{if(!S){E(!0),A&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:A});try{let n=await (0,d.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:r}});if(n.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),a.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:r}),(0,y.flushSync)(()=>e()),t.current?.focus();else{let e=await n.json();b(String(e.errorMessage))}}catch{b("An error occurred while saving your personal instructions.")}finally{E(!1)}}},[S,r,a,t,e,A]),R=(e,t)=>{t&&(C(r?`${r}
${t}`:t),P(e),T?.current?.focus())},O=()=>{D()},M=(0,g.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,y.flushSync)(()=>e()),t.current?.focus()},[e,t]);return(0,i.jsx)(u.Z,{children:(0,i.jsx)(f.l,{onClose:M,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",renderBody:()=>(0,i.jsx)(f.l.Body,{children:(0,i.jsx)("form",{onSubmit:D,children:(0,i.jsxs)(m.A,{children:[(0,i.jsx)(m.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,i.jsx)("div",{className:"width-full position-relative",children:(0,i.jsxs)(l.tL,{commands:{"github:submit-form":O},children:[(0,i.jsx)(p.Ay,{ref:T,className:"width-full",style:{paddingBottom:`${L}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:r,validationStatus:j||r.length>600?"error":void 0,...(0,s.G)("prompt-input"),onChange:e=>{C(e.target.value),b(void 0)}}),(0,i.jsx)(N,{ref:k,onSelect:R})]})}),(0,i.jsx)(w,{text:r,promptCharLimit:600}),j&&(0,i.jsx)(m.A.Validation,{variant:"error",children:(0,i.jsx)("span",{...(0,s.G)("error-message"),children:j})})]})})}),renderFooter:()=>(0,i.jsxs)("div",{className:_.footerContainer,children:[(0,i.jsx)(h.Q,{variant:"default",onClick:M,children:"Cancel"}),(0,i.jsx)(h.Q,{loading:S,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:D,children:"Save"})]})})})};function w({text:e,promptCharLimit:t}){let n=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-tabular-nums",...(0,s.G)("current-character-count"),children:e.length})," ","/ ",t," characters"]});return(0,i.jsx)(i.Fragment,{children:e.length>t?(0,i.jsx)(m.A.Validation,{variant:"error",children:n}):(0,i.jsx)(m.A.Caption,{children:n})})}try{S.displayName||(S.displayName="PersonalInstructionsDialog")}catch{}try{w.displayName||(w.displayName="CharacterCount")}catch{}},57393:(e,t,n)=>{n.d(t,{X:()=>v});var a=n(74848),i=n(38621),r=n(16255),o=n(73451),s=n(19647),l=n(9591),c=n(75177),d=n(46309),u=n(81679),m=n(87330),p=n(55847),h=n(74144),f=n(96540),g=n(37937),y=n(7426);let v=({onDismiss:e,promptDialogRef:t})=>{let n=(0,y.b)(),v=g.J.settings,[x,_]=(0,f.useState)(v?.instructionPrompt||void 0),[C,j]=(0,f.useState)(v?.skillOverrides??[]),[b,N]=(0,f.useState)(v?.temperature||.7),I=(0,f.useRef)(void 0),S=(0,f.useCallback)(async()=>{if(I.current){_(I.current);return}let e=await n.getSystemPrompt();I.current=e,_(e)},[n]);(0,f.useEffect)(()=>{(async()=>{void 0===x&&await S()})()},[S,n,x]);let w=(0,f.useCallback)(()=>{S(),j([]),N(.7)},[S]);return(0,a.jsx)(r.Z,{children:(0,a.jsxs)(h.l,{ref:t,onClose:e,title:"Prompt Settings",width:"xlarge",sx:{overflow:"auto"},children:[(0,a.jsxs)(h.l.Body,{children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"System Instructions"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),(0,a.jsx)(s.Ay,{block:!0,sx:{my:2},"aria-label":"Prompt",name:"Prompt",value:x,onChange:e=>_(e.target.value)})]}),(0,a.jsxs)(o.A,{sx:{pt:3},children:[(0,a.jsx)(o.A.Label,{children:"Temperature"}),(0,a.jsx)(o.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),(0,a.jsx)(l.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:b,onChange:e=>N(Number(e.target.value))})]}),(0,a.jsx)(c.A,{sx:{fontSize:3,py:3},children:"Tools"}),C.map((e,t)=>(0,a.jsxs)(f.Fragment,{children:[(0,a.jsxs)(d.B,{direction:"horizontal",sx:{py:2},children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"Name"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,a.jsx)(l.A,{defaultValue:e.slug,onChange:e=>{C.map((n,a)=>{a===t&&(n.slug=e.target.value)})}})]}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"Description"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Make changes to the tool description"})}),(0,a.jsx)(l.A,{defaultValue:e.description,onChange:n=>{C.map((a,i)=>{i===t&&(e.description=n.target.value)})}})]}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{id:"toggle",children:"Enabled?"}),(0,a.jsx)(u.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{C.map((n,a)=>{a===t&&(n.enabled=e)})}})]}),(0,a.jsx)(m.K,{icon:i.TrashIcon,"aria-label":"Delete tool",variant:"invisible",sx:{mt:"20px"},onClick:()=>{let e=[...C];1===C.length?j([]):(e.splice(t,1),j(e))}})]}),t===C.length-1&&(0,a.jsx)(p.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>j([...C,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),0===C.length&&(0,a.jsx)(p.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>j([...C,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"})]}),(0,a.jsx)(h.l.Footer,{children:(0,a.jsx)(h.l.Buttons,{buttons:[{type:"button",onClick:e,content:"Cancel"},{type:"button",onClick:w,content:"Reset"},{type:"submit",onClick:()=>{let t=C.filter(e=>e.slug&&e.description);n.setCopilotSettings({instructionPrompt:x||"",skillOverrides:t,temperature:b}),e()},content:"Save",buttonType:"primary"}]})})]})})};try{v.displayName||(v.displayName="PromptDialog")}catch{}},26443:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(74848),i=n(2809),r=n(96540);let o={scrollContainer:"ServiceView-module__scrollContainer--LFK5G",contentContainer:"ServiceView-module__contentContainer--DZVDS",content:"ServiceView-module__content--B7ctp",banner:"ServiceView-module__banner--kVai_",serviceHeader:"ServiceView-module__serviceHeader--R2TLR",pageDescription:"ServiceView-module__pageDescription--EIuPe",pageTitle:"ServiceView-module__pageTitle--aRY5n",entityIcon:"ServiceView-module__entityIcon--JC2yt",section:"ServiceView-module__section--_ycAN",sectionTitle:"ServiceView-module__sectionTitle--hD3JM",sectionGrid:"ServiceView-module__sectionGrid--Fa4lP",skeletonCard:"ServiceView-module__skeletonCard--MT87J"};function s({children:e}){let t=[],n=[];for(let a of r.Children.toArray(e))r.isValidElement(a)&&a.type===l?t.push(a):n.push(a);return(0,a.jsx)("div",{className:o.scrollContainer,children:(0,a.jsxs)("div",{className:o.contentContainer,children:[t,(0,a.jsx)("div",{className:o.content,children:n})]})})}function l({children:e}){return(0,a.jsx)("div",{className:o.banner,children:e})}function c({children:e}){return(0,a.jsx)("div",{className:o.serviceHeader,children:e})}function d({children:e}){return(0,a.jsx)("section",{className:o.section,children:e})}function u({icon:e}){return(0,a.jsx)("div",{className:o.entityIcon,children:e})}function m({children:e}){return(0,a.jsx)("h2",{className:o.pageTitle,children:e})}function p({children:e}){return(0,a.jsx)("p",{className:o.pageDescription,children:e})}function h({children:e}){return(0,a.jsx)("h3",{className:o.sectionTitle,children:e})}function f({children:e,loading:t=!1}){let n=e?Array.isArray(e)?e:[e]:[];return(0,a.jsx)(a.Fragment,{children:t?(0,a.jsx)("div",{className:o.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(i.f,{className:o.skeletonCard},t))}):(0,a.jsx)("div",{className:o.sectionGrid,children:n})})}d.Title=h,d.Grid=f;let g={Icon:u,Title:m,Description:p,Container:s,Banner:l,Header:c,Section:d};try{s.displayName||(s.displayName="ServiceContainer")}catch{}try{l.displayName||(l.displayName="ServiceBanner")}catch{}try{c.displayName||(c.displayName="ServiceHeader")}catch{}try{d.displayName||(d.displayName="ServiceSection")}catch{}try{u.displayName||(u.displayName="Icon")}catch{}try{m.displayName||(m.displayName="Title")}catch{}try{p.displayName||(p.displayName="Description")}catch{}try{h.displayName||(h.displayName="SectionTitle")}catch{}try{f.displayName||(f.displayName="SectionGrid")}catch{}},2497:(e,t,n)=>{n.d(t,{Vx:()=>d});var a,i,r=n(74848),o=n(38621),s=n(96540),l=n(84976);let c={subList:"Navigation-module__subList--Ued7A",section:"Navigation-module__section--KRddB",expandButton:"Navigation-module__expandButton--v40lv",item:"Navigation-module__item--KtIqz",link:"Navigation-module__link--ybSvz",contextButton:"Navigation-module__contextButton--AhNds",icon:"Navigation-module__icon--szbQF",textWrapper:"Navigation-module__textWrapper--qEAz8",text:"Navigation-module__text--KFINZ"};function d({"aria-current":e,children:t,contextMenuComponent:n,expandOnClick:a=!0,hasItems:i,href:d,icon:u,iconOverride:m,onLinkClick:p,id:h,displayName:f}){let[g,y]=(0,s.useState)(!1),v={"aria-current":e,className:c.link,onClick:e=>{p?.(e,h),a&&y(!0)}};return(0,r.jsxs)("li",{className:c.section,children:[(0,r.jsxs)("div",{className:c.item,children:[i&&(0,r.jsx)("button",{"aria-label":"Expand","aria-expanded":g,className:c.expandButton,onClick:()=>{y(!g)},children:g?(0,r.jsx)(o.ChevronDownIcon,{size:12}):(0,r.jsx)(o.ChevronRightIcon,{size:12})}),(0,r.jsxs)(l.N_,{to:d,...v,children:[u?(0,r.jsx)(u,{size:16,className:c.icon}):m,(0,r.jsx)("div",{className:c.textWrapper,children:(0,r.jsx)("div",{className:c.text,children:f})})]}),n]}),g&&i&&(0,r.jsx)("ul",{className:c.subList,children:t})]})}try{d.displayName||(d.displayName="Navigation")}catch{}try{(a=function({"aria-current":e,contextMenuComponent:t,displayName:n,href:a,icon:i,iconOverride:o,onLinkClick:s}){return(0,r.jsxs)("li",{className:c.item,children:[(0,r.jsxs)(l.N_,{className:c.link,to:a,"aria-current":e,onClick:s,children:[i?(0,r.jsx)(i,{size:16,className:c.icon}):o,(0,r.jsx)("div",{className:c.textWrapper,children:(0,r.jsx)("div",{className:c.text,children:n})})]}),t]})}).displayName||(a.displayName="NavigationSubItem")}catch{}try{(i=function(e){return(0,r.jsx)("button",{...e,className:c.contextButton,children:(0,r.jsx)(o.KebabHorizontalIcon,{size:16})})}).displayName||(i.displayName="NavigationContextMenuButton")}catch{}},88104:(e,t,n)=>{n.d(t,{BH:()=>_,xx:()=>C});var a=n(74848),i=n(65615),r=n(42252),o=n(96540),s=n(32837),l=n(54533),c=n(7426),d=n(82610),u=n(46996);let m=["thread-scoped-file","thread-scoped-issue"],p=e=>!!e.isUserEdited,h=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,u.A)(t.get(e),n)),f=(e,t)=>!h(new Map(e.filter(e=>m.includes(e.type)).map(e=>[(0,d.Vb)(e),e])),new Map(t.filter(e=>m.includes(e.type)).map(e=>[(0,d.Vb)(e),e]))),g=(e,t)=>!h(new Map(Array.from(e).filter(([,e])=>p(e))),new Map(Array.from(t).filter(([,e])=>p(e)))),y=(0,o.createContext)(void 0),v=new Map,x=[];function _({children:e}){let[t,n]=(0,o.useState)(v),[u,h]=(0,o.useState)(x),[_,C]=(0,o.useState)(x),[j,b]=(0,o.useState)(void 0),[N,I,S]=(0,s.B)(!1),[w,E,T]=(0,s.B)(!1),k=(0,r.S)((0,i.pn)(e=>e.selectedThreadID)),A=(0,i.pn)(e=>e.selectedThreadID);(0,o.useEffect)(()=>{k&&k!==A&&(n(v),h(x),b(void 0),null===A&&S())},[S,A,k]);let P=(0,o.useCallback)((e,t=!0)=>{h(t=>{if(t.includes(e))return t;let n=(0,l.oy)(e),a=t.findIndex(e=>(0,l.oy)(e)===n),i=[...t];return -1===a?i.push(e):i.splice(a,1,e),i}),b(n=>t||void 0===n||(0,l.oy)(n)===(0,l.oy)(e)?e:n)},[]),L=(0,o.useCallback)(e=>{n(t=>{let n=new Map(t);return n.set(e.id,e),n})},[]),D=(0,o.useCallback)(e=>{let t=u.indexOf(e),n=u.toSpliced(t,1);j===e&&b(n[t-1]??n[0]),h(n)},[u,j]),R=(0,o.useMemo)(()=>{let e=new Map;for(let[n,a]of t){let t=(0,l.oy)(n),i=e.get(t)??[];i.push(a.id),e.set(t,i)}for(let n of e.values())n.sort((e,n)=>{let a=t.get(e),i=t.get(n);return"timestamp"in a&&"timestamp"in i?a.timestamp.valueOf()-i.timestamp.valueOf():0});return e},[t]),O=(0,o.useCallback)(e=>{if(e){for(let t of e)if(n(e=>{let n=new Map(e);return n.delete(t)?n:e}),u.includes(t)){let e=(0,l.oy)(t),n=R.get(e),a=n?.indexOf(t)??-1,i=n?.[a-1];i?P(i,!1):D(t)}}else n(v),h(x),b(void 0)},[P,D,R,u]),M=(0,o.useMemo)(()=>({items:t,versionedItems:R,openItems:N?u:x,openItemsBeforeSubthreadChange:_,previewPaneOpen:N,selectedItem:j,updateItem:L,setOpenItemsBeforeSubthreadChange:C,openItem:P,closeItem:D,openPreviewPane:I,closePreviewPane:S,removeItems:O,showLoadingState:w,enableLoadingState:E,disableLoadingState:T}),[t,R,N,u,_,j,L,C,P,D,I,S,O,w,E,T]);return!function({items:e,removeItems:t,updateItem:n}){let{currentReferences:a,messages:r}=(0,i.Pk)(),s=(0,c.b)(),u=(0,o.useRef)(e),h=(0,o.useRef)(a);(0,o.useEffect)(()=>{let i=g(u.current,e);u.current=e;let o=f(h.current,a);if(h.current=a,i){let t=new Map(Array.from(e.values()).filter(p).map(e=>(0,l.g)(e)).filter(e=>null!=e).map(e=>[(0,d.Vb)(e),e])),n=new Set;for(let e of a)if(m.includes(e.type)){let a=(0,d.Vb)(e);n.add(a);let i=t.get(a);i?f([i],[e])&&s.addReference(i,"content-preview"):s.removeReference(e)}for(let[e,a]of t)n.has(e)||s.addReference(a,"content-preview")}else if(o){let i=new Map(a.map(e=>(0,l.oR)({ref:e,messageIndex:r.length})).filter(e=>null!=e).map(e=>[e.id,e])),o=new Set;for(let[a,r]of e)if(p(r)){o.add(a);let e=i.get(a);null!=e?g(new Map([[e.id,e]]),new Map([[r.id,r]]))&&n(e):t([a])}for(let[e,t]of i)o.has(e)||n(t)}},[e,s,a,r.length,t,n])}(M),(0,a.jsx)(y.Provider,{value:M,children:e})}function C(){let e=(0,o.useContext)(y);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}try{y.displayName||(y.displayName="ContentPreviewContext")}catch{}try{_.displayName||(_.displayName="ContentPreviewProvider")}catch{}},18427:(e,t,n)=>{n.d(t,{B:()=>f});var a=n(74848),i=n(2622),r=n(46988),o=n(38621),s=n(91321),l=n(10871),c=n(89323),d=n(87330),u=n(8338);let m={actions:"EditorMenu-module__actions--AddF7",editorButton:"EditorMenu-module__editorButton--_thrU"};var p=n(64633),h=n(87913);function f({menuLocation:e,mode:t,onButtonClick:n}){let f=(n,a)=>{i.W.freeToPaidTelemetry?(0,p.F)(n,e,t,a):(0,r.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${n.toUpperCase()}`,mode:t})};return(0,a.jsxs)(s.A,{className:m.actions,children:[(0,a.jsx)(l.z,{className:m.editorButton,href:h.A.vscode.url,leadingVisual:(0,a.jsx)("img",{src:h.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n?.(),f("vscode","ide_menu_primary_button_click")},children:h.A.vscode.name}),(0,a.jsxs)(c.W,{children:[(0,a.jsx)(c.W.Anchor,{children:(0,a.jsx)(d.K,{"aria-label":"More editors",icon:o.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{f("menu","ide_menu_open")},"data-testid":"editor-dropdown-button"})}),(0,a.jsx)(c.W.Overlay,{align:"end",children:(0,a.jsx)(u.l,{children:(0,a.jsx)(p.t,{menuLocation:e,mode:t,onItemClick:n})})})]})]})}try{f.displayName||(f.displayName="EditorMenu")}catch{}},64633:(e,t,n)=>{n.d(t,{F:()=>l,t:()=>c});var a=n(74848),i=n(2622),r=n(46988),o=n(8338),s=n(87913);function l(e,t,n,a,i){let o=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,r.BI)("dotcom_chat.activate",{target:o,text:i,category:t,action:a,mode:n})}function c({menuLocation:e,mode:t,onItemClick:n}){return Object.entries(s.A).map(([r,{name:s,url:c,icon:d}])=>(0,a.jsxs)(o.l.LinkItem,{href:c,onClick:()=>{n?.(),i.W.freeToPaidTelemetry&&l(r,e,t,"menu_item_click",s)},children:[s,(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)("img",{src:d,alt:"",height:"20",width:"20"})})]},r))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},72819:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(74848),i=n(21728),r=n(96540),o=n(84976),s=n(13250);let l={cardContainer:"Card-module__cardContainer--Jk2It",cardContent:"Card-module__cardContent--A8hpe",cardMenu:"Card-module__cardMenu--o6v0Y",itemHeader:"Card-module__itemHeader--WIpbQ",edgeToEdge:"Card-module__edgeToEdge--o6nFA",itemImage:"Card-module__itemImage--fVqUU",itemMain:"Card-module__itemMain--M__Bj",itemContent:"Card-module__itemContent--QdREU",itemHeaderTitle:"Card-module__itemHeaderTitle--TwWdH",itemHeaderDescription:"Card-module__itemHeaderDescription--KFU1e",itemMetadata:"Card-module__itemMetadata--DWvmz",itemMetadataItem:"Card-module__itemMetadataItem--t_AWQ"};var c=n(34164);let d=e=>{let t,n,s,d,y,v,x,_,C,j,b;let N=(0,i.c)(47),I=null,S=null,w=null,E=null,T=null,k=null;if(N[0]!==e.children){for(let t of r.Children.toArray(e.children))r.isValidElement(t)&&(t.type===u?I=t:t.type===m?S=t:t.type===p?w=t:t.type===h?E=t:t.type===g?T=t:t.type===f&&(k=t));N[0]=e.children,N[1]=I,N[2]=S,N[3]=w,N[4]=E,N[5]=T,N[6]=k}else I=N[1],S=N[2],w=N[3],E=N[4],T=N[5],k=N[6];N[7]!==S?(t=(0,c.$)(l.itemHeader,S&&l.edgeToEdge),N[7]=S,N[8]=t):t=N[8];let A=I||S;N[9]!==t||N[10]!==A?(n=(0,a.jsx)("div",{className:t,children:A}),N[9]=t,N[10]=A,N[11]=n):n=N[11],N[12]!==E||N[13]!==w?(s=(0,a.jsxs)("div",{className:l.itemContent,children:[w,E]}),N[12]=E,N[13]=w,N[14]=s):s=N[14],N[15]!==T?(d=(0,a.jsx)("div",{className:l.itemMetadata,children:T}),N[15]=T,N[16]=d):d=N[16],N[17]!==s||N[18]!==d?(y=(0,a.jsxs)("div",{className:l.itemMain,children:[s,d]}),N[17]=s,N[18]=d,N[19]=y):y=N[19],N[20]!==n||N[21]!==y?(v=(0,a.jsxs)(a.Fragment,{children:[n,y]}),N[20]=n,N[21]=y,N[22]=v):v=N[22];let P=v;if("href"in e){let t,n,i,r,s;return N[23]!==e?({href:t,...n}=e,N[23]=e,N[24]=t,N[25]=n):(t=N[24],n=N[25]),N[26]!==P||N[27]!==t||N[28]!==n?(i=(0,a.jsx)(o.N_,{...n,to:t,className:l.cardContent,children:P}),N[26]=P,N[27]=t,N[28]=n,N[29]=i):i=N[29],N[30]!==k?(r=k?(0,a.jsx)("div",{className:l.cardMenu,children:k}):null,N[30]=k,N[31]=r):r=N[31],N[32]!==i||N[33]!==r?(s=(0,a.jsxs)("div",{className:l.cardContainer,children:[i,r]}),N[32]=i,N[33]=r,N[34]=s):s=N[34],s}return N[35]!==e?({onClick:x,..._}=e,N[35]=e,N[36]=x,N[37]=_):(x=N[36],_=N[37]),N[38]!==P||N[39]!==x||N[40]!==_?(C=(0,a.jsx)("button",{..._,className:l.cardContent,onClick:x,children:P}),N[38]=P,N[39]=x,N[40]=_,N[41]=C):C=N[41],N[42]!==k?(j=k?(0,a.jsx)("div",{className:l.cardMenu,children:k}):null,N[42]=k,N[43]=j):j=N[43],N[44]!==C||N[45]!==j?(b=(0,a.jsxs)("div",{className:l.cardContainer,children:[C,j]}),N[44]=C,N[45]=j,N[46]=b):b=N[46],b},u=e=>{let t;let n=(0,i.c)(3),{icon:r,color:o}=e;return n[0]!==o||n[1]!==r?(t=(0,a.jsx)(s.I,{icon:r,hasBackground:!0,color:o,size:16}),n[0]=o,n[1]=r,n[2]=t):t=n[2],t},m=e=>{let t;let n=(0,i.c)(3),{img:r,alt:o}=e,s=void 0===o?"":o;return n[0]!==s||n[1]!==r?(t=(0,a.jsx)("img",{src:r,alt:s,className:l.itemImage}),n[0]=s,n[1]=r,n[2]=t):t=n[2],t},p=e=>{let t;let n=(0,i.c)(2),{children:r}=e;return n[0]!==r?(t=(0,a.jsx)("h3",{className:l.itemHeaderTitle,children:r}),n[0]=r,n[1]=t):t=n[1],t},h=e=>{let t;let n=(0,i.c)(2),{children:r}=e;return n[0]!==r?(t=(0,a.jsx)("p",{className:l.itemHeaderDescription,children:r}),n[0]=r,n[1]=t):t=n[1],t},f=e=>{let t;let n=(0,i.c)(2),{children:r}=e;return n[0]!==r?(t=(0,a.jsx)(a.Fragment,{children:r}),n[0]=r,n[1]=t):t=n[1],t},g=e=>{let t;let n=(0,i.c)(2),{children:r}=e;return n[0]!==r?(t=(0,a.jsx)("div",{className:l.itemMetadataItem,children:r}),n[0]=r,n[1]=t):t=n[1],t};d.Icon=u,d.Image=m,d.Heading=p,d.Description=h,d.Menu=f,d.Metadata=g;try{d.displayName||(d.displayName="Card")}catch{}try{u.displayName||(u.displayName="Icon")}catch{}try{m.displayName||(m.displayName="Image")}catch{}try{p.displayName||(p.displayName="Heading")}catch{}try{h.displayName||(h.displayName="Description")}catch{}try{f.displayName||(f.displayName="Menu")}catch{}try{g.displayName||(g.displayName="Metadata")}catch{}},50781:(e,t,n)=>{n.d(t,{GS:()=>r,LP:()=>c,OZ:()=>d});var a=n(74848),i=n(21728);let r=e=>{let t,n,r,o,s;let l=(0,i.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c}=t,d=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={color:"var(--fgColor-muted)",display:"inline-block",verticalAlign:"text-bottom"},r=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M.5 6v4.5A2.5 2.5 0 0 0 3 13h1.645a3.5 3.5 0 0 1-.11-1.5H3a1 1 0 0 1-1-1V6zM14 6v4.5a1 1 0 0 1-1 1h-1.535a3.5 3.5 0 0 1-.11 1.5H13a2.5 2.5 0 0 0 2.5-2.5V6zm-4 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"}),o=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.5 10V5.5A2.5 2.5 0 0 0 13 3h-1.645a3.5 3.5 0 0 1 .11 1.5H13a1 1 0 0 1 1 1V10zM2 10V5.5a1 1 0 0 1 1-1h1.535a3.5 3.5 0 0 1 .11-1.5H3A2.5 2.5 0 0 0 .5 5.5V10zm4-6a2 2 0 1 1 4 0 2 2 0 0 1-4 0",clipRule:"evenodd"}),l[2]=n,l[3]=r,l[4]=o):(n=l[2],r=l[3],o=l[4]),l[5]!==d?(s=(0,a.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[r,o]}),l[5]=d,l[6]=s):s=l[6],s},o=e=>{let t,n,r,o;let s=(0,i.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={color:"var(--fgColor-muted",display:"inline-block",verticalAlign:"text-bottom"},r=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"}),s[2]=n,s[3]=r):(n=s[2],r=s[3]),s[4]!==c?(o=(0,a.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:r}),s[4]=c,s[5]=o):o=s[5],o},s=e=>{let t,n,r,o;let s=(0,i.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={color:"var(--fgColor-muted",display:"inline-block",verticalAlign:"text-bottom"},r=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"}),s[2]=n,s[3]=r):(n=s[2],r=s[3]),s[4]!==c?(o=(0,a.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:r}),s[4]=c,s[5]=o):o=s[5],o},l=e=>{let t,n,r,o;let s=(0,i.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={color:"var(--fgColor-muted",display:"inline-block",verticalAlign:"text-bottom"},r=(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9853 4.76795c.2467 1.23107.1819 2.55631-.3218 3.71134 1.0897-1.00527 1.7464-2.46826 1.7464-3.86921 0-.41421.3357-.75.75-.75.4142 0 .75.33579.75.75 0 2.80515-2.0553 5.92172-5.26314 6.53282.12999.0339.26315.0635.39904.0885 1.3486.2485 2.7916.0174 3.7282-.5446.3552-.2131.8159-.0979 1.029.2573.2131.3552.0979.8159-.2573 1.029-1.3033.782-3.1303 1.0359-4.77168.7335-1.47895-.2726-2.95185-1.0297-3.73462-2.4328.03609.3407.0998.6912.19117 1.0445.39625 1.5319 1.23152 2.7976 2.12066 3.2689.36598.194.5054.6479.31141 1.0139-.19399.366-.64793.5054-1.01391.3114-1.41889-.7521-2.42362-2.4914-2.87037-4.2186-.37219-1.439-.41354-3.09054.18406-4.40236-.18676.13263-.36743.27694-.54001.43237-1.03593.93306-1.73142 2.22122-1.73142 3.69879 0 .4142-.33579.75-.75.75-.41422 0-.75-.3358-.75-.75 0-1.97509.934-3.64826 2.22755-4.81334.88055-.7931 1.9505-1.37217 3.05387-1.65822-.11043-.0376-.22261-.07252-.33631-.10464-1.50098-.42402-2.98649-.28172-3.84609.36302-.33136.24853-.80147.18139-1.05-.14998-.24854-.33136-.1814-.80146.14997-1.05 1.38041-1.03537 3.4149-1.0978 5.1539-.60654 1.67421.47295 3.33259 1.53108 4.06402 3.11319l.0038.00674c.035-.47081.0022-.96424-.0972-1.46029-.2603-1.29954-.95701-2.50156-1.90466-3.21238-.33135-.24854-.39848-.71865-.14994-1.050006.24855-.331356.71865-.398487 1.05001-.14994C10.8023 1.6197 11.6657 3.17263 11.9853 4.76795ZM7.99998 6.0001c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2Z",fill:"currentColor"}),s[2]=n,s[3]=r):(n=s[2],r=s[3]),s[4]!==c?(o=(0,a.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:r}),s[4]=c,s[5]=o):o=s[5],o},c=e=>{let t,n,r,o;let s=(0,i.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={color:"var(--fgColor-muted",display:"inline-block",verticalAlign:"text-bottom"},r=(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M8 6.984c.59-.533 1.204-1.066 1.825-1.493.797-.548 1.7-.991 2.675-.991C14.414 4.5 16 6.086 16 8s-1.586 3.5-3.5 3.5c-.975 0-1.878-.444-2.675-.991-.621-.427-1.235-.96-1.825-1.493-.59.533-1.204 1.066-1.825 1.493-.797.547-1.7.991-2.675.991C1.586 11.5 0 9.914 0 8s1.586-3.5 3.5-3.5c.975 0 1.878.443 2.675.991.621.427 1.235.96 1.825 1.493ZM9.114 8c.536.483 1.052.922 1.56 1.273.704.483 1.3.727 1.826.727 1.086 0 2-.914 2-2 0-1.086-.914-2-2-2-.525 0-1.122.244-1.825.727-.51.35-1.025.79-1.561 1.273ZM3.5 6c-1.086 0-2 .914-2 2 0 1.086.914 2 2 2 .525 0 1.122-.244 1.825-.727.51-.35 1.025-.79 1.561-1.273-.536-.483-1.052-.922-1.56-1.273C4.621 6.244 4.025 6 3.5 6Z"}),s[2]=n,s[3]=r):(n=s[2],r=s[3]),s[4]!==c?(o=(0,a.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:r}),s[4]=c,s[5]=o):o=s[5],o},d={compose:o,dice:s,loops:c,node:r,spaces:l};try{r.displayName||(r.displayName="NodeIcon")}catch{}try{o.displayName||(o.displayName="ComposeIcon")}catch{}try{s.displayName||(s.displayName="DiceIcon")}catch{}try{l.displayName||(l.displayName="SpacesIcon")}catch{}try{c.displayName||(c.displayName="LoopsIcon")}catch{}},13250:(e,t,n)=>{n.d(t,{I:()=>l});var a=n(74848),i=n(21728),r=n(34164),o=n(50781);let s={container:"Icon-module__container--QOYOK",hasBackground:"Icon-module__hasBackground--zz0fp",auburn:"Icon-module__auburn--qIzKn",blue:"Icon-module__blue--Ydgzj",brown:"Icon-module__brown--MphUd",coral:"Icon-module__coral--Jjxvj",cyan:"Icon-module__cyan--O0g_g",gray:"Icon-module__gray--rvF4R",green:"Icon-module__green--nHw65",indigo:"Icon-module__indigo--S8x7A",lemon:"Icon-module__lemon--Nc7fm",lime:"Icon-module__lime--ghjuW",olive:"Icon-module__olive--v6fBi",orange:"Icon-module__orange--AmLH_",pine:"Icon-module__pine--j5Ka1",pink:"Icon-module__pink--QHUu5",plum:"Icon-module__plum--JvLfU",purple:"Icon-module__purple--CLqTs",red:"Icon-module__red--ayaY4",teal:"Icon-module__teal--xmOZK",yellow:"Icon-module__yellow--Y3ymS"};function l(e){let t,n,l,c;let d=(0,i.c)(12),{icon:u,hasBackground:m,color:p,size:h}=e,f=void 0!==m&&m,g=void 0===h?16:h,y="string"==typeof u&&u in o.OZ?o.OZ[u]:u,v=`${f?2*g:g}px`;d[0]!==v?(t={"--custom-size":v},d[0]=v,d[1]=t):t=d[1];let x=t,_=s[void 0===p?"gray":p]??s.gray,C=f&&s.hasBackground;return d[2]!==_||d[3]!==C?(n=(0,r.$)(s.container,_,C),d[2]=_,d[3]=C,d[4]=n):n=d[4],d[5]!==y||d[6]!==g?(l=(0,a.jsx)(y,{size:g}),d[5]=y,d[6]=g,d[7]=l):l=d[7],d[8]!==l||d[9]!==x||d[10]!==n?(c=(0,a.jsx)("div",{style:x,className:n,children:l}),d[8]=l,d[9]=x,d[10]=n,d[11]=c):c=d[11],c}try{l.displayName||(l.displayName="Icon")}catch{}},13253:(e,t,n)=>{n.d(t,{Z:()=>d});var a,i=n(74848),r=n(21728),o=n(44968),s=n(38621);let l={suggestionButton:"Suggestion-module__suggestionButton--Es9kF",icon:"Suggestion-module__icon--hAedH"},c=e=>e in s;function d(e){let t,n,a,d;let u=(0,r.c)(11),{titleHtml:m,icon:p,color:h,onClick:f}=e;u[0]!==p?(t=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return c(t)?s[t]:void 0}(p),u[0]=p,u[1]=t):t=u[1];let g=t;return u[2]!==g||u[3]!==h?(n=g&&(0,i.jsx)("div",{className:l.icon,style:{color:h},children:(0,i.jsx)(g,{})}),u[2]=g,u[3]=h,u[4]=n):n=u[4],u[5]!==m?(a=(0,i.jsx)(o.mo,{html:m}),u[5]=m,u[6]=a):a=u[6],u[7]!==f||u[8]!==n||u[9]!==a?(d=(0,i.jsxs)("button",{className:l.suggestionButton,onClick:f,children:[n,a]}),u[7]=f,u[8]=n,u[9]=a,u[10]=d):d=u[10],d}try{d.displayName||(d.displayName="SuggestionCard")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","react-profiling","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-b1c483","vendors-node_modules_github_catalyst_lib_index_js-node_modules_primer_live-region-element_dis-b2aea6","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_lodash-es__isIterateeCa-89abd9","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_lodash-es_isEqual_js","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-72228e","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_react-relay_index_js","vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js","vendors-node_modules_remark-gfm_lib_index_js-node_modules_remark-parse_lib_index_js-node_modu-44d0fc","vendors-node_modules_fzy_js_index_js-node_modules_github_paste-markdown_dist_index_js","vendors-node_modules_highlight_js_es_core_js-node_modules_lowlight_lib_all_js","vendors-node_modules_buffer_index_js","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_codemirror_commands_dist_index_js-node_modules_codemirror_language-data_-92b5c9","vendors-node_modules_hastscript_lib_index_js-node_modules_react-markdown_lib_index_js-node_mo-68849e","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-690142","vendors-node_modules_js-yaml_index_js","vendors-node_modules_d3-zoom_src_index_js","vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_github_combobox-nav_dist_in-dd06b7","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_react-relay_hooks_js-n-3d4b7c","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_date-picker_ts","ui_packages_drag-and-drop_drag-and-drop_ts-ui_packages_hydro-analytics_hydro-analytics_ts","ui_packages_list-view_src_hooks_use-next-header-tag_ts-ui_packages_verified-fetch_verified-fe-1f4c4d","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_copilot-chat_utils_copilot-chat-helpers_ts","ui_packages_relay-environment_relay-environment_ts-ui_packages_use-named-color_use-named-colo-bdf255","ui_packages_comment-box_api_file-upload_ts-ui_packages_comment-box_api_preview_ts-ui_packages-a6d8e9","ui_packages_copilot-markdown_MarkdownRenderer_tsx","ui_packages_copilot-chat_utils_CopilotChatContext_tsx","ui_packages_app-uuid_app-uuid_ts-ui_packages_signed-commit-badge_index_ts-ui_packages_use-nav-07c073","ui_packages_copilot-chat_components_CopilotIconAnimation_tsx-ui_packages_copilot-chat_compone-8be2e4","ui_packages_issue-viewer_components_IssueViewer_tsx-ui_packages_issue-viewer_contexts_IssueVi-b96bd0","ui_packages_document-metadata_document-metadata_ts-ui_packages_promise-with-resolvers-polyfil-ca0261","ui_packages_custom-copilots_components_MultiFilePicker_tsx"],()=>t(48009)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-d2cc6c8c58a5.js.map